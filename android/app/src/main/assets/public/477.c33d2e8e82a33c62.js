"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[477],{477:(lo,hn,hr)=>{hr.r(hn),hr.d(hn,{jeep_sqlite:()=>Fs});var N=hr(467),Kt=hr(6037);const dr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function dn(){throw new Error("setTimeout has not been defined")}function mn(){throw new Error("clearTimeout has not been defined")}var Bt=dn,$t=mn;function pn(h){if(Bt===setTimeout)return setTimeout(h,0);if((Bt===dn||!Bt)&&setTimeout)return Bt=setTimeout,setTimeout(h,0);try{return Bt(h,0)}catch{try{return Bt.call(null,h,0)}catch{return Bt.call(this,h,0)}}}"function"==typeof dr.setTimeout&&(Bt=setTimeout),"function"==typeof dr.clearTimeout&&($t=clearTimeout);var Yt,Rt=[],rr=!1,kr=-1;function ai(){!rr||!Yt||(rr=!1,Yt.length?Rt=Yt.concat(Rt):kr=-1,Rt.length&&yn())}function yn(){if(!rr){var h=pn(ai);rr=!0;for(var t=Rt.length;t;){for(Yt=Rt,Rt=[];++kr<t;)Yt&&Yt[kr].run();kr=-1,t=Rt.length}Yt=null,rr=!1,function oi(h){if($t===clearTimeout)return clearTimeout(h);if(($t===mn||!$t)&&clearTimeout)return $t=clearTimeout,clearTimeout(h);try{return $t(h)}catch{try{return $t.call(null,h)}catch{return $t.call(this,h)}}}(h)}}function gn(h,t){this.fun=h,this.array=t}function Zt(){}gn.prototype.run=function(){this.fun.apply(null,this.array)};var vi=Zt,bi=Zt,_i=Zt,wi=Zt,Ei=Zt,ki=Zt,Ti=Zt,nr=dr.performance||{},Di=nr.now||nr.mozNow||nr.msNow||nr.oNow||nr.webkitNow||function(){return(new Date).getTime()},ji=new Date,Oi={nextTick:function ci(h){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];Rt.push(new gn(h,t)),1===Rt.length&&!rr&&pn(yn)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:vi,addListener:bi,once:_i,off:wi,removeListener:Ei,removeAllListeners:ki,emit:Ti,binding:function Ai(h){throw new Error("process.binding is not supported")},cwd:function xi(){return"/"},chdir:function Pi(h){throw new Error("process.chdir is not supported")},umask:function Si(){return 0},hrtime:function Ii(h){var t=.001*Di.call(nr),e=Math.floor(t),r=Math.floor(t%1*1e9);return h&&(e-=h[0],(r-=h[1])<0&&(e--,r+=1e9)),[e,r]},platform:"browser",release:{},config:{},uptime:function Ri(){return(new Date-ji)/1e3}};const Lt=Oi;var Tt=[],yt=[],Ci=typeof Uint8Array<"u"?Uint8Array:Array,Gr=!1;function vn(){Gr=!0;for(var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)Tt[t]=h[t],yt[h.charCodeAt(t)]=t;yt[45]=62,yt[95]=63}function Bi(h){return Tt[h>>18&63]+Tt[h>>12&63]+Tt[h>>6&63]+Tt[63&h]}function $i(h,t,e){for(var n=[],i=t;i<e;i+=3)n.push(Bi((h[i]<<16)+(h[i+1]<<8)+h[i+2]));return n.join("")}function Tr(h,t,e,r,n){var i,s,a=8*n-r-1,l=(1<<a)-1,c=l>>1,p=-7,d=e?n-1:0,v=e?-1:1,y=h[t+d];for(d+=v,i=y&(1<<-p)-1,y>>=-p,p+=a;p>0;i=256*i+h[t+d],d+=v,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=r;p>0;s=256*s+h[t+d],d+=v,p-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(y?-1:1);s+=Math.pow(2,r),i-=c}return(y?-1:1)*s*Math.pow(2,i-r)}function _n(h,t,e,r,n,i){var s,a,l,c=8*i-n-1,p=(1<<c)-1,d=p>>1,v=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:i-1,E=r?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?v/l:v*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=p?(a=0,s=p):s+d>=1?(a=(t*l-1)*Math.pow(2,n),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,n),s=0));n>=8;h[e+y]=255&a,y+=E,a/=256,n-=8);for(s=s<<n|a,c+=n;c>0;h[e+y]=255&s,y+=E,s/=256,c-=8);h[e+y-E]|=128*b}var Li={}.toString,wn=Array.isArray||function(h){return"[object Array]"==Li.call(h)};function Vr(){return ne.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ot(h,t){if(Vr()<t)throw new RangeError("Invalid typed array length");return ne.TYPED_ARRAY_SUPPORT?(h=new Uint8Array(t)).__proto__=ne.prototype:(null===h&&(h=new ne(t)),h.length=t),h}function ne(h,t,e){if(!(ne.TYPED_ARRAY_SUPPORT||this instanceof ne))return new ne(h,t,e);if("number"==typeof h){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Hr(this,h)}return En(this,h,t,e)}function En(h,t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?function Ui(h,t,e,r){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),ne.TYPED_ARRAY_SUPPORT?(h=t).__proto__=ne.prototype:h=Kr(h,t),h}(h,t,e,r):"string"==typeof t?function qi(h,t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!ne.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Tn(t,e),n=(h=Ot(h,r)).write(t,e);return n!==r&&(h=h.slice(0,n)),h}(h,t,e):function Wi(h,t){if(At(t)){var e=0|Yr(t.length);return 0===(h=Ot(h,e)).length||t.copy(h,0,0,e),h}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function us(h){return h!=h}(t.length)?Ot(h,0):Kr(h,t);if("Buffer"===t.type&&wn(t.data))return Kr(h,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(h,t)}function kn(h){if("number"!=typeof h)throw new TypeError('"size" argument must be a number');if(h<0)throw new RangeError('"size" argument must not be negative')}function Hr(h,t){if(kn(t),h=Ot(h,t<0?0:0|Yr(t)),!ne.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)h[e]=0;return h}function Kr(h,t){var e=t.length<0?0:0|Yr(t.length);h=Ot(h,e);for(var r=0;r<e;r+=1)h[r]=255&t[r];return h}function Yr(h){if(h>=Vr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Vr().toString(16)+" bytes");return 0|h}function At(h){return!(null==h||!h._isBuffer)}function Tn(h,t){if(At(h))return h.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(h)||h instanceof ArrayBuffer))return h.byteLength;"string"!=typeof h&&(h=""+h);var e=h.length;if(0===e)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return Pr(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return On(h).length;default:if(r)return Pr(h).length;t=(""+t).toLowerCase(),r=!0}}function Gi(h,t,e){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(t>>>=0))return"";for(h||(h="utf8");;)switch(h){case"hex":return ts(this,t,e);case"utf8":case"utf-8":return Sn(this,t,e);case"ascii":return Xi(this,t,e);case"latin1":case"binary":return es(this,t,e);case"base64":return Qi(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rs(this,t,e);default:if(r)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),r=!0}}function Qt(h,t,e){var r=h[t];h[t]=h[e],h[e]=r}function An(h,t,e,r,n){if(0===h.length)return-1;if("string"==typeof e?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=n?0:h.length-1),e<0&&(e=h.length+e),e>=h.length){if(n)return-1;e=h.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof t&&(t=ne.from(t,r)),At(t))return 0===t.length?-1:xn(h,t,e,r,n);if("number"==typeof t)return t&=255,ne.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(h,t,e):Uint8Array.prototype.lastIndexOf.call(h,t,e):xn(h,[t],e,r,n);throw new TypeError("val must be string, number or Buffer")}function xn(h,t,e,r,n){var c,i=1,s=h.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(h.length<2||t.length<2)return-1;i=2,s/=2,a/=2,e/=2}function l(y,E){return 1===i?y[E]:y.readUInt16BE(E*i)}if(n){var p=-1;for(c=e;c<s;c++)if(l(h,c)===l(t,-1===p?0:c-p)){if(-1===p&&(p=c),c-p+1===a)return p*i}else-1!==p&&(c-=c-p),p=-1}else for(e+a>s&&(e=s-a),c=e;c>=0;c--){for(var d=!0,v=0;v<a;v++)if(l(h,c+v)!==l(t,v)){d=!1;break}if(d)return c}return-1}function Vi(h,t,e,r){e=Number(e)||0;var n=h.length-e;r?(r=Number(r))>n&&(r=n):r=n;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;h[e+s]=a}return s}function Hi(h,t,e,r){return Sr(Pr(t,h.length-e),h,e,r)}function Pn(h,t,e,r){return Sr(function as(h){for(var t=[],e=0;e<h.length;++e)t.push(255&h.charCodeAt(e));return t}(t),h,e,r)}function Ki(h,t,e,r){return Pn(h,t,e,r)}function Yi(h,t,e,r){return Sr(On(t),h,e,r)}function Zi(h,t,e,r){return Sr(function cs(h,t){for(var e,r,i=[],s=0;s<h.length&&!((t-=2)<0);++s)r=(e=h.charCodeAt(s))>>8,i.push(e%256),i.push(r);return i}(t,h.length-e),h,e,r)}function Qi(h,t,e){return function bn(h){Gr||vn();for(var t,e=h.length,r=e%3,n="",i=[],s=16383,a=0,l=e-r;a<l;a+=s)i.push($i(h,a,a+s>l?l:a+s));return 1===r?(n+=Tt[(t=h[e-1])>>2],n+=Tt[t<<4&63],n+="=="):2===r&&(n+=Tt[(t=(h[e-2]<<8)+h[e-1])>>10],n+=Tt[t>>4&63],n+=Tt[t<<2&63],n+="="),i.push(n),i.join("")}(0===t&&e===h.length?h:h.slice(t,e))}function Sn(h,t,e){e=Math.min(h.length,e);for(var r=[],n=t;n<e;){var l,c,p,d,i=h[n],s=null,a=i>239?4:i>223?3:i>191?2:1;if(n+a<=e)switch(a){case 1:i<128&&(s=i);break;case 2:128==(192&(l=h[n+1]))&&(d=(31&i)<<6|63&l)>127&&(s=d);break;case 3:c=h[n+2],128==(192&(l=h[n+1]))&&128==(192&c)&&(d=(15&i)<<12|(63&l)<<6|63&c)>2047&&(d<55296||d>57343)&&(s=d);break;case 4:c=h[n+2],p=h[n+3],128==(192&(l=h[n+1]))&&128==(192&c)&&128==(192&p)&&(d=(15&i)<<18|(63&l)<<12|(63&c)<<6|63&p)>65535&&d<1114112&&(s=d)}null===s?(s=65533,a=1):s>65535&&(r.push((s-=65536)>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=a}return function Ji(h){var t=h.length;if(t<=Dn)return String.fromCharCode.apply(String,h);for(var e="",r=0;r<t;)e+=String.fromCharCode.apply(String,h.slice(r,r+=Dn));return e}(r)}ne.TYPED_ARRAY_SUPPORT=void 0===dr.TYPED_ARRAY_SUPPORT||dr.TYPED_ARRAY_SUPPORT,ne.poolSize=8192,ne._augment=function(h){return h.__proto__=ne.prototype,h},ne.from=function(h,t,e){return En(null,h,t,e)},ne.TYPED_ARRAY_SUPPORT&&(ne.prototype.__proto__=Uint8Array.prototype,ne.__proto__=Uint8Array),ne.alloc=function(h,t,e){return function zi(h,t,e,r){return kn(t),t<=0?Ot(h,t):void 0!==e?"string"==typeof r?Ot(h,t).fill(e,r):Ot(h,t).fill(e):Ot(h,t)}(null,h,t,e)},ne.allocUnsafe=function(h){return Hr(null,h)},ne.allocUnsafeSlow=function(h){return Hr(null,h)},ne.isBuffer=function ls(h){return null!=h&&(!!h._isBuffer||Nn(h)||function fs(h){return"function"==typeof h.readFloatLE&&"function"==typeof h.slice&&Nn(h.slice(0,0))}(h))},ne.compare=function(t,e){if(!At(t)||!At(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},ne.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ne.concat=function(t,e){if(!wn(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ne.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=ne.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!At(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},ne.byteLength=Tn,ne.prototype._isBuffer=!0,ne.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Qt(this,e,e+1);return this},ne.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Qt(this,e,e+3),Qt(this,e+1,e+2);return this},ne.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Qt(this,e,e+7),Qt(this,e+1,e+6),Qt(this,e+2,e+5),Qt(this,e+3,e+4);return this},ne.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Sn(this,0,t):Gi.apply(this,arguments)},ne.prototype.equals=function(t){if(!At(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ne.compare(this,t)},ne.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ne.prototype.compare=function(t,e,r,n,i){if(!At(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),l=Math.min(s,a),c=this.slice(n,i),p=t.slice(e,r),d=0;d<l;++d)if(c[d]!==p[d]){s=c[d],a=p[d];break}return s<a?-1:a<s?1:0},ne.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},ne.prototype.indexOf=function(t,e,r){return An(this,t,e,r,!0)},ne.prototype.lastIndexOf=function(t,e,r){return An(this,t,e,r,!1)},ne.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return Vi(this,t,e,r);case"utf8":case"utf-8":return Hi(this,t,e,r);case"ascii":return Pn(this,t,e,r);case"latin1":case"binary":return Ki(this,t,e,r);case"base64":return Yi(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zi(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},ne.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Dn=4096;function Xi(h,t,e){var r="";e=Math.min(h.length,e);for(var n=t;n<e;++n)r+=String.fromCharCode(127&h[n]);return r}function es(h,t,e){var r="";e=Math.min(h.length,e);for(var n=t;n<e;++n)r+=String.fromCharCode(h[n]);return r}function ts(h,t,e){var r=h.length;(!t||t<0)&&(t=0),(!e||e<0||e>r)&&(e=r);for(var n="",i=t;i<e;++i)n+=os(h[i]);return n}function rs(h,t,e){for(var r=h.slice(t,e),n="",i=0;i<r.length;i+=2)n+=String.fromCharCode(r[i]+256*r[i+1]);return n}function tt(h,t,e){if(h%1!=0||h<0)throw new RangeError("offset is not uint");if(h+t>e)throw new RangeError("Trying to access beyond buffer length")}function ht(h,t,e,r,n,i){if(!At(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<i)throw new RangeError('"value" argument is out of bounds');if(e+r>h.length)throw new RangeError("Index out of range")}function Ar(h,t,e,r){t<0&&(t=65535+t+1);for(var n=0,i=Math.min(h.length-e,2);n<i;++n)h[e+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function xr(h,t,e,r){t<0&&(t=4294967295+t+1);for(var n=0,i=Math.min(h.length-e,4);n<i;++n)h[e+n]=t>>>8*(r?n:3-n)&255}function In(h,t,e,r,n,i){if(e+r>h.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function jn(h,t,e,r,n){return n||In(h,0,e,4),_n(h,t,e,r,23,4),e+4}function Rn(h,t,e,r,n){return n||In(h,0,e,8),_n(h,t,e,r,52,8),e+8}ne.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),ne.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=ne.prototype;else{var i=e-t;n=new ne(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},ne.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||tt(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n},ne.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||tt(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},ne.prototype.readUInt8=function(t,e){return e||tt(t,1,this.length),this[t]},ne.prototype.readUInt16LE=function(t,e){return e||tt(t,2,this.length),this[t]|this[t+1]<<8},ne.prototype.readUInt16BE=function(t,e){return e||tt(t,2,this.length),this[t]<<8|this[t+1]},ne.prototype.readUInt32LE=function(t,e){return e||tt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ne.prototype.readUInt32BE=function(t,e){return e||tt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ne.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||tt(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},ne.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||tt(t,e,this.length);for(var n=e,i=1,s=this[t+--n];n>0&&(i*=256);)s+=this[t+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},ne.prototype.readInt8=function(t,e){return e||tt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ne.prototype.readInt16LE=function(t,e){e||tt(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},ne.prototype.readInt16BE=function(t,e){e||tt(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},ne.prototype.readInt32LE=function(t,e){return e||tt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ne.prototype.readInt32BE=function(t,e){return e||tt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ne.prototype.readFloatLE=function(t,e){return e||tt(t,4,this.length),Tr(this,t,!0,23,4)},ne.prototype.readFloatBE=function(t,e){return e||tt(t,4,this.length),Tr(this,t,!1,23,4)},ne.prototype.readDoubleLE=function(t,e){return e||tt(t,8,this.length),Tr(this,t,!0,52,8)},ne.prototype.readDoubleBE=function(t,e){return e||tt(t,8,this.length),Tr(this,t,!1,52,8)},ne.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||ht(this,t,e,r,Math.pow(2,8*r)-1,0);var s=1,a=0;for(this[e]=255&t;++a<r&&(s*=256);)this[e+a]=t/s&255;return e+r},ne.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||ht(this,t,e,r,Math.pow(2,8*r)-1,0);var s=r-1,a=1;for(this[e+s]=255&t;--s>=0&&(a*=256);)this[e+s]=t/a&255;return e+r},ne.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,1,255,0),ne.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ne.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,2,65535,0),ne.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Ar(this,t,e,!0),e+2},ne.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,2,65535,0),ne.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Ar(this,t,e,!1),e+2},ne.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,4,4294967295,0),ne.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):xr(this,t,e,!0),e+4},ne.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,4,4294967295,0),ne.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):xr(this,t,e,!1),e+4},ne.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);ht(this,t,e,r,i-1,-i)}var s=0,a=1,l=0;for(this[e]=255&t;++s<r&&(a*=256);)t<0&&0===l&&0!==this[e+s-1]&&(l=1),this[e+s]=(t/a|0)-l&255;return e+r},ne.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);ht(this,t,e,r,i-1,-i)}var s=r-1,a=1,l=0;for(this[e+s]=255&t;--s>=0&&(a*=256);)t<0&&0===l&&0!==this[e+s+1]&&(l=1),this[e+s]=(t/a|0)-l&255;return e+r},ne.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,1,127,-128),ne.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ne.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,2,32767,-32768),ne.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Ar(this,t,e,!0),e+2},ne.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,2,32767,-32768),ne.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Ar(this,t,e,!1),e+2},ne.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,4,2147483647,-2147483648),ne.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):xr(this,t,e,!0),e+4},ne.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||ht(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ne.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):xr(this,t,e,!1),e+4},ne.prototype.writeFloatLE=function(t,e,r){return jn(this,t,e,!0,r)},ne.prototype.writeFloatBE=function(t,e,r){return jn(this,t,e,!1,r)},ne.prototype.writeDoubleLE=function(t,e,r){return Rn(this,t,e,!0,r)},ne.prototype.writeDoubleBE=function(t,e,r){return Rn(this,t,e,!1,r)},ne.prototype.copy=function(t,e,r,n){if(r||(r=0),!n&&0!==n&&(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var s,i=n-r;if(this===t&&r<e&&e<n)for(s=i-1;s>=0;--s)t[s+e]=this[s+r];else if(i<1e3||!ne.TYPED_ARRAY_SUPPORT)for(s=0;s<i;++s)t[s+e]=this[s+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},ne.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!ne.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=At(t)?t:Pr(new ne(t,n).toString()),l=a.length;for(s=0;s<r-e;++s)this[s+e]=a[s%l]}return this};var ns=/[^+\/0-9A-Za-z-_]/g;function os(h){return h<16?"0"+h.toString(16):h.toString(16)}function Pr(h,t){t=t||1/0;for(var e,r=h.length,n=null,i=[],s=0;s<r;++s){if((e=h.charCodeAt(s))>55295&&e<57344){if(!n){if(e>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}n=e;continue}if(e<56320){(t-=3)>-1&&i.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(t-=3)>-1&&i.push(239,191,189);if(n=null,e<128){if((t-=1)<0)break;i.push(e)}else if(e<2048){if((t-=2)<0)break;i.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;i.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return i}function On(h){return function Fi(h){Gr||vn();var t,e,r,n,i,s,a=h.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=new Ci(3*a/4-(i="="===h[a-2]?2:"="===h[a-1]?1:0)),r=i>0?a-4:a;var l=0;for(t=0,e=0;t<r;t+=4,e+=3)n=yt[h.charCodeAt(t)]<<18|yt[h.charCodeAt(t+1)]<<12|yt[h.charCodeAt(t+2)]<<6|yt[h.charCodeAt(t+3)],s[l++]=n>>16&255,s[l++]=n>>8&255,s[l++]=255&n;return 2===i?(n=yt[h.charCodeAt(t)]<<2|yt[h.charCodeAt(t+1)]>>4,s[l++]=255&n):1===i&&(n=yt[h.charCodeAt(t)]<<10|yt[h.charCodeAt(t+1)]<<4|yt[h.charCodeAt(t+2)]>>2,s[l++]=n>>8&255,s[l++]=255&n),s}(function is(h){if((h=function ss(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}(h).replace(ns,"")).length<2)return"";for(;h.length%4!=0;)h+="=";return h}(h))}function Sr(h,t,e,r){for(var n=0;n<r&&!(n+e>=t.length||n>=h.length);++n)t[n+e]=h[n];return n}function Nn(h){return!!h.constructor&&"function"==typeof h.constructor.isBuffer&&h.constructor.isBuffer(h)}var Mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cn(h){if(h.__esModule)return h;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(h).forEach(function(e){var r=Object.getOwnPropertyDescriptor(h,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return h[e]}})}),t}function zt(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fn={exports:{}};const hs=Cn(Object.freeze({__proto__:null,default:{}}));function Bn(h,t){for(var e=0,r=h.length-1;r>=0;r--){var n=h[r];"."===n?h.splice(r,1):".."===n?(h.splice(r,1),e++):e&&(h.splice(r,1),e--)}if(t)for(;e--;e)h.unshift("..");return h}var ds=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Zr=function(h){return ds.exec(h).slice(1)};function Dr(){for(var h="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var r=e>=0?arguments[e]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(h=r+"/"+h,t="/"===r.charAt(0))}return(t?"/":"")+(h=Bn(Xr(h.split("/"),function(n){return!!n}),!t).join("/"))||"."}function Qr(h){var t=Jr(h),e="/"===ps(h,-1);return!(h=Bn(Xr(h.split("/"),function(r){return!!r}),!t).join("/"))&&!t&&(h="."),h&&e&&(h+="/"),(t?"/":"")+h}function Jr(h){return"/"===h.charAt(0)}function $n(){return Qr(Xr(Array.prototype.slice.call(arguments,0),function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function Ln(h,t){function e(c){for(var p=0;p<c.length&&""===c[p];p++);for(var d=c.length-1;d>=0&&""===c[d];d--);return p>d?[]:c.slice(p,d-p+1)}h=Dr(h).substr(1),t=Dr(t).substr(1);for(var r=e(h.split("/")),n=e(t.split("/")),i=Math.min(r.length,n.length),s=i,a=0;a<i;a++)if(r[a]!==n[a]){s=a;break}var l=[];for(a=s;a<r.length;a++)l.push("..");return(l=l.concat(n.slice(s))).join("/")}function qn(h){var t=Zr(h),e=t[0],r=t[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."}function Un(h,t){var e=Zr(h)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e}function Wn(h){return Zr(h)[3]}function Xr(h,t){if(h.filter)return h.filter(t);for(var e=[],r=0;r<h.length;r++)t(h[r],r,h)&&e.push(h[r]);return e}var ps=function(h,t,e){return h.substr(t,e)};const ys=Cn(Object.freeze({__proto__:null,resolve:Dr,normalize:Qr,isAbsolute:Jr,join:$n,relative:Ln,sep:"/",delimiter:":",dirname:qn,basename:Un,extname:Wn,default:{extname:Wn,basename:Un,dirname:qn,sep:"/",delimiter:":",relative:Ln,join:$n,isAbsolute:Jr,normalize:Qr,resolve:Dr}}));var h,e,r;e=void 0,r=function(n){return e||(e=new Promise(function(i,s){var c,a=typeof n<"u"?n:{},l=a.onAbort;a.onAbort=function(o){s(new Error(o)),l&&l(o)},a.postRun=a.postRun||[],a.postRun.push(function(){i(a)}),h=void 0,c||(c=typeof a<"u"?a:{});var p="object"==typeof window,d="function"==typeof importScripts,v="object"==typeof Lt&&"object"==typeof Lt.versions&&"string"==typeof Lt.versions.node;c.onRuntimeInitialized=function(){function o(z,ce){switch(typeof ce){case"boolean":co(z,ce?1:0);break;case"number":so(z,ce);break;case"string":oo(z,ce,-1,-1);break;case"object":if(null===ce)ni(z);else if(null!=ce.length){var Te=jt(ce,ot);ao(z,Te,ce.length,-1),qr(Te)}else Wr(z,"Wrong API use : tried to return a value of an unknown type ("+ce+").",-1);break;default:ni(z)}}function u(z,ce){for(var Te=[],je=0;je<z;je+=1){var Fe=m(ce+4*je,"i32"),He=eo(Fe);if(1===He||2===He)Fe=io(Fe);else if(3===He)Fe=ro(Fe);else if(4===He){Fe=to(He=Fe),He=no(He);for(var Et=new Uint8Array(Fe),vt=0;vt<Fe;vt+=1)Et[vt]=q[He+vt];Fe=Et}else Fe=null;Te.push(Fe)}return Te}function f(z,ce){this.Ka=z,this.db=ce,this.Ia=1,this.eb=[]}function w(z,ce){if(this.db=ce,ce=Me(z)+1,this.Xa=ln(ce),null===this.Xa)throw Error("Unable to allocate memory for the SQL string");De(z,Q,this.Xa,ce),this.cb=this.Xa,this.Ta=this.hb=null}function j(z){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=z){var ce=this.filename,Te="/",je=ce;if(Te&&(Te="string"==typeof Te?Te:or(Te),je=ce?re(Te+"/"+ce):Te),je=ar(je,4095&(void 0!==(ce=Nt(!0,!0))?ce:438)|32768,0),z){if("string"==typeof z){Te=Array(z.length);for(var Fe=0,He=z.length;Fe<He;++Fe)Te[Fe]=z.charCodeAt(Fe);z=Te}ur(je,146|ce),zr(Te=It(je,577),z,0,z.length,0),br(Te),ur(je,ce)}}this.handleError(Ie(this.filename,K)),this.db=m(K,"i32"),si(this.db),this.Ya={},this.Ma={}}var K=Ht(4),te=c.cwrap,Ie=te("sqlite3_open","number",["string","number"]),Ue=te("sqlite3_close_v2","number",["number"]),Ne=te("sqlite3_exec","number",["number","string","number","number","number"]),et=te("sqlite3_changes","number",["number"]),nt=te("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Jn=te("sqlite3_sql","string",["number"]),Bs=te("sqlite3_normalized_sql","string",["number"]),Xn=te("sqlite3_prepare_v2","number",["number","number","number","number","number"]),$s=te("sqlite3_bind_text","number",["number","number","number","number","number"]),ei=te("sqlite3_bind_blob","number",["number","number","number","number","number"]),Ls=te("sqlite3_bind_double","number",["number","number","number"]),Ms=te("sqlite3_bind_int","number",["number","number","number"]),zs=te("sqlite3_bind_parameter_index","number",["number","string"]),qs=te("sqlite3_step","number",["number"]),Us=te("sqlite3_errmsg","string",["number"]),Ws=te("sqlite3_column_count","number",["number"]),Gs=te("sqlite3_data_count","number",["number"]),Vs=te("sqlite3_column_double","number",["number","number"]),ti=te("sqlite3_column_text","string",["number","number"]),Hs=te("sqlite3_column_blob","number",["number","number"]),Ks=te("sqlite3_column_bytes","number",["number","number"]),Ys=te("sqlite3_column_type","number",["number","number"]),Zs=te("sqlite3_column_name","string",["number","number"]),Qs=te("sqlite3_reset","number",["number"]),Js=te("sqlite3_clear_bindings","number",["number"]),Xs=te("sqlite3_finalize","number",["number"]),ri=te("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),eo=te("sqlite3_value_type","number",["number"]),to=te("sqlite3_value_bytes","number",["number"]),ro=te("sqlite3_value_text","string",["number"]),no=te("sqlite3_value_blob","number",["number"]),io=te("sqlite3_value_double","number",["number"]),so=te("sqlite3_result_double","",["number","number"]),ni=te("sqlite3_result_null","",["number"]),oo=te("sqlite3_result_text","",["number","string","number","number"]),ao=te("sqlite3_result_blob","",["number","number","number","number"]),co=te("sqlite3_result_int","",["number","number"]),Wr=te("sqlite3_result_error","",["number","string","number"]),ii=te("sqlite3_aggregate_context","number",["number","number"]),si=te("RegisterExtensionFunctions","number",["number"]);f.prototype.bind=function(z){if(!this.Ka)throw"Statement closed";return this.reset(),Array.isArray(z)?this.vb(z):null==z||"object"!=typeof z||this.wb(z)},f.prototype.step=function(){if(!this.Ka)throw"Statement closed";this.Ia=1;var z=qs(this.Ka);switch(z){case 100:return!0;case 101:return!1;default:throw this.db.handleError(z)}},f.prototype.qb=function(z){return null==z&&(z=this.Ia,this.Ia+=1),Vs(this.Ka,z)},f.prototype.zb=function(z){if(null==z&&(z=this.Ia,this.Ia+=1),z=ti(this.Ka,z),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(z)},f.prototype.Ab=function(z){return null==z&&(z=this.Ia,this.Ia+=1),ti(this.Ka,z)},f.prototype.getBlob=function(z){null==z&&(z=this.Ia,this.Ia+=1);var ce=Ks(this.Ka,z);z=Hs(this.Ka,z);for(var Te=new Uint8Array(ce),je=0;je<ce;je+=1)Te[je]=q[z+je];return Te},f.prototype.get=function(z,ce){ce=ce||{},null!=z&&this.bind(z)&&this.step(),z=[];for(var Te=Gs(this.Ka),je=0;je<Te;je+=1)switch(Ys(this.Ka,je)){case 1:var Fe=ce.useBigInt?this.zb(je):this.qb(je);z.push(Fe);break;case 2:z.push(this.qb(je));break;case 3:z.push(this.Ab(je));break;case 4:z.push(this.getBlob(je));break;default:z.push(null)}return z},f.prototype.getColumnNames=function(){for(var z=[],ce=Ws(this.Ka),Te=0;Te<ce;Te+=1)z.push(Zs(this.Ka,Te));return z},f.prototype.getAsObject=function(z,ce){z=this.get(z,ce),ce=this.getColumnNames();for(var Te={},je=0;je<ce.length;je+=1)Te[ce[je]]=z[je];return Te},f.prototype.getSQL=function(){return Jn(this.Ka)},f.prototype.getNormalizedSQL=function(){return Bs(this.Ka)},f.prototype.run=function(z){return null!=z&&this.bind(z),this.step(),this.reset()},f.prototype.mb=function(z,ce){null==ce&&(ce=this.Ia,this.Ia+=1),z=rt(z);var Te=jt(z,ot);this.eb.push(Te),this.db.handleError($s(this.Ka,ce,Te,z.length-1,0))},f.prototype.ub=function(z,ce){null==ce&&(ce=this.Ia,this.Ia+=1);var Te=jt(z,ot);this.eb.push(Te),this.db.handleError(ei(this.Ka,ce,Te,z.length,0))},f.prototype.lb=function(z,ce){null==ce&&(ce=this.Ia,this.Ia+=1),this.db.handleError((z===(0|z)?Ms:Ls)(this.Ka,ce,z))},f.prototype.xb=function(z){null==z&&(z=this.Ia,this.Ia+=1),ei(this.Ka,z,0,0,0)},f.prototype.nb=function(z,ce){switch(null==ce&&(ce=this.Ia,this.Ia+=1),typeof z){case"string":return void this.mb(z,ce);case"number":return void this.lb(z,ce);case"bigint":return void this.mb(z.toString(),ce);case"boolean":return void this.lb(z+0,ce);case"object":if(null===z)return void this.xb(ce);if(null!=z.length)return void this.ub(z,ce)}throw"Wrong API use : tried to bind a value of an unknown type ("+z+")."},f.prototype.wb=function(z){var ce=this;return Object.keys(z).forEach(function(Te){var je=zs(ce.Ka,Te);0!==je&&ce.nb(z[Te],je)}),!0},f.prototype.vb=function(z){for(var ce=0;ce<z.length;ce+=1)this.nb(z[ce],ce+1);return!0},f.prototype.reset=function(){return this.freemem(),0===Js(this.Ka)&&0===Qs(this.Ka)},f.prototype.freemem=function(){for(var z;void 0!==(z=this.eb.pop());)qr(z)},f.prototype.free=function(){this.freemem();var z=0===Xs(this.Ka);return delete this.db.Ya[this.Ka],this.Ka=0,z},w.prototype.next=function(){if(null===this.Xa)return{done:!0};if(null!==this.Ta&&(this.Ta.free(),this.Ta=null),!this.db.db)throw this.fb(),Error("Database closed");var z=Er(),ce=Ht(4);Z(K),Z(ce);try{this.db.handleError(Xn(this.db.db,this.cb,-1,K,ce)),this.cb=m(ce,"i32");var Te=m(K,"i32");return 0===Te?(this.fb(),{done:!0}):(this.Ta=new f(Te,this.db),this.db.Ya[Te]=this.Ta,{value:this.Ta,done:!1})}catch(je){throw this.hb=x(this.cb),this.fb(),je}finally{wr(z)}},w.prototype.fb=function(){qr(this.Xa),this.Xa=null},w.prototype.getRemainingSQL=function(){return null!==this.hb?this.hb:x(this.cb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(w.prototype[Symbol.iterator]=function(){return this}),j.prototype.run=function(z,ce){if(!this.db)throw"Database closed";if(ce){z=this.prepare(z,ce);try{z.step()}finally{z.free()}}else this.handleError(Ne(this.db,z,0,0,K));return this},j.prototype.exec=function(z,ce,Te){if(!this.db)throw"Database closed";var je=Er(),Fe=null;try{var He=Ye(z),Et=Ht(4);for(z=[];0!==m(He,"i8");){Z(K),Z(Et),this.handleError(Xn(this.db,He,-1,K,Et));var vt=m(K,"i32");if(He=m(Et,"i32"),0!==vt){var pt=null;for(Fe=new f(vt,this),null!=ce&&Fe.bind(ce);Fe.step();)null===pt&&(pt={columns:Fe.getColumnNames(),values:[]},z.push(pt)),pt.values.push(Fe.get(null,Te));Fe.free()}}return z}catch(kt){throw Fe&&Fe.free(),kt}finally{wr(je)}},j.prototype.each=function(z,ce,Te,je,Fe){"function"==typeof ce&&(je=Te,Te=ce,ce=void 0),z=this.prepare(z,ce);try{for(;z.step();)Te(z.getAsObject(null,Fe))}finally{z.free()}if("function"==typeof je)return je()},j.prototype.prepare=function(z,ce){if(Z(K),this.handleError(nt(this.db,z,-1,K,0)),0===(z=m(K,"i32")))throw"Nothing to prepare";var Te=new f(z,this);return null!=ce&&Te.bind(ce),this.Ya[z]=Te},j.prototype.iterateStatements=function(z){return new w(z,this)},j.prototype.export=function(){Object.values(this.Ya).forEach(function(ce){ce.free()}),Object.values(this.Ma).forEach(er),this.Ma={},this.handleError(Ue(this.db));var z=function cn(o){var u,f=It(o,f||0);o=Vt(o).size;var w=new Uint8Array(o);return lr(f,w,0,o,0),u=w,br(f),u}(this.filename);return this.handleError(Ie(this.filename,K)),this.db=m(K,"i32"),si(this.db),z},j.prototype.close=function(){null!==this.db&&(Object.values(this.Ya).forEach(function(z){z.free()}),Object.values(this.Ma).forEach(er),this.Ma={},this.handleError(Ue(this.db)),vr("/"+this.filename),this.db=null)},j.prototype.handleError=function(z){if(0===z)return null;throw z=Us(this.db),Error(z)},j.prototype.getRowsModified=function(){return et(this.db)},j.prototype.create_function=function(z,ce){Object.prototype.hasOwnProperty.call(this.Ma,z)&&(er(this.Ma[z]),delete this.Ma[z]);var Te=fr(function(je,Fe,He){Fe=u(Fe,He);try{var Et=ce.apply(null,Fe)}catch(vt){return void Wr(je,vt,-1)}o(je,Et)},"viii");return this.Ma[z]=Te,this.handleError(ri(this.db,z,ce.length,1,0,Te,0,0,0)),this},j.prototype.create_aggregate=function(z,ce){var Te=ce.init||function(){return null},je=ce.finalize||function(pt){return pt},Fe=ce.step;if(!Fe)throw"An aggregate function must have a step function in "+z;var He={};Object.hasOwnProperty.call(this.Ma,z)&&(er(this.Ma[z]),delete this.Ma[z]),ce=z+"__finalize",Object.hasOwnProperty.call(this.Ma,ce)&&(er(this.Ma[ce]),delete this.Ma[ce]);var Et=fr(function(pt,kt,fn){var tr=ii(pt,1);Object.hasOwnProperty.call(He,tr)||(He[tr]=Te()),kt=u(kt,fn),kt=[He[tr]].concat(kt);try{He[tr]=Fe.apply(null,kt)}catch(uo){delete He[tr],Wr(pt,uo,-1)}},"viii"),vt=fr(function(pt){var kt=ii(pt,1);try{var fn=je(He[kt])}catch(tr){return delete He[kt],void Wr(pt,tr,-1)}o(pt,fn),delete He[kt]},"vi");return this.Ma[z]=Et,this.Ma[ce]=vt,this.handleError(ri(this.db,z,Fe.length-1,1,0,0,Et,vt,0)),this},c.Database=j};var T,k,y=Object.assign({},c),E="./this.program",b="";if(v){var D=hs,C=ys;b="/Volumes/Development_Lacie/Development/latest/jeep-sqlite/node_modules/sql.js/dist/",k=o=>(o=pe(o)?new URL(o):C.normalize(o),D.readFileSync(o)),T=o=>(o=pe(o)?new URL(o):C.normalize(o),new Promise((u,f)=>{D.readFile(o,void 0,(w,j)=>{w?f(w):u(j.buffer)})})),!c.thisProgram&&1<Lt.argv.length&&(E=Lt.argv[1].replace(/\\/g,"/")),Lt.argv.slice(2),h.exports=c}else(p||d)&&(d?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.startsWith("blob:")?"":b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),d&&(k=o=>{var u=new XMLHttpRequest;return u.open("GET",o,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}),T=o=>pe(o)?new Promise((u,f)=>{var w=new XMLHttpRequest;w.open("GET",o,!0),w.responseType="arraybuffer",w.onload=()=>{(200==w.status||0==w.status&&w.response)&&f(w.response),u(w.status)},w.onerror=u,w.send(null)}):fetch(o,{credentials:"same-origin"}).then(u=>u.ok?u.arrayBuffer():Promise.reject(Error(u.status+" : "+u.url))));var H,L=c.print||console.log.bind(console),I=c.printErr||console.error.bind(console);Object.assign(c,y),y=null,c.thisProgram&&(E=c.thisProgram),c.wasmBinary&&(H=c.wasmBinary);var M,q,Q,_e,S,V,g,ee,J=!1;function xe(){var o=M.buffer;c.HEAP8=q=new Int8Array(o),c.HEAP16=_e=new Int16Array(o),c.HEAPU8=Q=new Uint8Array(o),c.HEAPU16=new Uint16Array(o),c.HEAP32=S=new Int32Array(o),c.HEAPU32=V=new Uint32Array(o),c.HEAPF32=g=new Float32Array(o),c.HEAPF64=ee=new Float64Array(o)}var ae=[],Re=[],fe=[];function Pe(){var o=c.preRun.shift();ae.unshift(o)}var W=0,G=null;function Ee(o){var u,f;throw null===(u=(f=c).onAbort)||void 0===u||u.call(f,o),I(o="Aborted("+o+")"),J=!0,new WebAssembly.RuntimeError(o+". Build with -sASSERTIONS for more info.")}var We,be=o=>o.startsWith("data:application/octet-stream;base64,"),pe=o=>o.startsWith("file://");function Xe(o){if(o==We&&H)return new Uint8Array(H);if(k)return k(o);throw"both async and sync fetching of the wasm failed"}function Le(o,u,f){return function Ce(o){return H?Promise.resolve().then(()=>Xe(o)):T(o).then(u=>new Uint8Array(u),()=>Xe(o))}(o).then(w=>WebAssembly.instantiate(w,u)).then(f,w=>{I(`failed to asynchronously prepare wasm: ${w}`),Ee(w)})}var ge,Be,it=o=>{for(;0<o.length;)o.shift()(c)};function m(o,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":case"i8":return q[o];case"i16":return _e[o>>1];case"i32":return S[o>>2];case"i64":Ee("to do getValue(i64) use WASM_BIGINT");case"float":return g[o>>2];case"double":return ee[o>>3];case"*":return V[o>>2];default:Ee(`invalid type for getValue: ${u}`)}}function Z(o){var u="i32";switch(u.endsWith("*")&&(u="*"),u){case"i1":case"i8":q[o]=0;break;case"i16":_e[o>>1]=0;break;case"i32":S[o>>2]=0;break;case"i64":Ee("to do setValue(i64) use WASM_BIGINT");case"float":g[o>>2]=0;break;case"double":ee[o>>3]=0;break;case"*":V[o>>2]=0;break;default:Ee(`invalid type for setValue: ${u}`)}}var Y=typeof TextDecoder<"u"?new TextDecoder:void 0,P=(o,u,f)=>{var w=u+f;for(f=u;o[f]&&!(f>=w);)++f;if(16<f-u&&o.buffer&&Y)return Y.decode(o.subarray(u,f));for(w="";u<f;){var j=o[u++];if(128&j){var K=63&o[u++];if(192==(224&j))w+=String.fromCharCode((31&j)<<6|K);else{var te=63&o[u++];65536>(j=224==(240&j)?(15&j)<<12|K<<6|te:(7&j)<<18|K<<12|te<<6|63&o[u++])?w+=String.fromCharCode(j):(j-=65536,w+=String.fromCharCode(55296|j>>10,56320|1023&j))}}else w+=String.fromCharCode(j)}return w},x=(o,u)=>o?P(Q,o,u):"",B=(o,u)=>{for(var f=0,w=o.length-1;0<=w;w--){var j=o[w];"."===j?o.splice(w,1):".."===j?(o.splice(w,1),f++):f&&(o.splice(w,1),f--)}if(u)for(;f;f--)o.unshift("..");return o},re=o=>{var u="/"===o.charAt(0),f="/"===o.substr(-1);return(o=B(o.split("/").filter(w=>!!w),!u).join("/"))||u||(o="."),o&&f&&(o+="/"),(u?"/":"")+o},se=o=>{var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(o).slice(1);return o=u[0],u=u[1],o||u?(u&&(u=u.substr(0,u.length-1)),o+u):"."},U=o=>{if("/"===o)return"/";var u=(o=(o=re(o)).replace(/\/$/,"")).lastIndexOf("/");return-1===u?o:o.substr(u+1)},ve=o=>(ve=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return f=>crypto.getRandomValues(f);if(v)try{var o=hr(Object(function(){var w=new Error("Cannot find module 'crypto'");throw w.code="MODULE_NOT_FOUND",w}()));if(o.randomFillSync)return f=>o.randomFillSync(f);var u=o.randomBytes;return f=>(f.set(u(f.byteLength)),f)}catch{}Ee("initRandomDevice")})())(o),he=(...o)=>{for(var u="",f=!1,w=o.length-1;-1<=w&&!f;w--){if("string"!=typeof(f=0<=w?o[w]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!f)return"";u=f+"/"+u,f="/"===f.charAt(0)}return(f?"/":"")+(u=B(u.split("/").filter(j=>!!j),!f).join("/"))||"."},ke=[],Me=o=>{for(var u=0,f=0;f<o.length;++f){var w=o.charCodeAt(f);127>=w?u++:2047>=w?u+=2:55296<=w&&57343>=w?(u+=4,++f):u+=3}return u},De=(o,u,f,w)=>{if(!(0<w))return 0;var j=f;w=f+w-1;for(var K=0;K<o.length;++K){var te=o.charCodeAt(K);if(55296<=te&&57343>=te&&(te=65536+((1023&te)<<10)|1023&o.charCodeAt(++K)),127>=te){if(f>=w)break;u[f++]=te}else{if(2047>=te){if(f+1>=w)break;u[f++]=192|te>>6}else{if(65535>=te){if(f+2>=w)break;u[f++]=224|te>>12}else{if(f+3>=w)break;u[f++]=240|te>>18,u[f++]=128|te>>12&63}u[f++]=128|te>>6&63}u[f++]=128|63&te}}return u[f]=0,f-j};function rt(o,u){var f=Array(Me(o)+1);return o=De(o,f,0,f.length),u&&(f.length=o),f}var _t=[];function at(o,u){_t[o]={input:[],output:[],Wa:u},yr(o,Pt)}var Pt={open(o){var u=_t[o.node.rdev];if(!u)throw new ye(43);o.tty=u,o.seekable=!1},close(o){o.tty.Wa.fsync(o.tty)},fsync(o){o.tty.Wa.fsync(o.tty)},read(o,u,f,w){if(!o.tty||!o.tty.Wa.rb)throw new ye(60);for(var j=0,K=0;K<w;K++){try{var te=o.tty.Wa.rb(o.tty)}catch{throw new ye(29)}if(void 0===te&&0===j)throw new ye(6);if(null==te)break;j++,u[f+K]=te}return j&&(o.node.timestamp=Date.now()),j},write(o,u,f,w){if(!o.tty||!o.tty.Wa.ib)throw new ye(60);try{for(var j=0;j<w;j++)o.tty.Wa.ib(o.tty,u[f+j])}catch{throw new ye(29)}return w&&(o.node.timestamp=Date.now()),j}},Ve={rb(){e:{if(!ke.length){var o=null;if(v){var u=ne.alloc(256),f=0,w=Lt.stdin.fd;try{f=D.readSync(w,u,0,256)}catch(j){if(!j.toString().includes("EOF"))throw j;f=0}0<f&&(o=u.slice(0,f).toString("utf-8"))}else typeof window<"u"&&"function"==typeof window.prompt&&null!==(o=window.prompt("Input: "))&&(o+="\n");if(!o){o=null;break e}ke=rt(o,!0)}o=ke.shift()}return o},ib(o,u){null===u||10===u?(L(P(o.output,0)),o.output=[]):0!=u&&o.output.push(u)},fsync(o){o.output&&0<o.output.length&&(L(P(o.output,0)),o.output=[])},Lb:()=>({Gb:25856,Ib:5,Fb:191,Hb:35387,Eb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),Mb:()=>0,Nb:()=>[24,80]},St={ib(o,u){null===u||10===u?(I(P(o.output,0)),o.output=[]):0!=u&&o.output.push(u)},fsync(o){o.output&&0<o.output.length&&(I(P(o.output,0)),o.output=[])}};function qt(o,u){var f=o.Ha?o.Ha.length:0;f>=u||(u=Math.max(u,f*(1048576>f?2:1.125)>>>0),0!=f&&(u=Math.max(u,256)),f=o.Ha,o.Ha=new Uint8Array(u),0<o.La&&o.Ha.set(f.subarray(0,o.La),0))}var Se={Pa:null,Qa:()=>Se.createNode(null,"/",16895,0),createNode(o,u,f,w){if(24576==(61440&f)||4096==(61440&f))throw new ye(63);return Se.Pa||(Se.Pa={dir:{node:{Oa:Se.Fa.Oa,Na:Se.Fa.Na,lookup:Se.Fa.lookup,$a:Se.Fa.$a,rename:Se.Fa.rename,unlink:Se.Fa.unlink,rmdir:Se.Fa.rmdir,readdir:Se.Fa.readdir,symlink:Se.Fa.symlink},stream:{Sa:Se.Ga.Sa}},file:{node:{Oa:Se.Fa.Oa,Na:Se.Fa.Na},stream:{Sa:Se.Ga.Sa,read:Se.Ga.read,write:Se.Ga.write,kb:Se.Ga.kb,ab:Se.Ga.ab,bb:Se.Ga.bb}},link:{node:{Oa:Se.Fa.Oa,Na:Se.Fa.Na,readlink:Se.Fa.readlink},stream:{}},ob:{node:{Oa:Se.Fa.Oa,Na:Se.Fa.Na},stream:an}}),ft((f=Or(o,u,f,w)).mode)?(f.Fa=Se.Pa.dir.node,f.Ga=Se.Pa.dir.stream,f.Ha={}):32768==(61440&f.mode)?(f.Fa=Se.Pa.file.node,f.Ga=Se.Pa.file.stream,f.La=0,f.Ha=null):40960==(61440&f.mode)?(f.Fa=Se.Pa.link.node,f.Ga=Se.Pa.link.stream):8192==(61440&f.mode)&&(f.Fa=Se.Pa.ob.node,f.Ga=Se.Pa.ob.stream),f.timestamp=Date.now(),o&&(o.Ha[u]=f,o.timestamp=f.timestamp),f},Kb:o=>o.Ha?o.Ha.subarray?o.Ha.subarray(0,o.La):new Uint8Array(o.Ha):new Uint8Array(0),Fa:{Oa(o){var u={};return u.dev=8192==(61440&o.mode)?o.id:1,u.ino=o.id,u.mode=o.mode,u.nlink=1,u.uid=0,u.gid=0,u.rdev=o.rdev,u.size=ft(o.mode)?4096:32768==(61440&o.mode)?o.La:40960==(61440&o.mode)?o.link.length:0,u.atime=new Date(o.timestamp),u.mtime=new Date(o.timestamp),u.ctime=new Date(o.timestamp),u.yb=4096,u.blocks=Math.ceil(u.size/u.yb),u},Na(o,u){if(void 0!==u.mode&&(o.mode=u.mode),void 0!==u.timestamp&&(o.timestamp=u.timestamp),void 0!==u.size&&o.La!=(u=u.size))if(0==u)o.Ha=null,o.La=0;else{var f=o.Ha;o.Ha=new Uint8Array(u),f&&o.Ha.set(f.subarray(0,Math.min(u,o.La))),o.La=u}},lookup(){throw mr[44]},$a:(o,u,f,w)=>Se.createNode(o,u,f,w),rename(o,u,f){if(ft(o.mode)){try{var w=Ct(u,f)}catch{}if(w)for(var j in w.Ha)throw new ye(55)}delete o.parent.Ha[o.name],o.parent.timestamp=Date.now(),o.name=f,u.Ha[f]=o,u.timestamp=o.parent.timestamp},unlink(o,u){delete o.Ha[u],o.timestamp=Date.now()},rmdir(o,u){var w,f=Ct(o,u);for(w in f.Ha)throw new ye(55);delete o.Ha[u],o.timestamp=Date.now()},readdir(o){var f,u=[".",".."];for(f of Object.keys(o.Ha))u.push(f);return u},symlink:(o,u,f)=>((o=Se.createNode(o,u,41471,0)).link=f,o),readlink(o){if(40960!=(61440&o.mode))throw new ye(28);return o.link}},Ga:{read(o,u,f,w,j){var K=o.node.Ha;if(j>=o.node.La)return 0;if(8<(o=Math.min(o.node.La-j,w))&&K.subarray)u.set(K.subarray(j,j+o),f);else for(w=0;w<o;w++)u[f+w]=K[j+w];return o},write(o,u,f,w,j,K){if(u.buffer===q.buffer&&(K=!1),!w)return 0;if((o=o.node).timestamp=Date.now(),u.subarray&&(!o.Ha||o.Ha.subarray)){if(K)return o.Ha=u.subarray(f,f+w),o.La=w;if(0===o.La&&0===j)return o.Ha=u.slice(f,f+w),o.La=w;if(j+w<=o.La)return o.Ha.set(u.subarray(f,f+w),j),w}if(qt(o,j+w),o.Ha.subarray&&u.subarray)o.Ha.set(u.subarray(f,f+w),j);else for(K=0;K<w;K++)o.Ha[j+K]=u[f+K];return o.La=Math.max(o.La,j+w),w},Sa(o,u,f){if(1===f?u+=o.position:2===f&&32768==(61440&o.node.mode)&&(u+=o.node.La),0>u)throw new ye(28);return u},kb(o,u,f){qt(o.node,u+f),o.node.La=Math.max(o.node.La,u+f)},ab(o,u,f,w,j){if(32768!=(61440&o.node.mode))throw new ye(43);if(o=o.node.Ha,2&j||o.buffer!==q.buffer){if((0<f||f+u<o.length)&&(o=o.subarray?o.subarray(f,f+u):Array.prototype.slice.call(o,f,f+u)),f=!0,u=65536*Math.ceil(u/65536),(j=Zn(65536,u))?(Q.fill(0,j,j+u),u=j):u=0,!u)throw new ye(48);q.set(o,u)}else f=!1,u=o.byteOffset;return{Cb:u,tb:f}},bb:(o,u,f,w)=>(Se.Ga.write(o,u,0,w,f,!1),0)}},Nt=(o,u)=>{var f=0;return o&&(f|=365),u&&(f|=146),f},Ut=null,ir={},ct=[],sr=1,ut=null,Dt=!0,ye=class{constructor(o){this.name="ErrnoError",this.Ja=o}},mr={},nn=class{constructor(){this.Za={},this.node=null}get flags(){return this.Za.flags}set flags(o){this.Za.flags=o}get position(){return this.Za.position}set position(o){this.Za.position=o}},sn=class{constructor(o,u,f,w){o||(o=this),this.parent=o,this.Qa=o.Qa,this.Ua=null,this.id=sr++,this.name=u,this.mode=f,this.Fa={},this.Ga={},this.rdev=w}get read(){return!(365&~this.mode)}set read(o){o?this.mode|=365:this.mode&=-366}get write(){return!(146&~this.mode)}set write(o){o?this.mode|=146:this.mode&=-147}};function lt(o,u={}){if(!(o=he(o)))return{path:"",node:null};if(8<(u=Object.assign({pb:!0,jb:0},u)).jb)throw new ye(32);o=o.split("/").filter(te=>!!te);for(var f=Ut,w="/",j=0;j<o.length;j++){var K=j===o.length-1;if(K&&u.parent)break;if(f=Ct(f,o[j]),w=re(w+"/"+o[j]),f.Ua&&(!K||K&&u.pb)&&(f=f.Ua.root),!K||u.Ra)for(K=0;40960==(61440&f.mode);)if(f=Gt(w),f=lt(w=he(se(w),f),{jb:u.jb+1}).node,40<K++)throw new ye(32)}return{path:w,node:f}}function or(o){for(var u;;){if(o===o.parent)return o=o.Qa.sb,u?"/"!==o[o.length-1]?`${o}/${u}`:o+u:o;u=u?`${o.name}/${u}`:o.name,o=o.parent}}function pr(o,u){for(var f=0,w=0;w<u.length;w++)f=(f<<5)-f+u.charCodeAt(w)|0;return(o+f>>>0)%ut.length}function Rr(o){var u=pr(o.parent.id,o.name);if(ut[u]===o)ut[u]=o.Va;else for(u=ut[u];u;){if(u.Va===o){u.Va=o.Va;break}u=u.Va}}function Ct(o,u){var f=ft(o.mode)?(f=Wt(o,"x"))?f:o.Fa.lookup?0:2:54;if(f)throw new ye(f);for(f=ut[pr(o.id,u)];f;f=f.Va)if(f.parent.id===o.id&&f.name===u)return f;return o.Fa.lookup(o,u)}function Or(o,u,f,w){return u=pr((o=new sn(o,u,f,w)).parent.id,o.name),o.Va=ut[u],ut[u]=o}function ft(o){return 16384==(61440&o)}function Nr(o){var u=["r","w","rw"][3&o];return 512&o&&(u+="w"),u}function Wt(o,u){return Dt?0:!u.includes("r")||292&o.mode?u.includes("w")&&!(146&o.mode)||u.includes("x")&&!(73&o.mode)?2:0:2}function Cr(o,u){try{return Ct(o,u),20}catch{}return Wt(o,"wx")}function Fr(o,u,f){try{var w=Ct(o,u)}catch(j){return j.Ja}if(o=Wt(o,"wx"))return o;if(f){if(!ft(w.mode))return 54;if(w===w.parent||"/"===or(w))return 10}else if(ft(w.mode))return 31;return 0}function st(o){if(!(o=ct[o]))throw new ye(8);return o}function Br(o,u=-1){if(o=Object.assign(new nn,o),-1==u)e:{for(u=0;4096>=u;u++)if(!ct[u])break e;throw new ye(33)}return o.fd=u,ct[u]=o}var _,an={open(o){var u,f;o.Ga=ir[o.node.rdev].Ga,null===(u=(f=o.Ga).open)||void 0===u||u.call(f,o)},Sa(){throw new ye(70)}};function yr(o,u){ir[o]={Ga:u}}function $r(o,u){var f="/"===u;if(f&&Ut)throw new ye(10);if(!f&&u){var w=lt(u,{pb:!1});if(u=w.path,(w=w.node).Ua)throw new ye(10);if(!ft(w.mode))throw new ye(54)}(o=o.Qa(u={type:o,Ob:{},sb:u,Bb:[]})).Qa=u,u.root=o,f?Ut=o:w&&(w.Ua=u,w.Qa&&w.Qa.Bb.push(u))}function ar(o,u,f){var w=lt(o,{parent:!0}).node;if(!(o=U(o))||"."===o||".."===o)throw new ye(28);var j=Cr(w,o);if(j)throw new ye(j);if(!w.Fa.$a)throw new ye(63);return w.Fa.$a(w,o,u,f)}function gt(o,u){return ar(o,1023&(void 0!==u?u:511)|16384,0)}function cr(o,u,f){typeof f>"u"&&(f=u,u=438),ar(o,8192|u,f)}function gr(o,u){if(!he(o))throw new ye(44);var f=lt(u,{parent:!0}).node;if(!f)throw new ye(44);var w=Cr(f,u=U(u));if(w)throw new ye(w);if(!f.Fa.symlink)throw new ye(63);f.Fa.symlink(f,u,o)}function Lr(o){var u=lt(o,{parent:!0}).node,f=Ct(u,o=U(o)),w=Fr(u,o,!0);if(w)throw new ye(w);if(!u.Fa.rmdir)throw new ye(63);if(f.Ua)throw new ye(10);u.Fa.rmdir(u,o),Rr(f)}function vr(o){var u=lt(o,{parent:!0}).node;if(!u)throw new ye(44);var f=Ct(u,o=U(o)),w=Fr(u,o,!1);if(w)throw new ye(w);if(!u.Fa.unlink)throw new ye(63);if(f.Ua)throw new ye(10);u.Fa.unlink(u,o),Rr(f)}function Gt(o){if(!(o=lt(o).node))throw new ye(44);if(!o.Fa.readlink)throw new ye(28);return he(or(o.parent),o.Fa.readlink(o))}function Vt(o,u){if(!(o=lt(o,{Ra:!u}).node))throw new ye(44);if(!o.Fa.Oa)throw new ye(63);return o.Fa.Oa(o)}function Ft(o){return Vt(o,!0)}function ur(o,u){if(!(o="string"==typeof o?lt(o,{Ra:!0}).node:o).Fa.Na)throw new ye(63);o.Fa.Na(o,{mode:4095&u|-4096&o.mode,timestamp:Date.now()})}function Xt(o,u){if(0>u)throw new ye(28);if(!(o="string"==typeof o?lt(o,{Ra:!0}).node:o).Fa.Na)throw new ye(63);if(ft(o.mode))throw new ye(31);if(32768!=(61440&o.mode))throw new ye(28);var f=Wt(o,"w");if(f)throw new ye(f);o.Fa.Na(o,{size:u,timestamp:Date.now()})}function It(o,u,f){if(""===o)throw new ye(44);if("string"==typeof u){var w={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[u];if(typeof w>"u")throw Error(`Unknown file open mode: ${u}`);u=w}if(f=64&u?4095&(typeof f>"u"?438:f)|32768:0,"object"==typeof o)var j=o;else{o=re(o);try{j=lt(o,{Ra:!(131072&u)}).node}catch{}}if(w=!1,64&u)if(j){if(128&u)throw new ye(20)}else j=ar(o,f,0),w=!0;if(!j)throw new ye(44);if(8192==(61440&j.mode)&&(u&=-513),65536&u&&!ft(j.mode))throw new ye(54);if(!w&&(f=j?40960==(61440&j.mode)?32:ft(j.mode)&&("r"!==Nr(u)||512&u)?31:Wt(j,Nr(u)):44))throw new ye(f);return 512&u&&!w&&Xt(j,0),u&=-131713,(j=Br({node:j,path:or(j),flags:u,seekable:!0,position:0,Ga:j.Ga,Db:[],error:!1})).Ga.open&&j.Ga.open(j),!c.logReadFiles||1&u||($||($={}),o in $||($[o]=1)),j}function br(o){if(null===o.fd)throw new ye(8);o.gb&&(o.gb=null);try{o.Ga.close&&o.Ga.close(o)}catch(u){throw u}finally{ct[o.fd]=null}o.fd=null}function Mr(o,u,f){if(null===o.fd)throw new ye(8);if(!o.seekable||!o.Ga.Sa)throw new ye(70);if(0!=f&&1!=f&&2!=f)throw new ye(28);o.position=o.Ga.Sa(o,u,f),o.Db=[]}function lr(o,u,f,w,j){if(0>w||0>j)throw new ye(28);if(null===o.fd)throw new ye(8);if(1==(2097155&o.flags))throw new ye(8);if(ft(o.node.mode))throw new ye(31);if(!o.Ga.read)throw new ye(28);var K=typeof j<"u";if(K){if(!o.seekable)throw new ye(70)}else j=o.position;return u=o.Ga.read(o,u,f,w,j),K||(o.position+=u),u}function zr(o,u,f,w,j){if(0>w||0>j)throw new ye(28);if(null===o.fd)throw new ye(8);if(!(2097155&o.flags))throw new ye(8);if(ft(o.node.mode))throw new ye(31);if(!o.Ga.write)throw new ye(28);o.seekable&&1024&o.flags&&Mr(o,0,2);var K=typeof j<"u";if(K){if(!o.seekable)throw new ye(70)}else j=o.position;return u=o.Ga.write(o,u,f,w,j,void 0),K||(o.position+=u),u}function R(o,u,f){o=re("/dev/"+o);var w=Nt(!!u,!!f);A||(A=64);var j=A++<<8;yr(j,{open(K){K.seekable=!1},close(){var K;null!=f&&null!==(K=f.buffer)&&void 0!==K&&K.length&&f(10)},read(K,te,Ie,Ue){for(var Ne=0,et=0;et<Ue;et++){try{var nt=u()}catch{throw new ye(29)}if(void 0===nt&&0===Ne)throw new ye(6);if(null==nt)break;Ne++,te[Ie+et]=nt}return Ne&&(K.node.timestamp=Date.now()),Ne},write(K,te,Ie,Ue){for(var Ne=0;Ne<Ue;Ne++)try{f(te[Ie+Ne])}catch{throw new ye(29)}return Ue&&(K.node.timestamp=Date.now()),Ne}}),cr(o,w,j)}var A,$,O={};function F(o,u,f){if("/"===u.charAt(0))return u;if(o=-100===o?"/":st(o).path,0==u.length){if(!f)throw new ye(44);return o}return re(o+"/"+u)}function X(o,u,f){o=o(u),S[f>>2]=o.dev,S[f+4>>2]=o.mode,V[f+8>>2]=o.nlink,S[f+12>>2]=o.uid,S[f+16>>2]=o.gid,S[f+20>>2]=o.rdev,Be=[o.size>>>0,(ge=o.size,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],S[f+24>>2]=Be[0],S[f+28>>2]=Be[1],S[f+32>>2]=4096,S[f+36>>2]=o.blocks,u=o.atime.getTime();var w=o.mtime.getTime(),j=o.ctime.getTime();return Be=[Math.floor(u/1e3)>>>0,(ge=Math.floor(u/1e3),1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],S[f+40>>2]=Be[0],S[f+44>>2]=Be[1],V[f+48>>2]=u%1e3*1e3,Be=[Math.floor(w/1e3)>>>0,(ge=Math.floor(w/1e3),1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],S[f+56>>2]=Be[0],S[f+60>>2]=Be[1],V[f+64>>2]=w%1e3*1e3,Be=[Math.floor(j/1e3)>>>0,(ge=Math.floor(j/1e3),1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],S[f+72>>2]=Be[0],S[f+76>>2]=Be[1],V[f+80>>2]=j%1e3*1e3,Be=[o.ino>>>0,(ge=o.ino,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],S[f+88>>2]=Be[0],S[f+92>>2]=Be[1],0}var oe=void 0;function ue(){var o=S[+oe>>2];return oe+=4,o}var qe,wt,mt,le=(o,u)=>u+2097152>>>0<4194305-!!o?(o>>>0)+4294967296*u:NaN,me=[0,31,60,91,121,152,182,213,244,274,305,335],we=[0,31,59,90,120,151,181,212,243,273,304,334],Oe={},ze=()=>{if(!qe){var u,o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E||"./this.program"};for(u in Oe)void 0===Oe[u]?delete o[u]:o[u]=Oe[u];var f=[];for(u in o)f.push(`${u}=${o[u]}`);qe=f}return qe},Ye=o=>{var u=Me(o)+1,f=Ht(u);return De(o,Q,f,u),f},ot=0,jt=(o,u)=>(u=1==u?Ht(o.length):ln(o.length),o.subarray||o.slice||(o=new Uint8Array(o)),Q.set(o,u),u),_r=[],er=o=>{wt.delete(mt.get(o)),mt.set(o,null),_r.push(o)},fr=(o,u)=>{if(!wt){var f=mt.length;if(wt=new WeakMap)for(var w=0;w<0+f;w++){var j=mt.get(w);j&&wt.set(j,w)}}if(f=wt.get(o)||0)return f;if(_r.length)f=_r.pop();else{try{mt.grow(1)}catch(Ie){throw Ie instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Ie}f=mt.length-1}try{mt.set(f,o)}catch(Ie){if(!(Ie instanceof TypeError))throw Ie;if("function"==typeof WebAssembly.Function){w=WebAssembly.Function,j={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var K={parameters:[],results:"v"==u[0]?[]:[j[u[0]]]},te=1;te<u.length;++te)K.parameters.push(j[u[te]]);u=new w(K,o)}else{for(w=[1],j=u.slice(0,1),u=u.slice(1),K={i:127,p:127,j:126,f:125,d:124,e:111},w.push(96),128>(te=u.length)?w.push(te):w.push(te%128|128,te>>7),te=0;te<u.length;++te)w.push(K[u[te]]);"v"==j?w.push(0):w.push(1,K[j]),u=[0,97,115,109,1,0,0,0,1],128>(j=w.length)?u.push(j):u.push(j%128|128,j>>7),u.push(...w),u.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),u=new WebAssembly.Module(new Uint8Array(u)),u=new WebAssembly.Instance(u,{e:{f:o}}).exports.f}mt.set(f,u)}return wt.set(o,f),f};[44].forEach(o=>{mr[o]=new ye(o),mr[o].stack="<generic error, no stack>"}),ut=Array(4096),$r(Se,"/"),gt("/tmp"),gt("/home"),gt("/home/web_user"),function(){gt("/dev"),yr(259,{read:()=>0,write:(w,j,K,te)=>te}),cr("/dev/null",259),at(1280,Ve),at(1536,St),cr("/dev/tty",1280),cr("/dev/tty1",1536);var o=new Uint8Array(1024),u=0,f=()=>(0===u&&(u=ve(o).byteLength),o[--u]);R("random",f),R("urandom",f),gt("/dev/shm"),gt("/dev/shm/tmp")}(),function(){gt("/proc");var o=gt("/proc/self");gt("/proc/self/fd"),$r({Qa(){var u=Or(o,"fd",16895,73);return u.Fa={lookup(f,w){var j=st(+w);return(f={parent:null,Qa:{sb:"fake"},Fa:{readlink:()=>j.path}}).parent=f}},u}},"/proc/self/fd")}();var un={a:(o,u,f,w)=>{Ee(`Assertion failed: ${o?P(Q,o):""}, at: `+[u?u?P(Q,u):"":"unknown filename",f,w?w?P(Q,w):"":"unknown function"])},h:function(o,u){try{return ur(o=o?P(Q,o):"",u),0}catch(f){if(typeof O>"u"||"ErrnoError"!==f.name)throw f;return-f.Ja}},H:function(o,u,f){try{if(u=F(o,u=u?P(Q,u):""),-8&f)return-28;var w=lt(u,{Ra:!0}).node;return w?(o="",4&f&&(o+="r"),2&f&&(o+="w"),1&f&&(o+="x"),o&&Wt(w,o)?-2:0):-44}catch(j){if(typeof O>"u"||"ErrnoError"!==j.name)throw j;return-j.Ja}},i:function(o,u){try{return ur(st(o).node,u),0}catch(w){if(typeof O>"u"||"ErrnoError"!==w.name)throw w;return-w.Ja}},g:function(o){try{var u=st(o).node,f="string"==typeof u?lt(u,{Ra:!0}).node:u;if(!f.Fa.Na)throw new ye(63);return f.Fa.Na(f,{timestamp:Date.now()}),0}catch(w){if(typeof O>"u"||"ErrnoError"!==w.name)throw w;return-w.Ja}},b:function(o,u,f){oe=f;try{var w=st(o);switch(u){case 0:var j=ue();if(0>j)break;for(;ct[j];)j++;return function on(o,u=-1){var f,w;return null===(f=(o=Br(o,u)).Ga)||void 0===f||null===(w=f.Jb)||void 0===w||w.call(f,o),o}(w,j).fd;case 1:case 2:case 13:case 14:return 0;case 3:return w.flags;case 4:return j=ue(),w.flags|=j,0;case 12:return j=ue(),_e[j+0>>1]=2,0}return-28}catch(K){if(typeof O>"u"||"ErrnoError"!==K.name)throw K;return-K.Ja}},f:function(o,u){try{return X(Vt,st(o).path,u)}catch(w){if(typeof O>"u"||"ErrnoError"!==w.name)throw w;return-w.Ja}},n:function(o,u,f){u=le(u,f);try{if(isNaN(u))return 61;var w=st(o);if(!(2097155&w.flags))throw new ye(28);return Xt(w.node,u),0}catch(j){if(typeof O>"u"||"ErrnoError"!==j.name)throw j;return-j.Ja}},C:function(o,u){try{if(0===u)return-28;var f=Me("/")+1;return u<f?-68:(De("/",Q,o,u),f)}catch(w){if(typeof O>"u"||"ErrnoError"!==w.name)throw w;return-w.Ja}},F:function(o,u){try{return X(Ft,o=o?P(Q,o):"",u)}catch(f){if(typeof O>"u"||"ErrnoError"!==f.name)throw f;return-f.Ja}},z:function(o,u,f){try{return u=F(o,u=u?P(Q,u):""),"/"===(u=re(u))[u.length-1]&&(u=u.substr(0,u.length-1)),gt(u,f),0}catch(w){if(typeof O>"u"||"ErrnoError"!==w.name)throw w;return-w.Ja}},E:function(o,u,f,w){try{return X(256&w?Ft:Vt,u=F(o,u=u?P(Q,u):"",4096&w),f)}catch(K){if(typeof O>"u"||"ErrnoError"!==K.name)throw K;return-K.Ja}},x:function(o,u,f,w){oe=w;try{return It(u=F(o,u=u?P(Q,u):""),f,w?ue():0).fd}catch(K){if(typeof O>"u"||"ErrnoError"!==K.name)throw K;return-K.Ja}},v:function(o,u,f,w){try{if(u=F(o,u=u?P(Q,u):""),0>=w)return-28;var j=Gt(u),K=Math.min(w,Me(j)),te=q[f+K];return De(j,Q,f,w+1),q[f+K]=te,K}catch(Ie){if(typeof O>"u"||"ErrnoError"!==Ie.name)throw Ie;return-Ie.Ja}},u:function(o){try{return Lr(o=o?P(Q,o):""),0}catch(u){if(typeof O>"u"||"ErrnoError"!==u.name)throw u;return-u.Ja}},G:function(o,u){try{return X(Vt,o=o?P(Q,o):"",u)}catch(f){if(typeof O>"u"||"ErrnoError"!==f.name)throw f;return-f.Ja}},r:function(o,u,f){try{return u=F(o,u=u?P(Q,u):""),0===f?vr(u):512===f?Lr(u):Ee("Invalid flags passed to unlinkat"),0}catch(w){if(typeof O>"u"||"ErrnoError"!==w.name)throw w;return-w.Ja}},q:function(o,u,f){try{if(u=F(o,u=u?P(Q,u):"",!0),f){var w=V[f>>2]+4294967296*S[f+4>>2],j=S[f+8>>2];K=1e3*w+j/1e6,te=1e3*(w=V[(f+=16)>>2]+4294967296*S[f+4>>2])+(j=S[f+8>>2])/1e6}else var K=Date.now(),te=K;o=K;var Ie=lt(u,{Ra:!0}).node;return Ie.Fa.Na(Ie,{timestamp:Math.max(o,te)}),0}catch(Ue){if(typeof O>"u"||"ErrnoError"!==Ue.name)throw Ue;return-Ue.Ja}},l:function(o,u,f){o=new Date(1e3*le(o,u)),S[f>>2]=o.getSeconds(),S[f+4>>2]=o.getMinutes(),S[f+8>>2]=o.getHours(),S[f+12>>2]=o.getDate(),S[f+16>>2]=o.getMonth(),S[f+20>>2]=o.getFullYear()-1900,S[f+24>>2]=o.getDay(),u=o.getFullYear(),S[f+28>>2]=(u%4!=0||u%100==0&&u%400!=0?we:me)[o.getMonth()]+o.getDate()-1|0,S[f+36>>2]=-60*o.getTimezoneOffset(),u=new Date(o.getFullYear(),6,1).getTimezoneOffset();var w=new Date(o.getFullYear(),0,1).getTimezoneOffset();S[f+32>>2]=0|(u!=w&&o.getTimezoneOffset()==Math.min(w,u))},j:function(o,u,f,w,j,K,te,Ie){j=le(j,K);try{if(isNaN(j))return 61;var Ue=st(w);if(2&u&&!(2&f)&&2!=(2097155&Ue.flags))throw new ye(2);if(1==(2097155&Ue.flags))throw new ye(2);if(!Ue.Ga.ab)throw new ye(43);var Ne=Ue.Ga.ab(Ue,o,j,u,f),et=Ne.Cb;return S[te>>2]=Ne.tb,V[Ie>>2]=et,0}catch(nt){if(typeof O>"u"||"ErrnoError"!==nt.name)throw nt;return-nt.Ja}},k:function(o,u,f,w,j,K,te){K=le(K,te);try{var Ie=st(j);if(2&f){if(32768!=(61440&Ie.node.mode))throw new ye(43);if(!(2&w)){var Ue=Q.slice(o,o+u);Ie.Ga.bb&&Ie.Ga.bb(Ie,Ue,K,u,w)}}}catch(Ne){if(typeof O>"u"||"ErrnoError"!==Ne.name)throw Ne;return-Ne.Ja}},y:(o,u,f,w)=>{var j=(new Date).getFullYear(),K=new Date(j,0,1).getTimezoneOffset();j=new Date(j,6,1).getTimezoneOffset(),V[o>>2]=60*Math.max(K,j),S[u>>2]=+(K!=j),o=(u=te=>{var Ie=Math.abs(te);return`UTC${0<=te?"-":"+"}${String(Math.floor(Ie/60)).padStart(2,"0")}${String(Ie%60).padStart(2,"0")}`})(K),u=u(j),j<K?(De(o,Q,f,17),De(u,Q,w,17)):(De(o,Q,w,17),De(u,Q,f,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:o=>{var u=Q.length;if(2147483648<(o>>>=0))return!1;for(var f=1;4>=f;f*=2){var w=u*(1+.2/f);w=Math.min(w,o+100663296);var j=Math;w=Math.max(o,w);e:{j=(j.min.call(j,2147483648,w+(65536-w%65536)%65536)-M.buffer.byteLength+65535)/65536;try{M.grow(j),xe();var K=1;break e}catch{}K=void 0}if(K)return!0}return!1},A:(o,u)=>{var f=0;return ze().forEach((w,j)=>{var K=u+f;for(j=V[o+4*j>>2]=K,K=0;K<w.length;++K)q[j++]=w.charCodeAt(K);q[j]=0,f+=w.length+1}),0},B:(o,u)=>{var f=ze();V[o>>2]=f.length;var w=0;return f.forEach(j=>w+=j.length+1),V[u>>2]=w,0},e:function(o){try{return br(st(o)),0}catch(f){if(typeof O>"u"||"ErrnoError"!==f.name)throw f;return f.Ja}},p:function(o,u){try{var f=st(o);return q[u]=f.tty?2:ft(f.mode)?3:40960==(61440&f.mode)?7:4,_e[u+2>>1]=0,Be=[0,(ge=0,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],S[u+8>>2]=Be[0],S[u+12>>2]=Be[1],Be=[0,(ge=0,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],S[u+16>>2]=Be[0],S[u+20>>2]=Be[1],0}catch(w){if(typeof O>"u"||"ErrnoError"!==w.name)throw w;return w.Ja}},w:function(o,u,f,w){try{e:{var j=st(o);o=u;for(var K,te=u=0;te<f;te++){var Ie=V[o>>2],Ue=V[o+4>>2];o+=8;var Ne=lr(j,q,Ie,Ue,K);if(0>Ne){var et=-1;break e}if(u+=Ne,Ne<Ue)break;typeof K<"u"&&(K+=Ne)}et=u}return V[w>>2]=et,0}catch(nt){if(typeof O>"u"||"ErrnoError"!==nt.name)throw nt;return nt.Ja}},m:function(o,u,f,w,j){u=le(u,f);try{if(isNaN(u))return 61;var K=st(o);return Mr(K,u,w),Be=[K.position>>>0,(ge=K.position,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],S[j>>2]=Be[0],S[j+4>>2]=Be[1],K.gb&&0===u&&0===w&&(K.gb=null),0}catch(te){if(typeof O>"u"||"ErrnoError"!==te.name)throw te;return te.Ja}},D:function(o){try{var u,f=st(o);return null!==(u=f.Ga)&&void 0!==u&&u.fsync?f.Ga.fsync(f):0}catch(w){if(typeof O>"u"||"ErrnoError"!==w.name)throw w;return w.Ja}},t:function(o,u,f,w){try{e:{var j=st(o);o=u;for(var K,te=u=0;te<f;te++){var Ie=V[o>>2],Ue=V[o+4>>2];o+=8;var Ne=zr(j,q,Ie,Ue,K);if(0>Ne){var et=-1;break e}u+=Ne,typeof K<"u"&&(K+=Ne)}et=u}return V[w>>2]=et,0}catch(nt){if(typeof O>"u"||"ErrnoError"!==nt.name)throw nt;return nt.Ja}}},Ae=function(o,u){function f(j){var K,te;return M=(Ae=j.exports).I,xe(),mt=Ae.K,Re.unshift(Ae.J),W--,null===(K=(te=c).monitorRunDependencies)||void 0===K||K.call(te,W),0==W&&G&&(j=G,G=null,j()),Ae}var w={a:un};if(W++,null===(o=(u=c).monitorRunDependencies)||void 0===o||o.call(u,W),c.instantiateWasm)try{return c.instantiateWasm(w,f)}catch(j){return I(`Module.instantiateWasm callback failed with error: ${j}`),!1}return We||(We=be("sql-wasm.wasm")?"sql-wasm.wasm":c.locateFile?c.locateFile("sql-wasm.wasm",b):b+"sql-wasm.wasm"),function Je(o,u){var f=We;H||"function"!=typeof WebAssembly.instantiateStreaming||be(f)||pe(f)||v||"function"!=typeof fetch?Le(f,o,u):fetch(f,{credentials:"same-origin"}).then(w=>WebAssembly.instantiateStreaming(w,o).then(u,function(j){return I(`wasm streaming compile failed: ${j}`),I("falling back to ArrayBuffer instantiation"),Le(f,o,u)}))}(w,function(j){f(j.instance)}),{}}();c._sqlite3_free=o=>(c._sqlite3_free=Ae.L)(o),c._sqlite3_value_text=o=>(c._sqlite3_value_text=Ae.M)(o),c._sqlite3_prepare_v2=(o,u,f,w,j)=>(c._sqlite3_prepare_v2=Ae.N)(o,u,f,w,j),c._sqlite3_step=o=>(c._sqlite3_step=Ae.O)(o),c._sqlite3_reset=o=>(c._sqlite3_reset=Ae.P)(o),c._sqlite3_exec=(o,u,f,w,j)=>(c._sqlite3_exec=Ae.Q)(o,u,f,w,j),c._sqlite3_finalize=o=>(c._sqlite3_finalize=Ae.R)(o),c._sqlite3_column_name=(o,u)=>(c._sqlite3_column_name=Ae.S)(o,u),c._sqlite3_column_text=(o,u)=>(c._sqlite3_column_text=Ae.T)(o,u),c._sqlite3_column_type=(o,u)=>(c._sqlite3_column_type=Ae.U)(o,u),c._sqlite3_errmsg=o=>(c._sqlite3_errmsg=Ae.V)(o),c._sqlite3_clear_bindings=o=>(c._sqlite3_clear_bindings=Ae.W)(o),c._sqlite3_value_blob=o=>(c._sqlite3_value_blob=Ae.X)(o),c._sqlite3_value_bytes=o=>(c._sqlite3_value_bytes=Ae.Y)(o),c._sqlite3_value_double=o=>(c._sqlite3_value_double=Ae.Z)(o),c._sqlite3_value_int=o=>(c._sqlite3_value_int=Ae._)(o),c._sqlite3_value_type=o=>(c._sqlite3_value_type=Ae.$)(o),c._sqlite3_result_blob=(o,u,f,w)=>(c._sqlite3_result_blob=Ae.aa)(o,u,f,w),c._sqlite3_result_double=(o,u)=>(c._sqlite3_result_double=Ae.ba)(o,u),c._sqlite3_result_error=(o,u,f)=>(c._sqlite3_result_error=Ae.ca)(o,u,f),c._sqlite3_result_int=(o,u)=>(c._sqlite3_result_int=Ae.da)(o,u),c._sqlite3_result_int64=(o,u,f)=>(c._sqlite3_result_int64=Ae.ea)(o,u,f),c._sqlite3_result_null=o=>(c._sqlite3_result_null=Ae.fa)(o),c._sqlite3_result_text=(o,u,f,w)=>(c._sqlite3_result_text=Ae.ga)(o,u,f,w),c._sqlite3_aggregate_context=(o,u)=>(c._sqlite3_aggregate_context=Ae.ha)(o,u),c._sqlite3_column_count=o=>(c._sqlite3_column_count=Ae.ia)(o),c._sqlite3_data_count=o=>(c._sqlite3_data_count=Ae.ja)(o),c._sqlite3_column_blob=(o,u)=>(c._sqlite3_column_blob=Ae.ka)(o,u),c._sqlite3_column_bytes=(o,u)=>(c._sqlite3_column_bytes=Ae.la)(o,u),c._sqlite3_column_double=(o,u)=>(c._sqlite3_column_double=Ae.ma)(o,u),c._sqlite3_bind_blob=(o,u,f,w,j)=>(c._sqlite3_bind_blob=Ae.na)(o,u,f,w,j),c._sqlite3_bind_double=(o,u,f)=>(c._sqlite3_bind_double=Ae.oa)(o,u,f),c._sqlite3_bind_int=(o,u,f)=>(c._sqlite3_bind_int=Ae.pa)(o,u,f),c._sqlite3_bind_text=(o,u,f,w,j)=>(c._sqlite3_bind_text=Ae.qa)(o,u,f,w,j),c._sqlite3_bind_parameter_index=(o,u)=>(c._sqlite3_bind_parameter_index=Ae.ra)(o,u),c._sqlite3_sql=o=>(c._sqlite3_sql=Ae.sa)(o),c._sqlite3_normalized_sql=o=>(c._sqlite3_normalized_sql=Ae.ta)(o),c._sqlite3_changes=o=>(c._sqlite3_changes=Ae.ua)(o),c._sqlite3_close_v2=o=>(c._sqlite3_close_v2=Ae.va)(o),c._sqlite3_create_function_v2=(o,u,f,w,j,K,te,Ie,Ue)=>(c._sqlite3_create_function_v2=Ae.wa)(o,u,f,w,j,K,te,Ie,Ue),c._sqlite3_open=(o,u)=>(c._sqlite3_open=Ae.xa)(o,u);var ln=c._malloc=o=>(ln=c._malloc=Ae.ya)(o),qr=c._free=o=>(qr=c._free=Ae.za)(o);c._RegisterExtensionFunctions=o=>(c._RegisterExtensionFunctions=Ae.Aa)(o);var Ur,Zn=(o,u)=>(Zn=Ae.Ba)(o,u),wr=o=>(wr=Ae.Ca)(o),Ht=o=>(Ht=Ae.Da)(o),Er=()=>(Er=Ae.Ea)();function Qn(){function o(){if(!Ur&&(Ur=!0,c.calledRun=!0,!J)){var u,f;if(c.noFSInit||_||(_=!0,c.stdin=c.stdin,c.stdout=c.stdout,c.stderr=c.stderr,c.stdin?R("stdin",c.stdin):gr("/dev/tty","/dev/stdin"),c.stdout?R("stdout",null,c.stdout):gr("/dev/tty","/dev/stdout"),c.stderr?R("stderr",null,c.stderr):gr("/dev/tty1","/dev/stderr"),It("/dev/stdin",0),It("/dev/stdout",1),It("/dev/stderr",1)),Dt=!1,it(Re),null===(u=(f=c).onRuntimeInitialized)||void 0===u||u.call(f),c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var w=c.postRun.shift();fe.unshift(w)}it(fe)}}if(!(0<W)){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)Pe();it(ae),0<W||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),o()},1)):o())}}if(c.stackSave=()=>Er(),c.stackRestore=o=>wr(o),c.stackAlloc=o=>Ht(o),c.cwrap=(o,u,f,w)=>{var j=!f||f.every(K=>"number"===K||"boolean"===K);return"string"!==u&&j&&!w?c["_"+o]:(...K)=>((o,u,f,w)=>{var j={string:Ne=>{var et=0;return null!=Ne&&0!==Ne&&(et=Ye(Ne)),et},array:Ne=>{var et=Ht(Ne.length);return q.set(Ne,et),et}};o=c["_"+o];var Ne,K=[],te=0;if(w)for(var Ie=0;Ie<w.length;Ie++){var Ue=j[f[Ie]];Ue?(0===te&&(te=Er()),K[Ie]=Ue(w[Ie])):K[Ie]=w[Ie]}return Ne=f=o(...K),0!==te&&wr(te),"string"===u?Ne?P(Q,Ne):"":"boolean"===u?!!Ne:Ne})(o,u,f,K)},c.addFunction=fr,c.removeFunction=er,c.UTF8ToString=x,c.ALLOC_NORMAL=ot,c.allocate=jt,c.allocateUTF8OnStack=Ye,G=function o(){Ur||Qn(),Ur||(G=o)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return Qn(),a}))},(h=Fn).exports=r,h.exports.default=r;const gs=Fn.exports;class $e{static getDBFromStore(t,e){return(0,N.A)(function*(){try{const r=yield e.getItem(t);return Promise.resolve(r)}catch(r){return Promise.reject(`GetDBFromStore: ${r.message}`)}})()}static setInitialDBToStore(t,e){return(0,N.A)(function*(){try{return yield e.setItem(t,null),Promise.resolve()}catch(r){return Promise.reject(`SetInitialDBToStore: ${r.message}`)}})()}static setDBToStore(t,e,r){return(0,N.A)(function*(){try{const n=t.export();return yield $e.saveDBToStore(e,n,r),Promise.resolve()}catch(n){return Promise.reject(`SetDBToStore: ${n.message}`)}})()}static saveDBToStore(t,e,r){return(0,N.A)(function*(){try{return yield r.removeItem(t),yield r.setItem(t,e),Promise.resolve()}catch(n){return Promise.reject(`SaveDBToStore: ${n.message}`)}})()}static removeDBFromStore(t,e){return(0,N.A)(function*(){try{return yield e.removeItem(t),Promise.resolve()}catch(r){return Promise.reject(`RemoveDBFromStore: ${r.message}`)}})()}static isDBInStore(t,e){return(0,N.A)(function*(){try{const r=yield e.getItem(t);return Promise.resolve(null!=r&&r.length>0)}catch(r){return Promise.reject(`IsDBInStore: ${r}`)}})()}static restoreDBFromStore(t,e,r){return(0,N.A)(function*(){const n=`${e}-${t}`;try{if(yield $e.isDBInStore(n,r)){if(yield $e.isDBInStore(t,r)){const a=yield $e.getDBFromStore(n,r);return yield $e.saveDBToStore(t,a,r),yield $e.removeDBFromStore(n,r),Promise.resolve()}return Promise.reject(new Error(`RestoreDBFromStore: ${t} does not exist`))}return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}catch(i){return Promise.reject(`RestoreDBFromStore: ${i.message}`)}})()}static copyDBToStore(t,e,r){return(0,N.A)(function*(){try{if(yield $e.isDBInStore(t,r)){const i=yield $e.getDBFromStore(t,r);return yield $e.saveDBToStore(e,i,r),Promise.resolve()}return Promise.reject(new Error(`CopyDBToStore: ${t} does not exist`))}catch(n){return Promise.reject(`CopyDBToStore: ${n.message}`)}})()}static getDBListFromStore(t){return(0,N.A)(function*(){try{const e=yield t.keys();return Promise.resolve(e)}catch(e){return Promise.reject(`GetDBListFromStore: ${e.message}`)}})()}}class bt{static getTablesNames(t){return(0,N.A)(function*(){let e="SELECT name FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const r=[];try{const n=yield ie.queryAll(t,"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const i of n)r.push(i.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTablesNames: ${n.message}`))}})()}static getViewsNames(t){return(0,N.A)(function*(){let e="SELECT name FROM sqlite_master WHERE ";e+="type='view' AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const r=[];try{const n=yield ie.queryAll(t,"SELECT name FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const i of n)r.push(i.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`getViewsNames: ${n.message}`))}})()}static dropElements(t,e){return(0,N.A)(function*(){let r="",n="AND name NOT LIKE ('sqlite_%')";switch(e){case"index":r="DropIndexes";break;case"trigger":r="DropTriggers";break;case"table":r="DropTables",n+=" AND name NOT IN ('sync_table')";break;case"view":r="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${e} not found`))}let i="SELECT name FROM sqlite_master WHERE ";i+=`type = '${e}' ${n};`;try{const s=yield ie.queryAll(t,i,[]);if(s.length>0){const a=e.toUpperCase(),l=[];for(const c of s){let p=`DROP ${a} IF EXISTS `;p+=`${c.name};`,l.push(p)}for(const c of l)if((yield ie.run(t,c,[],!1,"no"))<0)return Promise.reject(new Error(`DropElements: ${r}: lastId < 0`))}return Promise.resolve()}catch(s){return Promise.reject(new Error(`DropElements: ${r}: ${s.message}`))}})()}static dropAll(t){return(0,N.A)(function*(){try{return yield bt.dropElements(t,"table"),yield bt.dropElements(t,"index"),yield bt.dropElements(t,"trigger"),yield bt.dropElements(t,"view"),yield ie.run(t,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(e){return Promise.reject(new Error(`DropAll: ${e.message}`))}})()}static dropTempTables(t,e){return(0,N.A)(function*(){const r=Object.keys(e),n=[];for(const i of r){let s="DROP TABLE IF EXISTS ";s+=`_temp_${i};`,n.push(s)}try{return(yield ie.execute(t,n.join("\n"),!1))<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(i){return Promise.reject(new Error(`DropTempTables: ${i.message}`))}})()}}class Ge{static isJsonSQLite(t){return(0,N.A)(function*(){const e=["database","version","overwrite","encrypted","mode","tables","views"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t)){if(-1===e.indexOf(r)||"database"===r&&"string"!=typeof t[r]||"version"===r&&"number"!=typeof t[r]||"overwrite"===r&&"boolean"!=typeof t[r]||"encrypted"===r&&"boolean"!=typeof t[r]||"mode"===r&&"string"!=typeof t[r]||"tables"===r&&"object"!=typeof t[r])return!1;if("tables"===r)for(const n of t[r])if(!(yield Ge.isTable(n)))return!1;if("views"===r&&"object"!=typeof t[r])return!1;if("views"===r)for(const n of t[r])if(!(yield Ge.isView(n)))return!1}return!0})()}static isTable(t){return(0,N.A)(function*(){const e=["name","schema","indexes","triggers","values"];let r=0;if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const n of Object.keys(t)){if(-1===e.indexOf(n)||"name"===n&&"string"!=typeof t[n]||"schema"===n&&"object"!=typeof t[n]||"indexes"===n&&"object"!=typeof t[n]||"triggers"===n&&"object"!=typeof t[n]||"values"===n&&"object"!=typeof t[n])return!1;if("schema"===n){t.schema.forEach(i=>{i.column&&r++});for(let i=0;i<r;i++)if(!(yield Ge.isSchema(t[n][i])))return!1}if("indexes"===n)for(const i of t[n])if(!(yield Ge.isIndexes(i)))return!1;if("triggers"===n)for(const i of t[n])if(!(yield Ge.isTriggers(i)))return!1;if("values"===n&&r>0)for(const i of t[n])if("object"!=typeof i||i.length!=r)return!1}return!0})()}static isSchema(t){return(0,N.A)(function*(){const e=["column","value","foreignkey","primarykey","constraint"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"column"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"foreignkey"===r&&"string"!=typeof t[r]||"primarykey"===r&&"string"!=typeof t[r]||"constraint"===r&&"string"!=typeof t[r])return!1;return!0})()}static isIndexes(t){return(0,N.A)(function*(){const e=["name","value","mode"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"mode"===r&&("string"!=typeof t[r]||"UNIQUE"!=t[r].toUpperCase()))return!1;return!0})()}static isTriggers(t){return(0,N.A)(function*(){const e=["name","timeevent","condition","logic"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"timeevent"===r&&"string"!=typeof t[r]||"condition"===r&&"string"!=typeof t[r]||"logic"===r&&"string"!=typeof t[r])return!1;return!0})()}static isView(t){return(0,N.A)(function*(){const e=["name","value"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r])return!1;return!0})()}static checkSchemaValidity(t){return(0,N.A)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("column")&&(r.column=t[e].column),n.includes("value")&&(r.value=t[e].value),n.includes("foreignkey")&&(r.foreignkey=t[e].foreignkey),n.includes("constraint")&&(r.constraint=t[e].constraint),!(yield Ge.isSchema(r)))return Promise.reject(new Error(`CheckSchemaValidity: schema[${e}] not valid`))}return Promise.resolve()})()}static checkIndexesValidity(t){return(0,N.A)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("value")&&(r.value=t[e].value),n.includes("name")&&(r.name=t[e].name),n.includes("mode")&&(r.mode=t[e].mode),!(yield Ge.isIndexes(r)))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${e}] not valid`))}return Promise.resolve()})()}static checkTriggersValidity(t){return(0,N.A)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("logic")&&(r.logic=t[e].logic),n.includes("name")&&(r.name=t[e].name),n.includes("timeevent")&&(r.timeevent=t[e].timeevent),n.includes("condition")&&(r.condition=t[e].condition),!(yield Ge.isTriggers(r)))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${e}] not valid`))}return Promise.resolve()})()}static checkViewsValidity(t){return(0,N.A)(function*(){for(let e=0;e<t.length;e++){const r={},n=Object.keys(t[e]);if(n.includes("value")&&(r.value=t[e].value),n.includes("name")&&(r.name=t[e].name),!(yield Ge.isView(r)))return Promise.reject(new Error(`CheckViewsValidity: views[${e}] not valid`))}return Promise.resolve()})()}static getTableColumnNamesTypes(t,e){return(0,N.A)(function*(){let r=[];const n=[],i=[],s=`PRAGMA table_info('${e}');`;try{if(r=yield ie.queryAll(t,s,[]),r.length>0)for(const a of r)n.push(a.name),i.push(a.type);return Promise.resolve({names:n,types:i})}catch(a){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${a.message}`))}})()}static getValues(t,e,r){return(0,N.A)(function*(){const n=[];try{const i=yield Ge.getTableColumnNamesTypes(t,r);let s=[];if(!Object.keys(i).includes("names"))return Promise.reject(new Error(`GetValues: Table ${r} no names`));s=i.names;const a=yield ie.queryAll(t,e,[]);for(const l of a){const c=[];for(const p of s)Object.keys(l).includes(p)?c.push(l[p]):c.push(null);n.push(c)}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetValues: ${i.message}`))}})()}}let Jt=(()=>{class h{static extractTableName(e){const n=e.match(/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i);return n&&n[1]?n[1]:null}static extractWhereClause(e){const n=e.match(/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i);return n&&n[1]?n[1].trim():null}static addPrefixToWhereClause(e,r,n,i){let s;return s=e.includes("AND")?e.split("AND").map(c=>c.trim()):[e],s.map(l=>{const c=l.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!c)return l;const p=c[1].trim(),d=c[2].trim();let v=c[3].trim(),y=p;const E=h.findIndexOfStringInArray(p,n);return-1!==E&&(y=h.getStringAtIndex(r,E)),`${i}${y} ${d} ${v}`}).join(" AND ")}static findIndexOfStringInArray(e,r){return r.indexOf(e)}static getStringAtIndex(e,r){if(r>=0&&r<e.length)return e[r]}static extractForeignKeyInfo(e){const n=e.match(/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/);if(n)return{forKeys:n[1].split(",").map(s=>s.trim()),tableName:n[2],refKeys:n[3].split(",").map(s=>s.trim()),action:n[5]?n[5]:"NO ACTION"};throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(e){const r=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),n=/\b[a-zA-Z]\w*\b(?=\s*(?:<=?|>=?|<>?|=|AND|OR|BETWEEN|NOT|IN|LIKE))|\b[a-zA-Z]\w*\b\s+BETWEEN\s+'[^']+'\s+AND\s+'[^']+'|\(([^)]+)\)\s+IN\s+\(?\s*VALUES\s*\(/g;let i;const s=[];for(;null!==(i=n.exec(e));){const a=i[1];if(a){const l=a.split(",");for(const c of l)s.push(c.trim())}else{const l=i[0];r.has(l.trim().toUpperCase())||s.push(l.trim())}}return s}static flattenMultilineString(e){return e.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(e,r){const i={stmt:e,names:""},s=e.toUpperCase().indexOf("RETURNING");if(-1!==s){const a=e.substring(0,s);if(i.stmt=`${a};`,"wA"===r.substring(0,2)){const c=e.substring(s+9).trim();i.names=c.endsWith(";")?c.substring(0,c.length-1):c}}return i}static extractCombinedPrimaryKey(e){const n=new RegExp(/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g),i=e.matchAll(n),s=[];for(const a of i){const c=a[1].trim().split(",").map(p=>p.trim());s.push(c)}return 0===s.length?null:s}static getWhereStmtForCombinedPK(e,r,n,i){let s=e;for(const a of i){const l=a.join(",")===r.join(",")?n:r;for(const[c,p]of a.entries())s=h.replaceAllString(s,p,l[c])}return s}static replaceAllString(e,r,n){return e.split(r).join(n)}static indicesOf(e,r,n=0){const i=[];let s=e.indexOf(r,n);for(;-1!==s;)i.push(s),s=e.indexOf(r,s+1);return i}static getWhereStmtForNonCombinedPK(e,r,n){let i="",s=e.substring(6);for(let a=0;a<r.length;a++){let l="withRefsNames",c=h.indicesOf(s,r[a]);if(0===c.length&&(c=h.indicesOf(s,n[a]),l="colNames"),c.length>0){let p="";const d=h.indicesOf(s,"=",c[0]);if(d.length>0){const v=h.indicesOf(s,"AND",d[0]);v.length>0?(p=s.substring(d[0]+1,v[0]-1),s=s.substring(v[0]+3)):p=s.substring(d[0]+1),a>0&&(i+=" AND "),i+="withRefsNames"===l?n[a]+" = "+p:r[a]+" = "+p}}}return i="WHERE "+i,i}static updateWhere(e,r,n){let i="";if(e.length<=0||"WHERE"!==e.toUpperCase().substring(0,5))return i;if(r.length===n.length){const s=h.extractCombinedPrimaryKey(e);i=s?h.getWhereStmtForCombinedPK(e,r,n,s):h.getWhereStmtForNonCombinedPK(e,r,n)}return i}}return h.replaceString=(t,e,r)=>{const n=t.indexOf(e);return-1!==n?t.substring(0,n)+r+t.substring(n+e.length):t},h})();class Qe{static findReferencesAndUpdate(t){return new Qe(t)}static getRefs(t){return new Qe(t)}static getReferences(t){return new Qe(t)}static searchForRelatedItems(t){return new Qe(t)}static upDateWhereForDefault(t){return new Qe(t)}static upDateWhereForRestrict(t){return new Qe(t)}static upDateWhereForCascade(t){return new Qe(t)}static executeUpdateForDelete(t){return new Qe(t)}constructor(t){this.message=t}}class xt{static findReferencesAndUpdate(t,e,r,n,i){return(0,N.A)(function*(){try{let s=!0;const a=yield xt.getReferences(t,e),l=a.retRefs,c=a.tableWithRefs;if(l.length<=0||e===c)return s;for(const p of l){const d=Jt.extractForeignKeyInfo(p),v=d.tableName;if(""===v||v!==e)continue;const y=d.forKeys,E=d.refKeys;if(E.length!==y.length)throw Qe.findReferencesAndUpdate("findReferencesAndUpdate: mismatch length");const b=d.action;if("NO_ACTION"===b)continue;let T=c,k=y,D={uWhereStmt:"",setStmt:""};if(xt.checkValuesMatch(y,n))throw Qe.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{const C=yield xt.searchForRelatedItems(t,T,e,r,y,E,i);if(0===C.relatedItems.length&&C.key.length<=0)continue;if(T!==e)switch(b){case"RESTRICT":D=yield xt.upDateWhereForRestrict(C);break;case"CASCADE":D=yield xt.upDateWhereForCascade(C);break;default:D=yield xt.upDateWhereForDefault(y,C)}}D.setStmt.length>0&&D.uWhereStmt.length>0&&xt.executeUpdateForDelete(t,T,D.uWhereStmt,D.setStmt,k,i)}return s}catch(s){throw s instanceof Qe?Qe.findReferencesAndUpdate(s.message?s.message:s):s}})()}static getReferences(t,e){return(0,N.A)(function*(){const r="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+e+"%') AND sql LIKE('%ON DELETE%');";try{const n=yield ie.queryAll(t,r,[]);let i=[],s="";if(n.length>0){let a=xt.getRefs(n[0].sql);i=a.foreignKeys,s=a.tableName}return Promise.resolve({tableWithRefs:s,retRefs:i})}catch(n){throw Qe.getReferences(`getReferences: ${n.message?n.message:n}`)}})()}static getRefs(t){let e="";const r=[],n=Jt.flattenMultilineString(t);try{const s=n.match(/CREATE\s+TABLE\s+(\w+)\s+\(/);s&&(e=s[1]);const l=n.matchAll(/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g);for(const c of l)r.push(c[0])}catch(i){throw Qe.getRefs(`getRefs: Error creating regular expression: ${i}`)}return{tableName:e,foreignKeys:r}}static getReferencedTableName(t){return(0,N.A)(function*(){var e="";if(t.length>0){const r=t.split(new RegExp("REFERENCES","i"));if(2===r.length){const n=r[1].indexOf("(");e=r[1].substring(0,n).trim()}}return e})()}static searchForRelatedItems(t,e,r,n,i,s,a){return(0,N.A)(function*(){const l=[];let c="";const p=i.map(v=>`t1.${v}`),d=s.map(v=>`t2.${v}`);try{let v=Jt.addPrefixToWhereClause(n,s,i,"t2.");v.endsWith(";")&&(v=v.slice(0,-1));const y=p.map((T,k)=>`${T} = ${d[k]}`).join(" AND "),E=`SELECT t1.rowid FROM ${e} t1 JOIN ${r} t2 ON ${y} WHERE ${v} AND t1.sql_deleted = 0;`,b=yield ie.queryAll(t,E,a);return b.length>0&&(c=Object.keys(b[0])[0],l.push(...b)),{key:c,relatedItems:l}}catch(v){throw Qe.searchForRelatedItems(v.message?v.message:v)}})()}static upDateWhereForDefault(t,e){return(0,N.A)(function*(){let r="",n="";try{const i=e.key,s=[];for(const a of e.relatedItems){const l=a[i];void 0!==l&&s.push(l)}for(const a of t)r+=`${a} = NULL, `;r+="sql_deleted = 0",n=`WHERE ${i} IN (`;for(const a of s)n+=`${a},`;n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(i){throw Qe.upDateWhereForDefault(i.message?i.message:i)}return{setStmt:r,uWhereStmt:n}})()}static upDateWhereForRestrict(t){return(0,N.A)(function*(){try{const e="",r="";if(t.relatedItems.length>0)throw Qe.upDateWhereForRestrict("Restrict mode related items exist, please delete them first");return{setStmt:e,uWhereStmt:r}}catch(e){throw Qe.upDateWhereForRestrict(e.message?e.message:e)}})()}static upDateWhereForCascade(t){return(0,N.A)(function*(){let e="",r="";try{const n=t.key,i=[];for(const s of t.relatedItems){const a=s[n];void 0!==a&&i.push(a)}e+="sql_deleted = 1",r=`WHERE ${n} IN (`;for(const s of i)r+=`${s},`;r.endsWith(",")&&(r=r.slice(0,-1)),r+=");"}catch(n){throw Qe.upDateWhereForCascade(n.message?n.message:n)}return{setStmt:e,uWhereStmt:r}})()}static executeUpdateForDelete(t,e,r,n,i,s){try{let a=-1;const l=`UPDATE ${e} SET ${n} ${r}`,c=[];if(s.length>0){const d=r.split("?");";"===d[d.length-1]&&d.pop();for(let v=0;v<d.length;v++)for(const y of i)Jt.indicesOf(d[v],y).length>0&&c.push(s[v])}if(a=ie.run(t,l,c,!1,"no").lastId,-1===a)throw Qe.executeUpdateForDelete(`UPDATE sql_deleted failed for table: ${e}`)}catch(a){throw Qe.executeUpdateForDelete(a.message?a.message:a)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(t,e){for(const r of t)if(!e.includes(r))return!1;return!0}}class ie{static beginTransaction(t,e){return(0,N.A)(function*(){const r="BeginTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("BEGIN TRANSACTION"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message?n.message:n}`))}})()}static rollbackTransaction(t,e){return(0,N.A)(function*(){const r="RollbackTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("ROLLBACK TRANSACTION"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message?n.message:n}`))}})()}static commitTransaction(t,e){const r="CommitTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("COMMIT TRANSACTION"),Promise.resolve()}catch(i){return Promise.reject(new Error(`${r}${i.message?i.message:i}`))}}static dbChanges(t){return(0,N.A)(function*(){let r=0;try{return r=t.exec("SELECT total_changes()")[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`DbChanges failed: ${n.message?n.message:n}`))}})()}static getLastId(t){return(0,N.A)(function*(){let r=-1;try{return r=t.exec("SELECT last_insert_rowid()")[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetLastId failed: ${n.message?n.message:n}`))}})()}static setForeignKeyConstraintsEnabled(t,e){return(0,N.A)(function*(){let r="PRAGMA foreign_keys=OFF";e&&(r="PRAGMA foreign_keys=ON");try{return t.run(r),Promise.resolve()}catch(n){return Promise.reject(new Error(`SetForeignKey: ${n.message?n.message:n}`))}})()}static getVersion(t){return(0,N.A)(function*(){let e=0;try{const r=t.exec("PRAGMA user_version;");return console.log(`#### getVersion new res: ${JSON.stringify(r)}`),r&&r.length>0&&r[0].values&&r[0].values.length>0&&r[0].values[0].length>0?(e=r[0].values[0][0],Promise.resolve(e)):Promise.reject(new Error("GetVersion: Cannot return the version from the database"))}catch(r){return Promise.reject(new Error(`GetVersion: ${r.message?r.message:r}`))}})()}static setVersion(t,e){return(0,N.A)(function*(){try{return t.exec(`PRAGMA user_version = ${e}`),Promise.resolve()}catch(r){return Promise.reject(new Error(`SetVersion: ${r.message?r.message:r}`))}})()}static execute(t,e,r){return(0,N.A)(function*(){try{var n=e;if(!r&&e.toLowerCase().includes("DELETE FROM".toLowerCase())){let a=(n=e.replace(/\n/g,"")).split(";");var i=[];for(const l of a)if("DELETE FROM"===l.trim().substring(0,11).toUpperCase()&&l.toLowerCase().includes("WHERE".toLowerCase())){const p=l.trim(),d=yield ie.deleteSQL(t,p,[]);i.push(d)}else i.push(l);n=i.join(";")}t.exec(n);const s=yield ie.dbChanges(t);return Promise.resolve(s)}catch(s){return Promise.reject(new Error(`Execute: ${s.message?s.message:s}`))}})()}static executeSet(t,e,r,n){return(0,N.A)(function*(){const i=[];let s=-1,a={};for(let l=0;l<e.length;l++){const c="statement"in e[l]?e[l].statement:null,p="values"in e[l]&&e[l].values.length>0?e[l].values:[];if(null==c){let d="ExecuteSet: Error No statement";return d+=` for index ${l}`,Promise.reject(new Error(d))}try{if(Array.isArray(p[0]))for(const d of p){const v=yield ie.replaceUndefinedByNull(d);a=yield ie.run(t,c,v,r,n),s=a.lastId,Object.keys(a).includes("values")&&a.values.length>0&&i.push(a.values)}else{const d=yield ie.replaceUndefinedByNull(p);a=yield ie.run(t,c,d,r,n),s=a.lastId,Object.keys(a).includes("values")&&a.values.length>0&&i.push(a.values)}}catch(d){return Promise.reject(new Error(`ExecuteSet: ${d.message?d.message:d}`))}}return a.lastId=s,a.values="all"===n?i:"one"===n?i[0]:[],Promise.resolve(a)})()}static queryAll(t,e,r){return(0,N.A)(function*(){try{let n=[];if(n=null!=r&&r.length>0?t.exec(e,r):t.exec(e),0==n.length)return Promise.resolve([]);const i=n[0].values.map(s=>{const a={};return n[0].columns.forEach((l,c)=>{a[l]=s[c]}),a});return Promise.resolve(i)}catch(n){return Promise.reject(new Error(`queryAll: ${n.message?n.message:n}`))}})()}static run(t,e,r,n,i){return(0,N.A)(function*(){let s=e.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),a=e,l=[],c={};try{!n&&"DELETE"===s&&(a=yield ie.deleteSQL(t,e,r));const p=r||[];let d;if(p.length>0){const y=yield ie.replaceUndefinedByNull(p);d=t.exec(a,y)}else d=t.exec(a);("all"===i||"one"===i)&&d&&d.length>0&&(l=ie.getReturnedValues(d[0],i));let v=yield ie.getLastId(t);return c.lastId=v,null!=l&&l.length>0&&(c.values=l),Promise.resolve(c)}catch(p){return Promise.reject(new Error(`run: ${p.message?p.message:p}`))}})()}static getReturnedValues(t,e){const r=[];for(let n=0;n<t.values.length;n++){let i={};for(let s=0;s<t.columns.length;s++)i[t.columns[s]]=t.values[n][s];if(r.push(i),"one"===e)break}return r}static deleteSQL(t,e,r){return(0,N.A)(function*(){let n=e;try{const i=yield ie.isLastModified(t,!0),s=yield ie.isSqlDeleted(t,!0);if(!i||!s)return n;const a=Jt.extractWhereClause(n);if(!a)return Promise.reject(new Error("deleteSQL: cannot find a WHERE clause"));const l=Jt.extractTableName(n);if(!l)return Promise.reject(new Error("deleteSQL: cannot find a WHERE clause"));const c=Jt.extractColumnNames(a);if(0===c.length)return Promise.reject(new Error("deleteSQL: Did not find column names in the WHERE Statement"));const p="sql_deleted = 1";return n=(yield xt.findReferencesAndUpdate(t,l,a,c,r))?`UPDATE ${l} SET ${p} WHERE ${a.endsWith(";")?a.slice(0,-1):a} AND sql_deleted = 0;`:"",Promise.resolve(n)}catch(i){return Promise.reject(new Error(`deleteSQL: ${i.message?i.message:i}`))}})()}static getTableList(t){return(0,N.A)(function*(){try{const e=yield bt.getTablesNames(t);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`getTableList: ${e.message?e.message:e}`))}})()}static isTableExists(t,e){return(0,N.A)(function*(){try{let r="SELECT name FROM sqlite_master WHERE ";r+=`type='table' AND name='${e}';`;const i=(yield ie.queryAll(t,r,[])).length>0;return Promise.resolve(i)}catch(r){return Promise.reject(new Error(`isTableExists: ${r.message?r.message:r}`))}})()}static isLastModified(t,e){return(0,N.A)(function*(){if(!e)return Promise.reject("isLastModified: database not opened");try{const r=yield bt.getTablesNames(t);for(const n of r)if((yield Ge.getTableColumnNamesTypes(t,n)).names.includes("last_modified"))return Promise.resolve(!0)}catch(r){return Promise.reject(new Error(`isLastModified: ${r.message?r.message:r}`))}})()}static isSqlDeleted(t,e){return(0,N.A)(function*(){if(!e)return Promise.reject("isSqlDeleted: database not opened");try{const r=yield bt.getTablesNames(t);for(const n of r)if((yield Ge.getTableColumnNamesTypes(t,n)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(r){return Promise.reject(new Error(`isSqlDeleted: ${r.message?r.message:r}`))}})()}static replaceUndefinedByNull(t){return(0,N.A)(function*(){const e=[];for(const r of t){let n=r;typeof r>"u"&&(n=null),e.push(n)}return Promise.resolve(e)})()}static backupTables(t){return(0,N.A)(function*(){let r={};try{const n=yield bt.getTablesNames(t);for(const i of n)try{const s=yield ie.backupTable(t,i);r[`${i}`]=s}catch(s){return Promise.reject(new Error(`BackupTables: table ${i}: ${s.message?s.message:s}`))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`BackupTables: ${n.message?n.message:n}`))}})()}static backupTable(t,e){return(0,N.A)(function*(){try{yield ie.beginTransaction(t,!0);const r=yield ie.getTableColumnNames(t,e),n=`_temp_${e}`,i=`DROP TABLE IF EXISTS ${n};`;yield ie.run(t,i,[],!1,"no");let s=`ALTER TABLE ${e} RENAME `;if(s+=`TO ${n};`,(yield ie.run(t,s,[],!1,"no"))<0){let l="BackupTable: lastId < 0";try{yield ie.rollbackTransaction(t,!0)}catch(c){l+=`: ${c.message?c.message:c}`}return Promise.reject(new Error(`${l}`))}try{return yield ie.commitTransaction(t,!0),Promise.resolve(r)}catch(l){return Promise.reject(new Error(`BackupTable: ${l.message?l.message:l}`))}}catch(r){return Promise.reject(new Error(`BackupTable: ${r.message?r.message:r}`))}})()}static getTableColumnNames(t,e){return(0,N.A)(function*(){let r=[];const n=[],i=`PRAGMA table_info('${e}');`;try{if(r=yield ie.queryAll(t,i,[]),r.length>0)for(const s of r)n.push(s.name);return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`GetTableColumnNames: ${s.message?s.message:s}`))}})()}static findCommonColumns(t,e){return(0,N.A)(function*(){let r={};try{const n=yield bt.getTablesNames(t);if(0===n.length)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(const i of n){const s=yield ie.getTableColumnNames(t,i);Object.keys(e).includes(i)&&(r[i]=ie.arraysIntersection(e[i],s))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`FindCommonColumns: ${n.message?n.message:n}`))}})()}static arraysIntersection(t,e){if(null!=t&&null!=e){const r=new Set(t),n=new Set(e);return[...r].filter(i=>n.has(i))}return[]}static updateNewTablesData(t,e){return(0,N.A)(function*(){try{yield ie.beginTransaction(t,!0);const r=[];if(Object.keys(e).forEach(s=>{const a=e[s].join(",");let l=`INSERT INTO ${s} `;l+=`(${a}) `,l+=`SELECT ${a} FROM _temp_${s};`,r.push(l)}),(yield ie.execute(t,r.join("\n"),!1))<0){let s="updateNewTablesData: changes < 0";try{yield ie.rollbackTransaction(t,!0)}catch(a){s+=`: ${a.message?a.message:a}`}return Promise.reject(new Error(`${s}`))}try{return yield ie.commitTransaction(t,!0),Promise.resolve()}catch(s){return Promise.reject(new Error(`updateNewTablesData: ${s.message?s.message:s}`))}}catch(r){return Promise.reject(new Error(`updateNewTablesData: ${r.message?r.message:r}`))}})()}}class dt{static createDatabaseSchema(t,e){return(0,N.A)(function*(){let r=-1;const n=e.version;try{return yield ie.setVersion(t.mDb,n),"full"===e.mode&&(yield bt.dropAll(t.mDb)),r=yield dt.createSchema(t,e),Promise.resolve(r)}catch(i){return Promise.reject(new Error(`CreateDatabaseSchema: ${i.message}`))}})()}static createSchema(t,e){return(0,N.A)(function*(){let r=0;const n=t.mDb;try{yield ie.beginTransaction(n,!0),t.setIsTransActive(!0)}catch(s){return Promise.reject(new Error(`CreateSchema: ${s.message}`))}const i=yield dt.createSchemaStatement(e);if(i.length>0){const s=i.join("\n");try{if(r=yield ie.execute(n,s,!0),r<0)try{yield ie.rollbackTransaction(n,!0),t.setIsTransActive(!1)}catch(a){return Promise.reject(new Error(`CreateSchema: changes < 0 ${a.message}`))}}catch(a){const l=a.message;try{return yield ie.rollbackTransaction(n,!0),t.setIsTransActive(!1),Promise.reject(new Error(`CreateSchema: ${l}`))}catch(c){return Promise.reject(new Error(`CreateSchema: changes < 0 ${c.message}: ${l}`))}}}try{return yield ie.commitTransaction(n,!0),t.setIsTransActive(!1),Promise.resolve(r)}catch(s){return Promise.reject(new Error(`CreateSchema: commit ${s.message}`))}})()}static createSchemaStatement(t){return(0,N.A)(function*(){const e=[];let r=!1,n=!1;try{for(const i of t.tables){if(null!=i.schema&&i.schema.length>=1){e.push(`CREATE TABLE IF NOT EXISTS ${i.name} (`);for(let s=0;s<i.schema.length;s++)s===i.schema.length-1?i.schema[s].column?(e.push(`${i.schema[s].column} ${i.schema[s].value}`),"last_modified"===i.schema[s].column&&(r=!0),"sql_deleted"===i.schema[s].column&&(n=!0)):i.schema[s].foreignkey?e.push(`FOREIGN KEY (${i.schema[s].foreignkey}) ${i.schema[s].value}`):i.schema[s].constraint&&e.push(`CONSTRAINT ${i.schema[s].constraint} ${i.schema[s].value}`):i.schema[s].column?e.push(`${i.schema[s].column} ${i.schema[s].value},`):i.schema[s].foreignkey?e.push(`FOREIGN KEY (${i.schema[s].foreignkey}) ${i.schema[s].value},`):i.schema[s].primarykey?e.push(`FOREIGN KEY ${i.schema[s].value},`):i.schema[s].constraint&&e.push(`CONSTRAINT ${i.schema[s].constraint} ${i.schema[s].value},`);if(e.push(");"),r&&n){let s="CREATE TRIGGER IF NOT EXISTS ";s+=`${i.name}`,s+="_trigger_last_modified ",s+=`AFTER UPDATE ON ${i.name} `,s+="FOR EACH ROW WHEN NEW.last_modified < ",s+="OLD.last_modified BEGIN UPDATE ",s+=`${i.name} `,s+="SET last_modified = ",s+="(strftime('%s','now')) WHERE id=OLD.id; END;",e.push(s)}}if(null!=i.indexes&&i.indexes.length>=1)for(const s of i.indexes){const a=i.name;let l=`CREATE ${Object.keys(s).includes("mode")?s.mode+" ":""} INDEX IF NOT EXISTS `;l+=`${s.name} ON ${a} (${s.value});`,e.push(l)}if(null!=i.triggers&&i.triggers.length>=1)for(const s of i.triggers){const a=i.name;s.timeevent.toUpperCase().endsWith(" ON")&&(s.timeevent=s.timeevent.substring(0,s.timeevent.length-3));let l="CREATE TRIGGER IF NOT EXISTS ";l+=`${s.name} ${s.timeevent} ON ${a} `,s.condition&&(l+=`${s.condition} `),l+=`${s.logic};`,e.push(l)}}return Promise.resolve(e)}catch(i){return Promise.reject(i)}})()}static createTablesData(t,e,r){return(0,N.A)(function*(){let n=0,i=!1,s=-1,a="",l=-1;const c=t.mDb;try{l=yield ie.dbChanges(c),yield ie.beginTransaction(c,!0),t.setIsTransActive(!0)}catch(p){return Promise.reject(new Error(`createTablesData: ${p.message}`))}for(const p of e.tables)if(null!=p.values&&p.values.length>=1)try{if(s=yield dt.createTableData(c,p,e.mode),r.emit({progress:`create table data ${p.name}`}),s<0)break;i=!0}catch(d){a=d.message,i=!1;break}if(i)try{return yield ie.commitTransaction(c,!0),t.setIsTransActive(!1),n=(yield ie.dbChanges(c))-l,Promise.resolve(n)}catch(p){return Promise.reject(new Error(`CreateTablesData: ${p.message}`))}else{if(!(a.length>0))return Promise.resolve(0);try{return yield ie.rollbackTransaction(c,!0),t.setIsTransActive(!1),Promise.reject(new Error(`CreateTablesData: ${a}`))}catch(p){return Promise.reject(new Error(`CreateTablesData: ${p.message}: ${a}`))}}})()}static createTableData(t,e,r){return(0,N.A)(function*(){let n=-1;try{if(!(yield ie.isTableExists(t,e.name)))return Promise.reject(new Error(`CreateTableData: Table ${e.name} does not exist`));const s=yield Ge.getTableColumnNamesTypes(t,e.name),l=s.names;if(0===s.types.length)return Promise.reject(new Error(`CreateTableData: Table ${e.name} info does not exist`));for(let c=0;c<e.values.length;c++){let p=e.values[c],d=!0;const v=yield dt.createRowStatement(t,l,p,c,e.name,r);if(d=yield dt.checkUpdate(t,v,p,e.name,l),d){if("DELETE"===v.substring(0,6).toUpperCase()&&(p=[]),n=yield ie.run(t,v,p,!0,"no"),n<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else n=0}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`CreateTableData: ${i.message}`))}})()}static createRowStatement(t,e,r,n,i,s){return(0,N.A)(function*(){if(r.length!=e.length||0===r.length||0===e.length)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not correct length`));try{const a=yield dt.isIdExists(t,i,e[0],r[0]);let l;if("full"===s||"partial"===s&&!a){const c=e.join(),p=yield dt.createQuestionMarkString(e.length);l=`INSERT INTO ${i} (${c}) VALUES (`,l+=`${p});`}else{let c=!0;const d=e.findIndex(v=>"sql_deleted"===v);if(d>=0&&1===r[d]&&(c=!1,l=`DELETE FROM ${i} WHERE `,l+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`),c){const v=yield dt.setNameForUpdate(e);if(0===v.length)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not set to String`));l=`UPDATE ${i} SET ${v} WHERE `,l+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`}}return Promise.resolve(l)}catch(a){return Promise.reject(new Error(`CreateRowStatement: ${a.message}`))}})()}static checkUpdate(t,e,r,n,i){return(0,N.A)(function*(){if("UPDATE"!==e.substring(0,6))return Promise.resolve(!0);try{let a=`SELECT * FROM ${n} WHERE `;a+="string"==typeof r[0]?`${i[0]} = '${r[0]}';`:`${i[0]} = ${r[0]};`;const l=yield Ge.getValues(t,a,n);let c=[];if(l.length>0&&(c=l[0]),r.length>0&&c.length>0&&r.length===c.length){for(let p=0;p<r.length;p++)if(r[p]!==c[p])return Promise.resolve(!0);return Promise.resolve(!1)}return Promise.reject(new Error("CheckUpdate: Both arrays not the same length"))}catch(a){return Promise.reject(new Error(`CheckUpdate: ${a.message}`))}})()}static isIdExists(t,e,r,n){return(0,N.A)(function*(){let i=!1,s=`SELECT ${r} FROM ${e} WHERE ${r} = `;"number"==typeof n&&(s+=`${n};`),"string"==typeof n&&(s+=`'${n}';`);try{return 1===(yield ie.queryAll(t,s,[])).length&&(i=!0),Promise.resolve(i)}catch(a){return Promise.reject(new Error(`IsIdExists: ${a.message}`))}})()}static isType(t,e){return(0,N.A)(function*(){let r=!1;return"NULL"===t&&"object"==typeof e&&(r=!0),"TEXT"===t&&"string"==typeof e&&(r=!0),"INTEGER"===t&&"number"==typeof e&&(r=!0),"REAL"===t&&"number"==typeof e&&(r=!0),"BLOB"===t&&"string"==typeof e&&(r=!0),r?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))})()}static checkColumnTypes(t,e){return(0,N.A)(function*(){for(let r=0;r<e.length;r++)if(null!=e[r])try{yield dt.isType(t[r],e[r])}catch{return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()})()}static createQuestionMarkString(t){return(0,N.A)(function*(){let e="";for(let r=0;r<t;r++)e+="?,";return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))})()}static setNameForUpdate(t){return(0,N.A)(function*(){let e="";for(const r of t)e+=`${r} = ? ,`;return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("SetNameForUpdate: length = 0"))})()}static createView(t,e){return(0,N.A)(function*(){const r=`CREATE VIEW IF NOT EXISTS ${e.name} AS ${e.value};`;try{return(yield ie.execute(t,r,!0))<0?Promise.reject(new Error(`CreateView: ${e.name} failed`)):Promise.resolve()}catch(n){return Promise.reject(new Error(`CreateView: ${n.message}`))}})()}static createViews(t,e){return(0,N.A)(function*(){const r=t.mDb;let n=!1,i="",s=-1,a=-1;try{s=yield ie.dbChanges(r),yield ie.beginTransaction(r,!0),t.setIsTransActive(!0)}catch(l){return Promise.reject(new Error(`createViews: ${l.message}`))}for(const l of e.views)if(null!=l.value)try{yield dt.createView(r,l),n=!0}catch(c){i=c.message,n=!1;break}if(n)try{return yield ie.commitTransaction(r,!0),t.setIsTransActive(!1),a=(yield ie.dbChanges(r))-s,Promise.resolve(a)}catch(l){return Promise.reject(new Error(`createViews: ${l.message}`))}else{if(!(i.length>0))return Promise.resolve(0);try{return yield ie.rollbackTransaction(r,!0),t.setIsTransActive(!1),Promise.reject(new Error(`createViews: ${i}`))}catch(l){return Promise.reject(new Error(`createViews: ${l.message}: ${i}`))}}})()}}class Ke{static createExportObject(t,e,r){return(0,N.A)(function*(){const n={};let i=[],s=[],a="";try{s=yield Ke.getViewsName(t);const l=yield Ke.getTablesNameSQL(t);if(0===l.length)return Promise.reject(new Error("createExportObject: table's names failed"));if(!(yield ie.isTableExists(t,"sync_table"))&&"partial"===e.mode)return Promise.reject(new Error("No sync_table available"));switch(e.mode){case"partial":i=yield Ke.getTablesPartial(t,l,r);break;case"full":i=yield Ke.getTablesFull(t,l,r);break;default:a="createExportObject: expMode "+e.mode+" not defined"}return a.length>0?Promise.reject(new Error(a)):(i.length>0&&(n.database=e.database,n.version=e.version,n.encrypted=e.encrypted,n.mode=e.mode,n.tables=i,s.length>0&&(n.views=s)),Promise.resolve(n))}catch(l){return Promise.reject(new Error("createExportObject: "+l.message))}})()}static getViewsName(t){return(0,N.A)(function*(){const e=[];let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=yield ie.queryAll(t,"SELECT name,sql FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%';",[]);for(const i of n){const s={};s.name=i.name,s.value=i.sql.substring(i.sql.indexOf("AS ")+3),e.push(s)}return Promise.resolve(e)}catch(i){return Promise.reject(new Error(`getViewsName: ${i.message}`))}})()}static getTablesFull(t,e,r){return(0,N.A)(function*(){const n=[];let i="";try{for(const s of e){let a,l;if(!s.name){i="GetTablesFull: no name";break}if(a=s.name,!s.sql){i="GetTablesFull: no sql";break}l=s.sql;const c={},p=yield Ke.getSchema(l);if(0===p.length){i="GetTablesFull: no Schema returned";break}yield Ge.checkSchemaValidity(p);const d=yield Ke.getIndexes(t,a);d.length>0&&(yield Ge.checkIndexesValidity(d));const v=yield Ke.getTriggers(t,a);v.length>0&&(yield Ge.checkTriggersValidity(v));let y=`Full: Table ${a} schema export completed ...`;r.emit({progress:y});const E=`SELECT * FROM ${a};`,b=yield Ge.getValues(t,E,a);if(c.name=a,!(p.length>0)){i="GetTablesFull: must contain schema";break}if(c.schema=p,d.length>0&&(c.indexes=d),v.length>0&&(c.triggers=v),b.length>0&&(c.values=b),Object.keys(c).length<=1){i=`GetTablesFull: table ${a} is not a jsonTable`;break}y=`Full: Table ${a} table data export completed ...`,r.emit({progress:y}),n.push(c)}return i.length>0?Promise.reject(new Error(i)):Promise.resolve(n)}catch(s){return Promise.reject(new Error(`GetTablesFull: ${s.message}`))}})()}static getSchema(t){return(0,N.A)(function*(){const e=[],r=t.indexOf("("),n=t.lastIndexOf(")");let i=t.substring(r+1,n);try{i=yield Ke.modEmbeddedParentheses(i);const s=i.split(",");for(let a=0;a<s.length;a++){let l=[];const c=s[a].replace(/\n/g,"").trim();l[0]=c.substring(0,c.indexOf(" ")),l[1]=c.substring(c.indexOf(" ")+1);const p={};if("FOREIGN"===l[0].toUpperCase()){const d=c.indexOf("("),v=c.indexOf(")"),E=c.substring(d+1,v).split("\xa7");l[0]=E.join(","),l[0]=l[0].replace(/, /g,","),l[1]=c.substring(v+2),p.foreignkey=l[0]}else if("PRIMARY"===l[0].toUpperCase())l=Ke.getRow(c,"CPK"),p.constraint=l[0];else if("UNIQUE"===l[0].toUpperCase())l=Ke.getRow(c,"CUN"),p.constraint=l[0];else if("CONSTRAINT"===l[0].toUpperCase()){let d=[];const v=l[1].trim();d[0]=v.substring(0,v.indexOf(" ")),d[1]=v.substring(v.indexOf(" ")+1),l[0]=d[0],p.constraint=l[0],l[1]=d[1]}else p.column=l[0];p.value=l[1].replace(/\xa7/g,","),e.push(p)}return Promise.resolve(e)}catch(s){return Promise.reject(new Error(s.message))}})()}static getRow(t,e){let r=[];const n=t.indexOf("("),i=t.indexOf(")"),a=t.substring(n+1,i).split("\xa7");return r[0]=`${e}_`+a.join("_"),r[0]=r[0].replace(/_ /g,"_"),r[1]=t,r}static getIndexes(t,e){return(0,N.A)(function*(){const r=[];let n="";try{let i="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";i+=`type = 'index' AND tbl_name = '${e}' `,i+="AND sql NOTNULL;";const s=yield ie.queryAll(t,i,[]);if(s.length>0){for(const a of s){if(3!==Object.keys(a).length){n=`GetIndexes: Table ${e} creating indexes`;break}if(a.tbl_name!==e){n=`GetIndexes: Table ${e} doesn't match`;break}{const c=a.sql,p=c.includes("UNIQUE")?"UNIQUE":"",d=c.lastIndexOf("("),v=c.lastIndexOf(")"),y={};y.name=a.name,y.value=c.slice(d+1,v),p.length>0&&(y.mode=p),r.push(y)}}if(n.length>0)return Promise.reject(new Error(n))}return Promise.resolve(r)}catch(i){return Promise.reject(new Error(`GetIndexes: ${i.message}`))}})()}static getTriggers(t,e){return(0,N.A)(function*(){const r=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${e}' `,n+="AND sql NOT NULL;";const i=yield ie.queryAll(t,n,[]);if(i.length>0)for(const s of i){if(3!==Object.keys(s).length)return Promise.reject(new Error(`GetTriggers: Table ${e} creating indexes`));if(s.tbl_name!==e)return Promise.reject(new Error(`GetTriggers: Table ${e} doesn't match`));{const c=s.name;let p=s.sql.split(c);if(2!=p.length)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!p[1].includes(e))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${e}`));const d=p[1].split(e,1)[0].trim();if(p=p[1].split(d+" "+e),2!=p.length)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let v="",y="";if("BEGIN"!==p[1].trim().substring(0,5).toUpperCase()){if(p=p[1].trim().split("BEGIN"),2!=p.length)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));v=p[0].trim(),y="BEGIN"+p[1]}else y=p[1].trim();const E={};E.name=c,E.logic=y,v.length>0&&(E.condition=v),E.timeevent=d,r.push(E)}}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTriggers: ${n.message}`))}})()}static getTablesPartial(t,e,r){return(0,N.A)(function*(){const n=[];let i={},s=0,a=[],l="";try{const c=yield Ke.getPartialModeData(t,e);Object.keys(c).includes("syncDate")&&(s=c.syncDate),Object.keys(c).includes("modTables")&&(i=c.modTables,a=Object.keys(i));for(const p of e){let d="",v="";if(!p.name){l="GetTablesFull: no name";break}if(d=p.name,!p.sql){l="GetTablesFull: no sql";break}if(v=p.sql,0==a.length||-1===a.indexOf(d)||"No"==i[d])continue;const y={};let E=[],b=[],T=[];y.name=p,"Create"===i[y.name]&&(E=yield Ke.getSchema(v),E.length>0&&(yield Ge.checkSchemaValidity(E)),b=yield Ke.getIndexes(t,d),b.length>0&&(yield Ge.checkIndexesValidity(b)),T=yield Ke.getTriggers(t,d),T.length>0&&(yield Ge.checkTriggersValidity(T)));let k=`Partial: Table ${d} schema export completed ...`;r.emit({progress:k});let D="";D="Create"===i[d]?`SELECT * FROM ${d};`:`SELECT * FROM ${d} WHERE last_modified > ${s};`;const C=yield Ge.getValues(t,D,d);if(y.name=d,E.length>0&&(y.schema=E),b.length>0&&(y.indexes=b),T.length>0&&(y.triggers=T),C.length>0&&(y.values=C),Object.keys(y).length<=1){l=`GetTablesPartial: table ${d} is not a jsonTable`;break}k=`Partial: Table ${d} table data export completed ...`,r.emit({progress:k}),n.push(y)}return l.length>0?Promise.reject(new Error(l)):Promise.resolve(n)}catch(c){return Promise.reject(new Error(`GetTablesPartial: ${c.message}`))}})()}static getPartialModeData(t,e){return(0,N.A)(function*(){const r={};try{const n=yield Ke.getSynchroDate(t);if(n<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const i=yield Ke.getTablesModified(t,e,n);return i.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(r.syncDate=n,r.modTables=i,Promise.resolve(r))}catch(n){return Promise.reject(new Error(`GetPartialModeData: ${n.message}`))}})()}static getTablesNameSQL(t){return(0,N.A)(function*(){let e="SELECT name,sql FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%';";try{const r=yield ie.queryAll(t,"SELECT name,sql FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%';",[]);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`getTablesNamesSQL: ${r.message}`))}})()}static getTablesModified(t,e,r){return(0,N.A)(function*(){let n="";try{const i={};for(const s of e){let a,l="SELECT count(*) AS tcount  ";l+=`FROM ${s.name};`;let c=yield ie.queryAll(t,l,[]);if(1!=c.length){n="GetTableModified: total count not returned";break}const p=c[0].tcount;if(l="SELECT count(*) AS mcount FROM ",l+=`${s.name} WHERE last_modified > `,l+=`${r};`,c=yield ie.queryAll(t,l,[]),1!=c.length)break;const d=c[0].mcount;a=0===d?"No":p===d?"Create":"Modified",i[s.name]=a}return n.length>0?Promise.reject(new Error(n)):Promise.resolve(i)}catch(i){return Promise.reject(new Error(`GetTableModified: ${i.message}`))}})()}static getSynchroDate(t){return(0,N.A)(function*(){try{const r=yield ie.queryAll(t,"SELECT sync_date FROM sync_table WHERE id = 1;",[]);return Promise.resolve(r[0].sync_date)}catch(e){return Promise.reject(new Error(`GetSynchroDate: ${e.message}`))}})()}static getLastExportDate(t){return(0,N.A)(function*(){try{const r=yield ie.queryAll(t,"SELECT sync_date FROM sync_table WHERE id = 2;",[]);return Promise.resolve(0===r.length?-1:r[0].sync_date)}catch(e){return Promise.reject(new Error(`getLastExport: ${e.message}`))}})()}static setLastExportDate(t,e){return(0,N.A)(function*(){try{if(!(yield ie.isTableExists(t,"sync_table")))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const n=Math.round(new Date(e).getTime()/1e3);let i="";return i=(yield Ke.getLastExportDate(t))>0?`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:`INSERT INTO sync_table (sync_date) VALUES (${n});`,(yield ie.execute(t,i,!1))<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setLastExportDate failed: ${r.message}`}}})()}static delExportedRows(t){return(0,N.A)(function*(){let e;try{if(!(yield ie.isTableExists(t,"sync_table")))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(e=yield Ke.getLastExportDate(t),e<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const n=yield ie.getTableList(t);if(0===n.length)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const i of n){let s=-1;const a=`DELETE FROM ${i}\n              WHERE sql_deleted = 1 AND last_modified < ${e};`;if(s=yield ie.run(t,a,[],!0,"no"),s<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(r){return Promise.reject(new Error(`DelExportedRows failed: ${r.message}`))}})()}static modEmbeddedParentheses(t){return(0,N.A)(function*(){const e=Ke.indexOfChar(t,"("),r=Ke.indexOfChar(t,")");if(e.length!=r.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(0===e.length)return Promise.resolve(t);let n=t.substring(0,e[0]-1);for(let i=0;i<e.length;i++){let s;i<e.length-1&&e[i+1]<r[i]?(s=t.substring(e[i]-1,r[i+1]),i++):s=t.substring(e[i]-1,r[i]),n+=s.replace(/,/g,"\xa7"),i<e.length-1&&(n+=t.substring(r[i],e[i+1]-1))}return n+=t.substring(r[r.length-1],t.length),Promise.resolve(n)})()}static indexOfChar(t,e){let r=[...t];return e=e.toLowerCase(),r.reduce((n,i,s)=>i.toLowerCase()===e?[...n,s]:n,[])}}class en{static onUpgrade(t,e,r,n){return(0,N.A)(function*(){let i=-1;const s=new Int32Array(Object.keys(e).map(a=>parseInt(a))).sort();for(const a of s)if(a>r&&a<=n){const l=e[a].statements;if(0===l.length)return Promise.reject("onUpgrade: statements not given");try{yield ie.setForeignKeyConstraintsEnabled(t.mDb,!1);const c=yield ie.dbChanges(t.mDb);yield en.executeStatementsProcess(t,l),yield ie.setVersion(t.mDb,a),yield ie.setForeignKeyConstraintsEnabled(t.mDb,!0),i=(yield ie.dbChanges(t.mDb))-c}catch(c){return Promise.reject(new Error(`onUpgrade: ${c.message}`))}}return Promise.resolve(i)})()}static executeStatementsProcess(t,e){return(0,N.A)(function*(){try{yield ie.beginTransaction(t.mDb,!0),t.setIsTransActive(!0);for(const r of e)yield ie.execute(t.mDb,r,!1);return yield ie.commitTransaction(t.mDb,!0),t.setIsTransActive(!1),Promise.resolve()}catch(r){return yield ie.rollbackTransaction(t.mDb,!0),t.setIsTransActive(!1),Promise.reject(`ExecuteStatementProcess: ${r}`)}})()}}class Gn{constructor(t,e,r,n,i,s){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=t,this.store=n,this.version=e,this.mDb=null,this.vUpgDict=r,this._isDBOpen=!1,this.autoSave=i,this.wasmPath=s}open(){var t=this;return(0,N.A)(function*(){const e={locateFile:r=>`${t.wasmPath}/${r}`};return new Promise((r,n)=>{try{gs(e).then(function(){var i=(0,N.A)(function*(s){const a=yield $e.getDBFromStore(t.dbName,t.store);null!=a?t.mDb=new s.Database(a):(t.mDb=new s.Database,yield $e.setInitialDBToStore(t.dbName,t.store)),t._isDBOpen=!0;let l=yield ie.getVersion(t.mDb);if(t.version>l&&Object.keys(t.vUpgDict).length>0)try{if((yield $e.isDBInStore(t.dbName,t.store))&&(yield $e.copyDBToStore(t.dbName,`backup-${t.dbName}`,t.store),t.isBackup=!0),-1===(yield en.onUpgrade(t,t.vUpgDict,l,t.version)))try{t.isBackup&&(yield $e.restoreDBFromStore(t.dbName,"backup",t.store))}catch(d){return n(new Error(`Open: ${d.message?d.message:d}`))}t.isBackup&&(yield $e.removeDBFromStore(`backup-${t.dbName}`,t.store))}catch{try{t.isBackup&&(yield $e.restoreDBFromStore(t.dbName,"backup",t.store))}catch(p){return n(new Error(`Open: ${p.message?p.message:p}`))}}if(t.autoSave)try{yield t.saveToStore()}catch(c){return t._isDBOpen=!1,n(new Error(`Open: ${c.message?c.message:c}`))}return yield ie.setForeignKeyConstraintsEnabled(t.mDb,!0),r()});return function(s){return i.apply(this,arguments)}}())}catch(i){return t._isDBOpen=!1,n(new Error(`Open: ${i.message?i.message:i}`))}})})()}isDBOpen(){return this._isDBOpen}close(){var t=this;return(0,N.A)(function*(){if(null!=t.mDb&&t._isDBOpen)try{yield t.saveToStore(!1),t.mDb.close(),t._isDBOpen=!1}catch(e){return t._isDBOpen=!1,Promise.reject(new Error(`in close ${e.message?e.message:e}`))}return Promise.resolve()})()}saveToStore(t=!0){var e=this;return(0,N.A)(function*(){if(null!=e.mDb&&e._isDBOpen)try{yield $e.setDBToStore(e.mDb,e.dbName,e.store),t&&(yield ie.setForeignKeyConstraintsEnabled(e.mDb,!0))}catch(r){return Promise.reject(new Error(`in saveToStore ${r.message?r.message:r}`))}return Promise.resolve()})()}exportDB(){var t=this;return(0,N.A)(function*(){try{return t.mDb.export()}catch(e){return Promise.reject(new Error(`exportDB: ${e.message?e.message:e}`))}})()}getVersion(){var t=this;return(0,N.A)(function*(){if(null!=t.mDb&&t._isDBOpen)try{const e=yield ie.getVersion(t.mDb);return Promise.resolve(e)}catch(e){return t._isDBOpen=!1,Promise.reject(new Error(`in getVersion ${e.message?e.message:e}`))}})()}isDBExists(t){var e=this;return(0,N.A)(function*(){try{const r=yield $e.isDBInStore(t,e.store);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`in isDBExists ${r.message?r.message:r}`))}})()}deleteDB(t){var e=this;return(0,N.A)(function*(){try{const r=yield e.isDBExists(t);return r&&!e._isDBOpen&&(yield e.open()),yield e.close(),r&&(yield $e.removeDBFromStore(t,e.store)),Promise.resolve()}catch(r){return Promise.reject(new Error(`DeleteDB: ${r.message?r.message:r}`))}})()}beginTransaction(){var t=this;return(0,N.A)(function*(){if(!t._isDBOpen){let e=`BeginTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield ie.beginTransaction(t.mDb,!0),t.setIsTransActive(!0),0}catch(e){return Promise.reject(new Error(`BeginTransaction: ${e.message?e.message:e}`))}})()}commitTransaction(){var t=this;return(0,N.A)(function*(){if(!t._isDBOpen){let e=`CommitTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield ie.commitTransaction(t.mDb,!0),t.setIsTransActive(!1),0}catch(e){return Promise.reject(new Error(`CommitTransaction: ${e.message?e.message:e}`))}})()}rollbackTransaction(){var t=this;return(0,N.A)(function*(){if(!t._isDBOpen){let e=`RollbackTransaction: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield ie.rollbackTransaction(t.mDb,!0),t.setIsTransActive(!1),0}catch(e){return Promise.reject(new Error(`RollbackTransaction: ${e.message?e.message:e}`))}})()}isTransActive(){return this.isTransactionActive}setIsTransActive(t){this.isTransactionActive=t}executeSQL(t,e=!0){var r=this;return(0,N.A)(function*(){if(!r._isDBOpen){let i=`ExecuteSQL: Database ${r.dbName} `;return i+="not opened",Promise.reject(new Error(i))}let n=-1;try{n=yield ie.dbChanges(r.mDb),e&&!r.isTransactionActive&&(yield r.beginTransaction())}catch(i){return Promise.reject(new Error(`executeSQL: ${i.message?i.message:i}`))}try{if((yield ie.execute(r.mDb,t,!1))<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));e&&r.isTransactionActive&&(yield r.commitTransaction());const s=(yield ie.dbChanges(r.mDb))-n;return Promise.resolve(s)}catch(i){let s=`ExecuteSQL: ${i.message?i.message:i}`;try{e&&r.isTransactionActive&&(yield r.rollbackTransaction())}catch(a){s+=` : ${a.message?a.message:a}`}return Promise.reject(new Error(`ExecuteSQL: ${s}`))}finally{if(e&&(r.isTransactionActive=!1),r.autoSave&&!r.isTransactionActive)try{yield r.saveToStore()}catch(i){return r._isDBOpen=!1,Promise.reject(`ExecuteSQL: ${i.message?i.message:i}`)}}})()}execSet(t,e=!0,r="no"){var n=this;return(0,N.A)(function*(){if(!n._isDBOpen){let a=`ExecSet: Database ${n.dbName} `;return a+="not opened",Promise.reject(new Error(a))}const i={changes:-1,lastId:-1};let s=-1;try{s=yield ie.dbChanges(n.mDb),e&&!n.isTransactionActive&&(yield n.beginTransaction())}catch(a){return Promise.reject(new Error(`ExecSet: ${a.message?a.message:a}`))}try{const a=yield ie.executeSet(n.mDb,t,!1,r);let l=a.lastId;if(l<0)return Promise.reject(new Error("ExecSet: changes < 0"));e&&n.isTransactionActive&&(yield n.commitTransaction());const c=(yield ie.dbChanges(n.mDb))-s;return i.changes=c,i.lastId=l,i.values=a.values?a.values:[],Promise.resolve(i)}catch(a){let c=`ExecSet: ${a.message?a.message:a}`;try{e&&n.isTransactionActive&&(yield n.rollbackTransaction())}catch(p){c+=` : ${p.message?p.message:p}`}return Promise.reject(new Error(`ExecSet: ${c}`))}finally{if(e&&(n.isTransactionActive=!1),n.autoSave&&!n.isTransactionActive)try{yield n.saveToStore()}catch(a){const l=a.message?a.message:a;return n._isDBOpen=!1,Promise.reject(`ExecSet: ${l}`)}}})()}selectSQL(t,e){var r=this;return(0,N.A)(function*(){if(!r._isDBOpen){let n=`SelectSQL: Database ${r.dbName} `;return n+="not opened",Promise.reject(new Error(n))}try{let n=yield ie.queryAll(r.mDb,t,e);return Promise.resolve(n)}catch(n){return Promise.reject(new Error(`SelectSQL: ${n.message?n.message:n}`))}})()}runSQL(t,e,r=!0,n){var i=this;return(0,N.A)(function*(){let s=-1;if(!i._isDBOpen){let c=`RunSQL: Database ${i.dbName} `;return c+="not opened",Promise.reject(new Error(c))}const a={changes:-1,lastId:-1};let l=-1;try{l=yield ie.dbChanges(i.mDb),r&&!i.isTransactionActive&&(yield i.beginTransaction())}catch(c){return Promise.reject(new Error(`RunSQL: ${c.message?c.message:c}`))}try{const c=yield ie.run(i.mDb,t,e,!1,n);if(s=c.lastId,s<0)return Promise.reject(new Error("RunSQL: lastId < 0"));r&&i.isTransactionActive&&(yield i.commitTransaction());const p=(yield ie.dbChanges(i.mDb))-l;return a.changes=p,a.lastId=s,a.values=c.values?c.values:[],Promise.resolve(a)}catch(c){let d=`RunSQL: ${c.message?c.message:c}`;try{r&&i.isTransactionActive&&(yield i.rollbackTransaction())}catch(v){d+=` : ${v.message?v.message:v}`}return Promise.reject(new Error(`${d}`))}finally{if(r&&i.setIsTransActive(!1),i.autoSave&&!i.isTransactionActive)try{yield i.saveToStore()}catch(c){return i._isDBOpen=!1,Promise.reject(`ExecSet: ${c.message?c.message:c}`)}}})()}getTableNames(){var t=this;return(0,N.A)(function*(){if(!t._isDBOpen){let e=`GetTableNames: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=yield ie.getTableList(t.mDb);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`GetTableNames: ${e.message?e.message:e}`))}})()}isTable(t){var e=this;return(0,N.A)(function*(){if(!e._isDBOpen){let r=`isTable: Database ${e.dbName} `;return r+="not opened",Promise.reject(new Error(r))}try{const r=yield ie.isTableExists(e.mDb,t);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`IsTable: ${r.message?r.message:r}`))}})()}createSyncTable(){var t=this;return(0,N.A)(function*(){if(!t._isDBOpen){let r=`createSyncTable: Database ${t.dbName} `;return r+="not opened",Promise.reject(new Error(r))}let e=-1;try{if(yield ie.isTableExists(t.mDb,"sync_table"))return Promise.resolve(0);{const n=yield ie.isLastModified(t.mDb,t._isDBOpen),i=yield ie.isSqlDeleted(t.mDb,t._isDBOpen);if(n&&i){const s=Math.round((new Date).getTime()/1e3);let a="\n                          CREATE TABLE IF NOT EXISTS sync_table (\n                              id INTEGER PRIMARY KEY NOT NULL,\n                              sync_date INTEGER\n                              );";return a+=`INSERT INTO sync_table (sync_date) VALUES (\n                              "${s}");`,e=yield ie.execute(t.mDb,a,!1),Promise.resolve(e)}return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(r){return Promise.reject(new Error(`CreateSyncTable: ${r.message?r.message:r}`))}})()}getSyncDate(){var t=this;return(0,N.A)(function*(){if(!t._isDBOpen){let e=`getSyncDate: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!(yield ie.isTableExists(t.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const r=yield Ke.getSynchroDate(t.mDb);return Promise.resolve(r)}catch(e){return Promise.reject(new Error(`getSyncDate: ${e.message?e.message:e}`))}})()}setSyncDate(t){var e=this;return(0,N.A)(function*(){if(!e._isDBOpen){let r=`SetSyncDate: Database ${e.dbName} `;return r+="not opened",{result:!1,message:r}}try{if(!(yield ie.isTableExists(e.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const n=Math.round(new Date(t).getTime()/1e3);let i="UPDATE sync_table SET sync_date = ";return i+=`${n} WHERE id = 1;`,(yield ie.execute(e.mDb,i,!1))<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setSyncDate failed: ${r.message?r.message:r}`}}})()}importJson(t,e){var r=this;return(0,N.A)(function*(){let n=0;if(!r._isDBOpen)return Promise.reject(new Error("ImportJson: database is closed"));try{return yield ie.setForeignKeyConstraintsEnabled(r.mDb,!1),t.tables&&t.tables.length>0&&(n=yield dt.createDatabaseSchema(r,t),e.emit({progress:`Schema creation completed changes: ${n}`}),-1!=n&&(n+=(yield dt.createTablesData(r,t,e)),e.emit({progress:`Tables data creation completed changes: ${n}`}))),t.views&&t.views.length>0&&(n+=(yield dt.createViews(r,t))),yield ie.setForeignKeyConstraintsEnabled(r.mDb,!0),yield r.saveToStore(),Promise.resolve(n)}catch(i){return Promise.reject(new Error(`ImportJson: ${i.message?i.message:i}`))}})()}exportJson(t,e){var r=this;return(0,N.A)(function*(){const n={};if(n.database=r.dbName.slice(0,-9),n.version=r.version,n.encrypted=!1,n.mode=t,!r._isDBOpen)return Promise.reject(new Error("ExportJson: database is closed"));try{if(yield ie.isTableExists(r.mDb,"sync_table"))yield Ke.setLastExportDate(r.mDb,(new Date).toISOString());else if("full"!==n.mode)return Promise.reject(new Error("No sync_table available for partial mode"));const s=yield Ke.createExportObject(r.mDb,n,e);return 0===Object.keys(s).length?Promise.reject(new Error("ExportJson: return Object is empty No data to synchronize")):Ge.isJsonSQLite(s)?Promise.resolve(s):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(i){return Promise.reject(new Error(`ExportJson: ${i.message?i.message:i}`))}})()}deleteExportedRows(){var t=this;return(0,N.A)(function*(){if(!t._isDBOpen)return Promise.reject(new Error("deleteExportedRows: database is closed"));try{return yield Ke.delExportedRows(t.mDb),Promise.resolve()}catch(e){return Promise.reject(new Error(`deleteExportedRows: ${e.message?e.message:e}`))}})()}}var Vn={exports:{}};!function(h){h.exports=function e(r,n,i){function s(c,p){if(!n[c]){if(!r[c]){if(!p&&zt)return zt(c);if(a)return a(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var y=n[c]={exports:{}};r[c][0].call(y.exports,function(E){return s(r[c][1][E]||E)},y,y.exports,e,r,n,i)}return n[c].exports}for(var a=zt,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(e,r,n){(function(i){var a,s=i.MutationObserver||i.WebKitMutationObserver;if(s){var l=0,c=new s(E),p=i.document.createTextNode("");c.observe(p,{characterData:!0}),a=function(){p.data=l=++l%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var d=new i.MessageChannel;d.port1.onmessage=E,a=function(){d.port2.postMessage(0)}}else a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var T=i.document.createElement("script");T.onreadystatechange=function(){E(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},i.document.documentElement.appendChild(T)}:function(){setTimeout(E,0)};var v,y=[];function E(){v=!0;for(var T,k,D=y.length;D;){for(k=y,y=[],T=-1;++T<D;)k[T]();D=y.length}v=!1}r.exports=function b(T){1===y.push(T)&&!v&&a()}}).call(this,typeof Mt<"u"?Mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,r,n){var i=e(1);function s(){}var a={},l=["REJECTED"],c=["FULFILLED"],p=["PENDING"];function d(I){if("function"!=typeof I)throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,I!==s&&b(this,I)}function v(I,H,M){this.promise=I,"function"==typeof H&&(this.onFulfilled=H,this.callFulfilled=this.otherCallFulfilled),"function"==typeof M&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function y(I,H,M){i(function(){var J;try{J=H(M)}catch(q){return a.reject(I,q)}J===I?a.reject(I,new TypeError("Cannot resolve promise with itself")):a.resolve(I,J)})}function E(I){var H=I&&I.then;if(I&&("object"==typeof I||"function"==typeof I)&&"function"==typeof H)return function(){H.apply(I,arguments)}}function b(I,H){var M=!1;function J(S){M||(M=!0,a.reject(I,S))}function q(S){M||(M=!0,a.resolve(I,S))}var _e=T(function Q(){H(q,J)});"error"===_e.status&&J(_e.value)}function T(I,H){var M={};try{M.value=I(H),M.status="success"}catch(J){M.status="error",M.value=J}return M}r.exports=d,d.prototype.catch=function(I){return this.then(null,I)},d.prototype.then=function(I,H){if("function"!=typeof I&&this.state===c||"function"!=typeof H&&this.state===l)return this;var M=new this.constructor(s);return this.state!==p?y(M,this.state===c?I:H,this.outcome):this.queue.push(new v(M,I,H)),M},v.prototype.callFulfilled=function(I){a.resolve(this.promise,I)},v.prototype.otherCallFulfilled=function(I){y(this.promise,this.onFulfilled,I)},v.prototype.callRejected=function(I){a.reject(this.promise,I)},v.prototype.otherCallRejected=function(I){y(this.promise,this.onRejected,I)},a.resolve=function(I,H){var M=T(E,H);if("error"===M.status)return a.reject(I,M.value);var J=M.value;if(J)b(I,J);else{I.state=c,I.outcome=H;for(var q=-1,Q=I.queue.length;++q<Q;)I.queue[q].callFulfilled(H)}return I},a.reject=function(I,H){I.state=l,I.outcome=H;for(var M=-1,J=I.queue.length;++M<J;)I.queue[M].callRejected(H);return I},d.resolve=function k(I){return I instanceof this?I:a.resolve(new this(s),I)},d.reject=function D(I){var H=new this(s);return a.reject(H,I)},d.all=function C(I){var H=this;if("[object Array]"!==Object.prototype.toString.call(I))return this.reject(new TypeError("must be an array"));var M=I.length,J=!1;if(!M)return this.resolve([]);for(var q=new Array(M),Q=0,_e=-1,S=new this(s);++_e<M;)V(I[_e],_e);return S;function V(g,ee){H.resolve(g).then(function xe(ae){q[ee]=ae,++Q===M&&!J&&(J=!0,a.resolve(S,q))},function(ae){J||(J=!0,a.reject(S,ae))})}},d.race=function L(I){var H=this;if("[object Array]"!==Object.prototype.toString.call(I))return this.reject(new TypeError("must be an array"));var M=I.length,J=!1;if(!M)return this.resolve([]);for(var q=-1,Q=new this(s);++q<M;)H.resolve(I[q]).then(function(V){J||(J=!0,a.resolve(Q,V))},function(V){J||(J=!0,a.reject(Q,V))});return Q}},{1:1}],3:[function(e,r,n){(function(i){"function"!=typeof i.Promise&&(i.Promise=e(2))}).call(this,typeof Mt<"u"?Mt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,r,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};var l=function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function p(_,R){_=_||[],R=R||{};try{return new Blob(_,R)}catch(F){if("TypeError"!==F.name)throw F;for(var O=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),$=0;$<_.length;$+=1)O.append(_[$]);return O.getBlob(R.type)}}typeof Promise>"u"&&e(3);var d=Promise;function v(_,R){R&&_.then(function(A){R(null,A)},function(A){R(A)})}function y(_,R,A){"function"==typeof R&&_.then(R),"function"==typeof A&&_.catch(A)}function E(_){return"string"!=typeof _&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function b(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",k=void 0,D={},C=Object.prototype.toString,L="readonly",I="readwrite";function H(_){for(var R=_.length,A=new ArrayBuffer(R),O=new Uint8Array(A),$=0;$<R;$++)O[$]=_.charCodeAt($);return A}function J(_){return"boolean"==typeof k?d.resolve(k):function M(_){return new d(function(R){var A=_.transaction(T,I),O=p([""]);A.objectStore(T).put(O,"key"),A.onabort=function($){$.preventDefault(),$.stopPropagation(),R(!1)},A.oncomplete=function(){var $=navigator.userAgent.match(/Chrome\/(\d+)/),F=navigator.userAgent.match(/Edge\//);R(F||!$||parseInt($[1],10)>=43)}}).catch(function(){return!1})}(_).then(function(R){return k=R})}function q(_){var R=D[_.name],A={};A.promise=new d(function(O,$){A.resolve=O,A.reject=$}),R.deferredOperations.push(A),R.dbReady=R.dbReady?R.dbReady.then(function(){return A.promise}):A.promise}function Q(_){var A=D[_.name].deferredOperations.pop();if(A)return A.resolve(),A.promise}function _e(_,R){var O=D[_.name].deferredOperations.pop();if(O)return O.reject(R),O.promise}function S(_,R){return new d(function(A,O){if(D[_.name]=D[_.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},_.db){if(!R)return A(_.db);q(_),_.db.close()}var $=[_.name];R&&$.push(_.version);var F=l.open.apply(l,$);R&&(F.onupgradeneeded=function(X){var oe=F.result;try{oe.createObjectStore(_.storeName),X.oldVersion<=1&&oe.createObjectStore(T)}catch(ue){if("ConstraintError"!==ue.name)throw ue;console.warn('The database "'+_.name+'" has been upgraded from version '+X.oldVersion+" to version "+X.newVersion+', but the storage "'+_.storeName+'" already exists.')}}),F.onerror=function(X){X.preventDefault(),O(F.error)},F.onsuccess=function(){var X=F.result;X.onversionchange=function(oe){oe.target.close()},A(X),Q(_)}})}function V(_){return S(_,!1)}function g(_){return S(_,!0)}function ee(_,R){if(!_.db)return!0;var A=!_.db.objectStoreNames.contains(_.storeName),$=_.version>_.db.version;if(_.version<_.db.version&&(_.version!==R&&console.warn('The database "'+_.name+"\" can't be downgraded from version "+_.db.version+" to version "+_.version+"."),_.version=_.db.version),$||A){if(A){var F=_.db.version+1;F>_.version&&(_.version=F)}return!0}return!1}function ae(_){return p([H(atob(_.data))],{type:_.type})}function Re(_){return _&&_.__local_forage_encoded_blob}function fe(_){var R=this,A=R._initReady().then(function(){var O=D[R._dbInfo.name];if(O&&O.dbReady)return O.dbReady});return y(A,_,_),A}function W(_,R,A,O){void 0===O&&(O=1);try{var $=_.db.transaction(_.storeName,R);A(null,$)}catch(F){if(O>0&&(!_.db||"InvalidStateError"===F.name||"NotFoundError"===F.name))return d.resolve().then(function(){if(!_.db||"NotFoundError"===F.name&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),g(_)}).then(function(){return function Pe(_){q(_);for(var R=D[_.name],A=R.forages,O=0;O<A.length;O++){var $=A[O];$._dbInfo.db&&($._dbInfo.db.close(),$._dbInfo.db=null)}return _.db=null,V(_).then(function(F){return _.db=F,ee(_)?g(_):F}).then(function(F){_.db=R.db=F;for(var X=0;X<A.length;X++)A[X]._dbInfo.db=F}).catch(function(F){throw _e(_,F),F})}(_).then(function(){W(_,R,A,O-1)})}).catch(A);A(F)}}var it={_driver:"asyncStorage",_initStorage:function Ee(_){var R=this,A={db:null};if(_)for(var O in _)A[O]=_[O];var $=D[A.name];$||(D[A.name]=$={forages:[],db:null,dbReady:null,deferredOperations:[]}),$.forages.push(R),R._initReady||(R._initReady=R.ready,R.ready=fe);var F=[];function X(){return d.resolve()}for(var oe=0;oe<$.forages.length;oe++){var ue=$.forages[oe];ue!==R&&F.push(ue._initReady().catch(X))}var le=$.forages.slice(0);return d.all(F).then(function(){return A.db=$.db,V(A)}).then(function(me){return A.db=me,ee(A,R._defaultConfig.version)?g(A):me}).then(function(me){A.db=$.db=me,R._dbInfo=A;for(var we=0;we<le.length;we++){var Oe=le[we];Oe!==R&&(Oe._dbInfo.db=A.db,Oe._dbInfo.version=A.version)}})},_support:function c(){try{if(!l||!l.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),R="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!_||R)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function pe(_,R){var A=this,O=new d(function($,F){A.ready().then(function(){W(A._dbInfo,L,function(X,oe){if(X)return F(X);try{var le=oe.objectStore(A._dbInfo.storeName).openCursor(),me=1;le.onsuccess=function(){var we=le.result;if(we){var Oe=we.value;Re(Oe)&&(Oe=ae(Oe));var ze=_(Oe,we.key,me++);void 0!==ze?$(ze):we.continue()}else $()},le.onerror=function(){F(le.error)}}catch(we){F(we)}})}).catch(F)});return v(O,R),O},getItem:function be(_,R){var A=this;_=E(_);var O=new d(function($,F){A.ready().then(function(){W(A._dbInfo,L,function(X,oe){if(X)return F(X);try{var le=oe.objectStore(A._dbInfo.storeName).get(_);le.onsuccess=function(){var me=le.result;void 0===me&&(me=null),Re(me)&&(me=ae(me)),$(me)},le.onerror=function(){F(le.error)}}catch(me){F(me)}})}).catch(F)});return v(O,R),O},setItem:function We(_,R,A){var O=this;_=E(_);var $=new d(function(F,X){var oe;O.ready().then(function(){return oe=O._dbInfo,"[object Blob]"===C.call(R)?J(oe.db).then(function(ue){return ue?R:function xe(_){return new d(function(R,A){var O=new FileReader;O.onerror=A,O.onloadend=function($){var F=btoa($.target.result||"");R({__local_forage_encoded_blob:!0,data:F,type:_.type})},O.readAsBinaryString(_)})}(R)}):R}).then(function(ue){W(O._dbInfo,I,function(le,me){if(le)return X(le);try{var we=me.objectStore(O._dbInfo.storeName);null===ue&&(ue=void 0);var Oe=we.put(ue,_);me.oncomplete=function(){void 0===ue&&(ue=null),F(ue)},me.onabort=me.onerror=function(){X(Oe.error?Oe.error:Oe.transaction.error)}}catch(ze){X(ze)}})}).catch(X)});return v($,A),$},removeItem:function Xe(_,R){var A=this;_=E(_);var O=new d(function($,F){A.ready().then(function(){W(A._dbInfo,I,function(X,oe){if(X)return F(X);try{var le=oe.objectStore(A._dbInfo.storeName).delete(_);oe.oncomplete=function(){$()},oe.onerror=function(){F(le.error)},oe.onabort=function(){F(le.error?le.error:le.transaction.error)}}catch(me){F(me)}})}).catch(F)});return v(O,R),O},clear:function Ce(_){var R=this,A=new d(function(O,$){R.ready().then(function(){W(R._dbInfo,I,function(F,X){if(F)return $(F);try{var ue=X.objectStore(R._dbInfo.storeName).clear();X.oncomplete=function(){O()},X.onabort=X.onerror=function(){$(ue.error?ue.error:ue.transaction.error)}}catch(le){$(le)}})}).catch($)});return v(A,_),A},length:function Le(_){var R=this,A=new d(function(O,$){R.ready().then(function(){W(R._dbInfo,L,function(F,X){if(F)return $(F);try{var ue=X.objectStore(R._dbInfo.storeName).count();ue.onsuccess=function(){O(ue.result)},ue.onerror=function(){$(ue.error)}}catch(le){$(le)}})}).catch($)});return v(A,_),A},key:function Je(_,R){var A=this,O=new d(function($,F){_<0?$(null):A.ready().then(function(){W(A._dbInfo,L,function(X,oe){if(X)return F(X);try{var ue=oe.objectStore(A._dbInfo.storeName),le=!1,me=ue.openKeyCursor();me.onsuccess=function(){var we=me.result;we?0===_||le?$(we.key):(le=!0,we.advance(_)):$(null)},me.onerror=function(){F(me.error)}}catch(we){F(we)}})}).catch(F)});return v(O,R),O},keys:function ge(_){var R=this,A=new d(function(O,$){R.ready().then(function(){W(R._dbInfo,L,function(F,X){if(F)return $(F);try{var ue=X.objectStore(R._dbInfo.storeName).openKeyCursor(),le=[];ue.onsuccess=function(){var me=ue.result;me?(le.push(me.key),me.continue()):O(le)},ue.onerror=function(){$(ue.error)}}catch(me){$(me)}})}).catch($)});return v(A,_),A},dropInstance:function Be(_,R){R=b.apply(this,arguments);var $,A=this.config();return(_="function"!=typeof _&&_||{}).name||(_.name=_.name||A.name,_.storeName=_.storeName||A.storeName),v($=_.name?(_.name===A.name&&this._dbInfo.db?d.resolve(this._dbInfo.db):V(_).then(function(oe){var ue=D[_.name],le=ue.forages;ue.db=oe;for(var me=0;me<le.length;me++)le[me]._dbInfo.db=oe;return oe})).then(_.storeName?function(oe){if(oe.objectStoreNames.contains(_.storeName)){var ue=oe.version+1;q(_);var le=D[_.name],me=le.forages;oe.close();for(var we=0;we<me.length;we++){var Oe=me[we];Oe._dbInfo.db=null,Oe._dbInfo.version=ue}return new d(function(qe,Ye){var Ze=l.open(_.name,ue);Ze.onerror=function(ot){Ze.result.close(),Ye(ot)},Ze.onupgradeneeded=function(){Ze.result.deleteObjectStore(_.storeName)},Ze.onsuccess=function(){var ot=Ze.result;ot.close(),qe(ot)}}).then(function(qe){le.db=qe;for(var Ye=0;Ye<me.length;Ye++){var Ze=me[Ye];Ze._dbInfo.db=qe,Q(Ze._dbInfo)}}).catch(function(qe){throw(_e(_,qe)||d.resolve()).catch(function(){}),qe})}}:function(oe){q(_);var ue=D[_.name],le=ue.forages;oe.close();for(var me=0;me<le.length;me++)le[me]._dbInfo.db=null;return new d(function(ze,qe){var Ye=l.deleteDatabase(_.name);Ye.onerror=function(){var Ze=Ye.result;Ze&&Ze.close(),qe(Ye.error)},Ye.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},Ye.onsuccess=function(){var Ze=Ye.result;Ze&&Ze.close(),ze(Ze)}}).then(function(ze){ue.db=ze;for(var qe=0;qe<le.length;qe++)Q(le[qe]._dbInfo)}).catch(function(ze){throw(_e(_,ze)||d.resolve()).catch(function(){}),ze})}):d.reject("Invalid arguments"),R),$}};var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=/^~~local_forage_type~([^~]+)~/,x="__lfsc__:",re="arbf",se="blob",U="si08",Pt=Object.prototype.toString;function Ve(_){var O,F,X,oe,ue,R=.75*_.length,A=_.length,$=0;"="===_[_.length-1]&&(R--,"="===_[_.length-2]&&R--);var le=new ArrayBuffer(R),me=new Uint8Array(le);for(O=0;O<A;O+=4)F=Z.indexOf(_[O]),X=Z.indexOf(_[O+1]),oe=Z.indexOf(_[O+2]),ue=Z.indexOf(_[O+3]),me[$++]=F<<2|X>>4,me[$++]=(15&X)<<4|oe>>2,me[$++]=(3&oe)<<6|63&ue;return le}function St(_){var O,R=new Uint8Array(_),A="";for(O=0;O<R.length;O+=3)A+=Z[R[O]>>2],A+=Z[(3&R[O])<<4|R[O+1]>>4],A+=Z[(15&R[O+1])<<2|R[O+2]>>6],A+=Z[63&R[O+2]];return R.length%3==2?A=A.substring(0,A.length-1)+"=":R.length%3==1&&(A=A.substring(0,A.length-2)+"=="),A}var Nt={serialize:function qt(_,R){var A="";if(_&&(A=Pt.call(_)),_&&("[object ArrayBuffer]"===A||_.buffer&&"[object ArrayBuffer]"===Pt.call(_.buffer))){var O,$=x;_ instanceof ArrayBuffer?(O=_,$+=re):(O=_.buffer,"[object Int8Array]"===A?$+=U:"[object Uint8Array]"===A?$+="ui08":"[object Uint8ClampedArray]"===A?$+="uic8":"[object Int16Array]"===A?$+="si16":"[object Uint16Array]"===A?$+="ur16":"[object Int32Array]"===A?$+="si32":"[object Uint32Array]"===A?$+="ui32":"[object Float32Array]"===A?$+="fl32":"[object Float64Array]"===A?$+="fl64":R(new Error("Failed to get type for BinaryArray"))),R($+St(O))}else if("[object Blob]"===A){var F=new FileReader;F.onload=function(){var X="~~local_forage_type~"+_.type+"~"+St(this.result);R(x+se+X)},F.readAsArrayBuffer(_)}else try{R(JSON.stringify(_))}catch(X){console.error("Couldn't convert value into a JSON string: ",_),R(null,X)}},deserialize:function Se(_){if(_.substring(0,9)!==x)return JSON.parse(_);var O,R=_.substring(13),A=_.substring(9,13);if(A===se&&P.test(R)){var $=R.match(P);O=$[1],R=R.substring($[0].length)}var F=Ve(R);switch(A){case re:return F;case se:return p([F],{type:O});case U:return new Int8Array(F);case"ui08":return new Uint8Array(F);case"uic8":return new Uint8ClampedArray(F);case"si16":return new Int16Array(F);case"ur16":return new Uint16Array(F);case"si32":return new Int32Array(F);case"ui32":return new Uint32Array(F);case"fl32":return new Float32Array(F);case"fl64":return new Float64Array(F);default:throw new Error("Unkown type: "+A)}},stringToBuffer:Ve,bufferToString:St};function Ut(_,R,A,O){_.executeSql("CREATE TABLE IF NOT EXISTS "+R.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],A,O)}function ct(_,R,A,O,$,F){_.executeSql(A,O,$,function(X,oe){oe.code===oe.SYNTAX_ERR?X.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[R.storeName],function(ue,le){le.rows.length?F(ue,oe):Ut(ue,R,function(){ue.executeSql(A,O,$,F)},F)},F):F(X,oe)},F)}function Dt(_,R,A,O){var $=this;_=E(_);var F=new d(function(X,oe){$.ready().then(function(){void 0===R&&(R=null);var ue=R,le=$._dbInfo;le.serializer.serialize(R,function(me,we){we?oe(we):le.db.transaction(function(Oe){ct(Oe,le,"INSERT OR REPLACE INTO "+le.storeName+" (key, value) VALUES (?, ?)",[_,me],function(){X(ue)},function(ze,qe){oe(qe)})},function(Oe){if(Oe.code===Oe.QUOTA_ERR){if(O>0)return void X(Dt.apply($,[_,ue,A,O-1]));oe(Oe)}})})}).catch(oe)});return v(F,A),F}var Ct={_driver:"webSQLStorage",_initStorage:function ir(_){var R=this,A={db:null};if(_)for(var O in _)A[O]="string"!=typeof _[O]?_[O].toString():_[O];var $=new d(function(F,X){try{A.db=openDatabase(A.name,String(A.version),A.description,A.size)}catch(oe){return X(oe)}A.db.transaction(function(oe){Ut(oe,A,function(){R._dbInfo=A,F()},function(ue,le){X(le)})},X)});return A.serializer=Nt,$},_support:function m(){return"function"==typeof openDatabase}(),iterate:function ut(_,R){var A=this,O=new d(function($,F){A.ready().then(function(){var X=A._dbInfo;X.db.transaction(function(oe){ct(oe,X,"SELECT * FROM "+X.storeName,[],function(ue,le){for(var me=le.rows,we=me.length,Oe=0;Oe<we;Oe++){var ze=me.item(Oe),qe=ze.value;if(qe&&(qe=X.serializer.deserialize(qe)),void 0!==(qe=_(qe,ze.key,Oe+1)))return void $(qe)}$()},function(ue,le){F(le)})})}).catch(F)});return v(O,R),O},getItem:function sr(_,R){var A=this;_=E(_);var O=new d(function($,F){A.ready().then(function(){var X=A._dbInfo;X.db.transaction(function(oe){ct(oe,X,"SELECT * FROM "+X.storeName+" WHERE key = ? LIMIT 1",[_],function(ue,le){var me=le.rows.length?le.rows.item(0).value:null;me&&(me=X.serializer.deserialize(me)),$(me)},function(ue,le){F(le)})})}).catch(F)});return v(O,R),O},setItem:function ye(_,R,A){return Dt.apply(this,[_,R,A,1])},removeItem:function mr(_,R){var A=this;_=E(_);var O=new d(function($,F){A.ready().then(function(){var X=A._dbInfo;X.db.transaction(function(oe){ct(oe,X,"DELETE FROM "+X.storeName+" WHERE key = ?",[_],function(){$()},function(ue,le){F(le)})})}).catch(F)});return v(O,R),O},clear:function nn(_){var R=this,A=new d(function(O,$){R.ready().then(function(){var F=R._dbInfo;F.db.transaction(function(X){ct(X,F,"DELETE FROM "+F.storeName,[],function(){O()},function(oe,ue){$(ue)})})}).catch($)});return v(A,_),A},length:function sn(_){var R=this,A=new d(function(O,$){R.ready().then(function(){var F=R._dbInfo;F.db.transaction(function(X){ct(X,F,"SELECT COUNT(key) as c FROM "+F.storeName,[],function(oe,ue){var le=ue.rows.item(0).c;O(le)},function(oe,ue){$(ue)})})}).catch($)});return v(A,_),A},key:function lt(_,R){var A=this,O=new d(function($,F){A.ready().then(function(){var X=A._dbInfo;X.db.transaction(function(oe){ct(oe,X,"SELECT key FROM "+X.storeName+" WHERE id = ? LIMIT 1",[_+1],function(ue,le){var me=le.rows.length?le.rows.item(0).key:null;$(me)},function(ue,le){F(le)})})}).catch(F)});return v(O,R),O},keys:function or(_){var R=this,A=new d(function(O,$){R.ready().then(function(){var F=R._dbInfo;F.db.transaction(function(X){ct(X,F,"SELECT key FROM "+F.storeName,[],function(oe,ue){for(var le=[],me=0;me<ue.rows.length;me++)le.push(ue.rows.item(me).key);O(le)},function(oe,ue){$(ue)})})}).catch($)});return v(A,_),A},dropInstance:function Rr(_,R){R=b.apply(this,arguments);var A=this.config();(_="function"!=typeof _&&_||{}).name||(_.name=_.name||A.name,_.storeName=_.storeName||A.storeName);var $,O=this;return v($=_.name?new d(function(F){var X;X=_.name===A.name?O._dbInfo.db:openDatabase(_.name,"","",0),F(_.storeName?{db:X,storeNames:[_.storeName]}:function pr(_){return new d(function(R,A){_.transaction(function(O){O.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function($,F){for(var X=[],oe=0;oe<F.rows.length;oe++)X.push(F.rows.item(oe).name);R({db:_,storeNames:X})},function($,F){A(F)})},function(O){A(O)})})}(X))}).then(function(F){return new d(function(X,oe){F.db.transaction(function(ue){function le(ze){return new d(function(qe,Ye){ue.executeSql("DROP TABLE IF EXISTS "+ze,[],function(){qe()},function(Ze,ot){Ye(ot)})})}for(var me=[],we=0,Oe=F.storeNames.length;we<Oe;we++)me.push(le(F.storeNames[we]));d.all(me).then(function(){X()}).catch(function(ze){oe(ze)})},function(ue){oe(ue)})})}):d.reject("Invalid arguments"),R),$}};function ft(_,R){var A=_.name+"/";return _.storeName!==R.storeName&&(A+=_.storeName+"/"),A}function Wt(){return!function Nr(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}()||localStorage.length>0}var cr={_driver:"localStorageWrapper",_initStorage:function Cr(_){var A={};if(_)for(var O in _)A[O]=_[O];return A.keyPrefix=ft(_,this._defaultConfig),Wt()?(this._dbInfo=A,A.serializer=Nt,d.resolve()):d.reject()},_support:function Or(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function Br(_,R){var A=this,O=A.ready().then(function(){for(var $=A._dbInfo,F=$.keyPrefix,X=F.length,oe=localStorage.length,ue=1,le=0;le<oe;le++){var me=localStorage.key(le);if(0===me.indexOf(F)){var we=localStorage.getItem(me);if(we&&(we=$.serializer.deserialize(we)),void 0!==(we=_(we,me.substring(X),ue++)))return we}}});return v(O,R),O},getItem:function st(_,R){var A=this;_=E(_);var O=A.ready().then(function(){var $=A._dbInfo,F=localStorage.getItem($.keyPrefix+_);return F&&(F=$.serializer.deserialize(F)),F});return v(O,R),O},setItem:function ar(_,R,A){var O=this;_=E(_);var $=O.ready().then(function(){void 0===R&&(R=null);var F=R;return new d(function(X,oe){var ue=O._dbInfo;ue.serializer.serialize(R,function(le,me){if(me)oe(me);else try{localStorage.setItem(ue.keyPrefix+_,le),X(F)}catch(we){("QuotaExceededError"===we.name||"NS_ERROR_DOM_QUOTA_REACHED"===we.name)&&oe(we),oe(we)}})})});return v($,A),$},removeItem:function $r(_,R){var A=this;_=E(_);var O=A.ready().then(function(){localStorage.removeItem(A._dbInfo.keyPrefix+_)});return v(O,R),O},clear:function Fr(_){var R=this,A=R.ready().then(function(){for(var O=R._dbInfo.keyPrefix,$=localStorage.length-1;$>=0;$--){var F=localStorage.key($);0===F.indexOf(O)&&localStorage.removeItem(F)}});return v(A,_),A},length:function yr(_){var A=this.keys().then(function(O){return O.length});return v(A,_),A},key:function on(_,R){var A=this,O=A.ready().then(function(){var F,$=A._dbInfo;try{F=localStorage.key(_)}catch{F=null}return F&&(F=F.substring($.keyPrefix.length)),F});return v(O,R),O},keys:function an(_){var R=this,A=R.ready().then(function(){for(var O=R._dbInfo,$=localStorage.length,F=[],X=0;X<$;X++){var oe=localStorage.key(X);0===oe.indexOf(O.keyPrefix)&&F.push(oe.substring(O.keyPrefix.length))}return F});return v(A,_),A},dropInstance:function gt(_,R){if(R=b.apply(this,arguments),!(_="function"!=typeof _&&_||{}).name){var A=this.config();_.name=_.name||A.name,_.storeName=_.storeName||A.storeName}var $,O=this;return v($=_.name?new d(function(F){F(_.storeName?ft(_,O._defaultConfig):_.name+"/")}).then(function(F){for(var X=localStorage.length-1;X>=0;X--){var oe=localStorage.key(X);0===oe.indexOf(F)&&localStorage.removeItem(oe)}}):d.reject("Invalid arguments"),R),$}},gr=function(R,A){return R===A||"number"==typeof R&&"number"==typeof A&&isNaN(R)&&isNaN(A)},Lr=function(R,A){for(var O=R.length,$=0;$<O;){if(gr(R[$],A))return!0;$++}return!1},vr=Array.isArray||function(_){return"[object Array]"===Object.prototype.toString.call(_)},Gt={},Vt={},Ft={INDEXEDDB:it,WEBSQL:Ct,LOCALSTORAGE:cr},ur=[Ft.INDEXEDDB._driver,Ft.WEBSQL._driver,Ft.LOCALSTORAGE._driver],Xt=["dropInstance"],It=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Xt),br={description:"",driver:ur.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Mr(_,R){_[R]=function(){var A=arguments;return _.ready().then(function(){return _[R].apply(_,A)})}}function lr(){for(var _=1;_<arguments.length;_++){var R=arguments[_];if(R)for(var A in R)R.hasOwnProperty(A)&&(arguments[0][A]=vr(R[A])?R[A].slice():R[A])}return arguments[0]}var zr=function(){function _(R){for(var A in function s(_,R){if(!(_ instanceof R))throw new TypeError("Cannot call a class as a function")}(this,_),Ft)if(Ft.hasOwnProperty(A)){var O=Ft[A],$=O._driver;this[A]=$,Gt[$]||this.defineDriver(O)}this._defaultConfig=lr({},br),this._config=lr({},this._defaultConfig,R),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(A){if("object"===(typeof A>"u"?"undefined":i(A))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var O in A){if("storeName"===O&&(A[O]=A[O].replace(/\W/g,"_")),"version"===O&&"number"!=typeof A[O])return new Error("Database version must be a number.");this._config[O]=A[O]}return!("driver"in A)||!A.driver||this.setDriver(this._config.driver)}return"string"==typeof A?this._config[A]:this._config},_.prototype.defineDriver=function(A,O,$){var F=new d(function(X,oe){try{var ue=A._driver,le=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver)return void oe(le);for(var me=It.concat("_initStorage"),we=0,Oe=me.length;we<Oe;we++){var ze=me[we];if((!Lr(Xt,ze)||A[ze])&&"function"!=typeof A[ze])return void oe(le)}!function(){for(var jt=function(fr){return function(){var un=new Error("Method "+fr+" is not implemented by the current driver"),Ae=d.reject(un);return v(Ae,arguments[arguments.length-1]),Ae}},wt=0,_r=Xt.length;wt<_r;wt++){var mt=Xt[wt];A[mt]||(A[mt]=jt(mt))}}();var Ze=function(jt){Gt[ue]&&console.info("Redefining LocalForage driver: "+ue),Gt[ue]=A,Vt[ue]=jt,X()};"_support"in A?A._support&&"function"==typeof A._support?A._support().then(Ze,oe):Ze(!!A._support):Ze(!0)}catch(ot){oe(ot)}});return y(F,O,$),F},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(A,O,$){var F=Gt[A]?d.resolve(Gt[A]):d.reject(new Error("Driver not found."));return y(F,O,$),F},_.prototype.getSerializer=function(A){var O=d.resolve(Nt);return y(O,A),O},_.prototype.ready=function(A){var O=this,$=O._driverSet.then(function(){return null===O._ready&&(O._ready=O._initDriver()),O._ready});return y($,A,A),$},_.prototype.setDriver=function(A,O,$){var F=this;vr(A)||(A=[A]);var X=this._getSupportedDrivers(A);function oe(){F._config.driver=F.driver()}function ue(we){return F._extend(we),oe(),F._ready=F._initStorage(F._config),F._ready}var me=null!==this._driverSet?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=me.then(function(){var we=X[0];return F._dbInfo=null,F._ready=null,F.getDriver(we).then(function(Oe){F._driver=Oe._driver,oe(),F._wrapLibraryMethodsWithReady(),F._initDriver=function le(we){return function(){var Oe=0;return function ze(){for(;Oe<we.length;){var qe=we[Oe];return Oe++,F._dbInfo=null,F._ready=null,F.getDriver(qe).then(ue).catch(ze)}oe();var Ye=new Error("No available storage method found.");return F._driverSet=d.reject(Ye),F._driverSet}()}}(X)})}).catch(function(){oe();var we=new Error("No available storage method found.");return F._driverSet=d.reject(we),F._driverSet}),y(this._driverSet,O,$),this._driverSet},_.prototype.supports=function(A){return!!Vt[A]},_.prototype._extend=function(A){lr(this,A)},_.prototype._getSupportedDrivers=function(A){for(var O=[],$=0,F=A.length;$<F;$++){var X=A[$];this.supports(X)&&O.push(X)}return O},_.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,O=It.length;A<O;A++)Mr(this,It[A])},_.prototype.createInstance=function(A){return new _(A)},_}(),cn=new zr;r.exports=cn},{3:3}]},{},[4])(4)}(Vn);const Hn=Vn.exports;var Kn={exports:{}};!function(h){h.exports=function e(r,n,i){function s(c,p){if(!n[c]){if(!r[c]){if(!p&&zt)return zt(c);if(a)return a(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var y=n[c]={exports:{}};r[c][0].call(y.exports,function(E){return s(r[c][1][E]||E)},y,y.exports,e,r,n,i)}return n[c].exports}for(var a=zt,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(e,r,n){var i=e("./utils"),s=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(l){for(var c,p,d,y,E,b,T=[],k=0,D=l.length,C=D,L="string"!==i.getTypeOf(l);k<l.length;)C=D-k,d=L?(c=l[k++],p=k<D?l[k++]:0,k<D?l[k++]:0):(c=l.charCodeAt(k++),p=k<D?l.charCodeAt(k++):0,k<D?l.charCodeAt(k++):0),y=(3&c)<<4|p>>4,E=1<C?(15&p)<<2|d>>6:64,b=2<C?63&d:64,T.push(a.charAt(c>>2)+a.charAt(y)+a.charAt(E)+a.charAt(b));return T.join("")},n.decode=function(l){var c,p,d,v,y,E,b=0,T=0,k="data:";if(l.substr(0,5)===k)throw new Error("Invalid base64 input, it looks like a data url.");var D,C=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&C--,l.charAt(l.length-2)===a.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(D=s.uint8array?new Uint8Array(0|C):new Array(0|C);b<l.length;)c=a.indexOf(l.charAt(b++))<<2|(v=a.indexOf(l.charAt(b++)))>>4,p=(15&v)<<4|(y=a.indexOf(l.charAt(b++)))>>2,d=(3&y)<<6|(E=a.indexOf(l.charAt(b++))),D[T++]=c,64!==y&&(D[T++]=p),64!==E&&(D[T++]=d);return D}},{"./support":30,"./utils":32}],2:[function(e,r,n){var i=e("./external"),s=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function c(p,d,v,y,E){this.compressedSize=p,this.uncompressedSize=d,this.crc32=v,this.compression=y,this.compressedContent=E}c.prototype={getContentWorker:function(){var p=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return p.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(p,d,v){return p.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(v)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,r,n){var i=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,r,n){var i=e("./utils"),s=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var p=0;p<8;p++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return void 0!==a&&a.length?"string"!==i.getTypeOf(a)?function(c,p,d){var y=s,E=0+d;c^=-1;for(var b=0;b<E;b++)c=c>>>8^y[255&(c^p[b])];return~c}(0|l,a,a.length):function(c,p,d){var y=s,E=0+d;c^=-1;for(var b=0;b<E;b++)c=c>>>8^y[255&(c^p.charCodeAt(b))];return~c}(0|l,a,a.length):0}},{"./utils":32}],5:[function(e,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,r,n){var i;i=typeof Promise<"u"?Promise:e("lie"),r.exports={Promise:i}},{lie:37}],7:[function(e,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=e("pako"),a=e("./utils"),l=e("./stream/GenericWorker"),c=i?"uint8array":"array";function p(d,v){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=v,this.meta={}}n.magic="\b\0",a.inherits(p,l),p.prototype.processChunk=function(d){this.meta=d.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(c,d.data),!1)},p.prototype.flush=function(){l.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(v){d.push({data:v,meta:d.meta})}},n.compressWorker=function(d){return new p("Deflate",d)},n.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,r,n){function i(y,E){var b,T="";for(b=0;b<E;b++)T+=String.fromCharCode(255&y),y>>>=8;return T}function s(y,E,b,T,k,D){var C,L,I=y.file,H=y.compression,M=D!==c.utf8encode,J=a.transformTo("string",D(I.name)),q=a.transformTo("string",c.utf8encode(I.name)),Q=I.comment,_e=a.transformTo("string",D(Q)),S=a.transformTo("string",c.utf8encode(Q)),V=q.length!==I.name.length,g=S.length!==Q.length,ee="",xe="",ae="",Re=I.dir,fe=I.date,Pe={crc32:0,compressedSize:0,uncompressedSize:0};E&&!b||(Pe.crc32=y.crc32,Pe.compressedSize=y.compressedSize,Pe.uncompressedSize=y.uncompressedSize);var W=0;E&&(W|=8),M||!V&&!g||(W|=2048);var pe,Xe,G=0,Ee=0;Re&&(G|=16),"UNIX"===k?(Ee=798,G|=(Xe=pe=I.unixPermissions,pe||(Xe=Re?16893:33204),(65535&Xe)<<16)):(Ee=20,G|=function(pe){return 63&(pe||0)}(I.dosPermissions)),C=fe.getUTCHours(),C<<=6,C|=fe.getUTCMinutes(),C<<=5,C|=fe.getUTCSeconds()/2,L=fe.getUTCFullYear()-1980,L<<=4,L|=fe.getUTCMonth()+1,L<<=5,L|=fe.getUTCDate(),V&&(xe=i(1,1)+i(p(J),4)+q,ee+="up"+i(xe.length,2)+xe),g&&(ae=i(1,1)+i(p(_e),4)+S,ee+="uc"+i(ae.length,2)+ae);var be="";return be+="\n\0",be+=i(W,2),be+=H.magic,be+=i(C,2),be+=i(L,2),be+=i(Pe.crc32,4),be+=i(Pe.compressedSize,4),be+=i(Pe.uncompressedSize,4),be+=i(J.length,2),be+=i(ee.length,2),{fileRecord:d.LOCAL_FILE_HEADER+be+J+ee,dirRecord:d.CENTRAL_FILE_HEADER+i(Ee,2)+be+i(_e.length,2)+"\0\0\0\0"+i(G,4)+i(T,4)+J+ee+_e}}var a=e("../utils"),l=e("../stream/GenericWorker"),c=e("../utf8"),p=e("../crc32"),d=e("../signature");function v(y,E,b,T){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=b,this.encodeFileName=T,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(v,l),v.prototype.push=function(y){var E=y.meta.percent||0,b=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:b?(E+100*(b-T-1))/b:100}}))},v.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var E=this.streamFiles&&!y.file.dir;if(E){var b=s(y,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(y){this.accumulate=!1;var T,E=this.streamFiles&&!y.file.dir,b=s(y,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),E)this.push({data:(T=y,d.DATA_DESCRIPTOR+i(T.crc32,4)+i(T.compressedSize,4)+i(T.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var y=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var k,D,C,H,T=(k=this.dirRecords.length,D=this.bytesWritten-y,C=y,H=a.transformTo("string",(0,this.encodeFileName)(this.zipComment)),d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(k,2)+i(k,2)+i(D,4)+i(C,4)+i(H.length,2)+H);this.push({data:T,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(y){this._sources.push(y);var E=this;return y.on("data",function(b){E.processChunk(b)}),y.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),y.on("error",function(b){E.error(b)}),this},v.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(y){var E=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var b=0;b<E.length;b++)try{E[b].error(y)}catch{}return!0},v.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,E=0;E<y.length;E++)y[E].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,r,n){var i=e("../compressions"),s=e("./ZipFileWorker");n.generateWorker=function(a,l,c){var p=new s(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{a.forEach(function(v,y){d++;var E=function(D,C){var L=D||C,I=i[L];if(!I)throw new Error(L+" is not a valid compression method !");return I}(y.options.compression,l.compression),T=y.dir,k=y.date;y._compressWorker(E,y.options.compressionOptions||l.compressionOptions||{}).withStreamInfo("file",{name:v,dir:T,date:k,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(p)}),p.entriesCount=d}catch(v){p.error(v)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,r,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var a in this)"function"!=typeof this[a]&&(s[a]=this[a]);return s}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(s,a){return(new i).loadAsync(s,a)},i.external=e("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,r,n){var i=e("./utils"),s=e("./external"),a=e("./utf8"),l=e("./zipEntries"),c=e("./stream/Crc32Probe"),p=e("./nodejsUtils");function d(v){return new s.Promise(function(y,E){var b=v.decompressed.getContentWorker().pipe(new c);b.on("error",function(T){E(T)}).on("end",function(){b.streamInfo.crc32!==v.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(v,y){var E=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),p.isNode&&p.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",v,!0,y.optimizedBinaryString,y.base64).then(function(b){var T=new l(y);return T.load(b),T}).then(function(b){var T=[s.Promise.resolve(b)],k=b.files;if(y.checkCRC32)for(var D=0;D<k.length;D++)T.push(d(k[D]));return s.Promise.all(T)}).then(function(b){for(var T=b.shift(),k=T.files,D=0;D<k.length;D++){var C=k[D],L=C.fileNameStr,I=i.resolve(C.fileNameStr);E.file(I,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:y.createFolders}),C.dir||(E.file(I).unsafeOriginalName=L)}return T.zipComment.length&&(E.comment=T.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,r,n){var i=e("../utils"),s=e("../stream/GenericWorker");function a(l,c){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,s),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(p){c.push({data:p,meta:{percent:0}})}).on("error",function(p){c.isPaused?this.generatedError=p:c.error(p)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,r,n){var i=e("readable-stream").Readable;function s(a,l,c){i.call(this,l),this._helper=a;var p=this;a.on("data",function(d,v){p.push(d)||p._helper.pause(),c&&c(v)}).on("error",function(d){p.emit("error",d)}).on("end",function(){p.push(null)})}e("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,r,n){r.exports={isNode:!0,newBufferFrom:function(i,s){if(ne.from&&ne.from!==Uint8Array.from)return ne.from(i,s);if("number"==typeof i)throw new Error('The "data" argument must not be a number');return new ne(i,s)},allocBuffer:function(i){if(ne.alloc)return ne.alloc(i);var s=new ne(i);return s.fill(0),s},isBuffer:function(i){return ne.isBuffer(i)},isStream:function(i){return i&&"function"==typeof i.on&&"function"==typeof i.pause&&"function"==typeof i.resume}}},{}],15:[function(e,r,n){function i(I,H,M){var J,q=a.getTypeOf(H),Q=a.extend(M||{},p);Q.date=Q.date||new Date,null!==Q.compression&&(Q.compression=Q.compression.toUpperCase()),"string"==typeof Q.unixPermissions&&(Q.unixPermissions=parseInt(Q.unixPermissions,8)),Q.unixPermissions&&16384&Q.unixPermissions&&(Q.dir=!0),Q.dosPermissions&&16&Q.dosPermissions&&(Q.dir=!0),Q.dir&&(I=k(I)),Q.createFolders&&(J=T(I))&&D.call(this,J,!0),M&&void 0!==M.binary||(Q.binary=!("string"===q&&!1===Q.binary&&!1===Q.base64)),(H instanceof d&&0===H.uncompressedSize||Q.dir||!H||0===H.length)&&(Q.base64=!1,Q.binary=!0,H="",Q.compression="STORE",q="string");var S;S=H instanceof d||H instanceof l?H:E.isNode&&E.isStream(H)?new b(I,H):a.prepareContent(I,H,Q.binary,Q.optimizedBinaryString,Q.base64);var V=new v(I,S,Q);this.files[I]=V}var s=e("./utf8"),a=e("./utils"),l=e("./stream/GenericWorker"),c=e("./stream/StreamHelper"),p=e("./defaults"),d=e("./compressedObject"),v=e("./zipObject"),y=e("./generate"),E=e("./nodejsUtils"),b=e("./nodejs/NodejsStreamInputAdapter"),T=function(I){"/"===I.slice(-1)&&(I=I.substring(0,I.length-1));var H=I.lastIndexOf("/");return 0<H?I.substring(0,H):""},k=function(I){return"/"!==I.slice(-1)&&(I+="/"),I},D=function(I,H){return H=void 0!==H?H:p.createFolders,I=k(I),this.files[I]||i.call(this,I,null,{dir:!0,createFolders:H}),this.files[I]};function C(I){return"[object RegExp]"===Object.prototype.toString.call(I)}var L={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var H,M,J;for(H in this.files)J=this.files[H],(M=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&I(M,J)},filter:function(I){var H=[];return this.forEach(function(M,J){I(M,J)&&H.push(J)}),H},file:function(I,H,M){if(1!==arguments.length)return i.call(this,I=this.root+I,H,M),this;if(C(I)){var J=I;return this.filter(function(Q,_e){return!_e.dir&&J.test(Q)})}var q=this.files[this.root+I];return q&&!q.dir?q:null},folder:function(I){if(!I)return this;if(C(I))return this.filter(function(q,Q){return Q.dir&&I.test(q)});var M=D.call(this,this.root+I),J=this.clone();return J.root=M.name,J},remove:function(I){var H=this.files[I=this.root+I];if(H||("/"!==I.slice(-1)&&(I+="/"),H=this.files[I]),H&&!H.dir)delete this.files[I];else for(var M=this.filter(function(q,Q){return Q.name.slice(0,I.length)===I}),J=0;J<M.length;J++)delete this.files[M[J].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var H,M={};try{if((M=a.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),"binarystring"===M.type&&(M.type="string"),!M.type)throw new Error("No output type specified.");a.checkSupport(M.type),"darwin"!==M.platform&&"freebsd"!==M.platform&&"linux"!==M.platform&&"sunos"!==M.platform||(M.platform="UNIX"),"win32"===M.platform&&(M.platform="DOS"),H=y.generateWorker(this,M,M.comment||this.comment||"")}catch(q){(H=new l("error")).error(q)}return new c(H,M.type||"string",M.mimeType)},generateAsync:function(I,H){return this.generateInternalStream(I).accumulate(H)},generateNodeStream:function(I,H){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(H)}};r.exports=L},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,r,n){r.exports=e("stream")},{stream:void 0}],17:[function(e,r,n){var i=e("./DataReader");function s(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}e("../utils").inherits(s,i),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),p=a.charCodeAt(2),d=a.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===l&&this.data[v+1]===c&&this.data[v+2]===p&&this.data[v+3]===d)return v-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),p=a.charCodeAt(2),d=a.charCodeAt(3),v=this.readData(4);return l===v[0]&&c===v[1]&&p===v[2]&&d===v[3]},s.prototype.readData=function(a){if(this.checkOffset(a),0===a)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,r,n){var i=e("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=s},{"../utils":32}],19:[function(e,r,n){var i=e("./Uint8ArrayReader");function s(a){i.call(this,a)}e("../utils").inherits(s,i),s.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,r,n){var i=e("./DataReader");function s(a){i.call(this,a)}e("../utils").inherits(s,i),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,r,n){var i=e("./ArrayReader");function s(a){i.call(this,a)}e("../utils").inherits(s,i),s.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,r,n){var i=e("../utils"),s=e("../support"),a=e("./ArrayReader"),l=e("./StringReader"),c=e("./NodeBufferReader"),p=e("./Uint8ArrayReader");r.exports=function(d){var v=i.getTypeOf(d);return i.checkSupport(v),"string"!==v||s.uint8array?"nodebuffer"===v?new c(d):s.uint8array?new p(i.transformTo("uint8array",d)):new a(i.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,r,n){n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,r,n){var i=e("./GenericWorker"),s=e("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,r,n){var i=e("./GenericWorker"),s=e("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,r,n){var i=e("../utils"),s=e("./GenericWorker");function a(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,s),a.prototype.processChunk=function(l){l&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+l.data.length),s.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,r,n){var i=e("../utils"),s=e("./GenericWorker");function a(l){s.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(p){c.dataIsReady=!0,c.data=p,c.max=p&&p.length||0,c.type=i.getTypeOf(p),c.isPaused||c._tickAndRepeat()},function(p){c.error(p)})}i.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,r,n){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(l){a.processChunk(l)}),s.on("end",function(){a.end()}),s.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(e,r,n){var i=e("../utils"),s=e("./ConvertWorker"),a=e("./GenericWorker"),l=e("../base64"),c=e("../support"),p=e("../external"),d=null;if(c.nodestream)try{d=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(E,b,T){var k=b;switch(b){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=b,this._mimeType=T,i.checkSupport(k),this._worker=E.pipe(new s(k)),E.lock()}catch(D){this._worker=new a("error"),this._worker.error(D)}}y.prototype={accumulate:function(E){return function v(E,b){return new p.Promise(function(T,k){var D=[],C=E._internalType,L=E._outputType,I=E._mimeType;E.on("data",function(H,M){D.push(H),b&&b(M)}).on("error",function(H){D=[],k(H)}).on("end",function(){try{var H=function(M,J,q){switch(M){case"blob":return i.newBlob(i.transformTo("arraybuffer",J),q);case"base64":return l.encode(J);default:return i.transformTo(M,J)}}(L,function(M,J){var q,Q=0,_e=null,S=0;for(q=0;q<J.length;q++)S+=J[q].length;switch(M){case"string":return J.join("");case"array":return Array.prototype.concat.apply([],J);case"uint8array":for(_e=new Uint8Array(S),q=0;q<J.length;q++)_e.set(J[q],Q),Q+=J[q].length;return _e;case"nodebuffer":return ne.concat(J);default:throw new Error("concat : unsupported type '"+M+"'")}}(C,D),I);T(H)}catch(M){k(M)}D=[]}).resume()})}(this,E)},on:function(E,b){var T=this;return this._worker.on(E,"data"===E?function(k){b.call(T,k.data,k.meta)}:function(){i.delay(b,arguments,T)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:"nodebuffer"!==this._outputType},E)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=!0,n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),n.blob=0===s.getBlob("application/zip").size}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,r,n){for(var i=e("./utils"),s=e("./support"),a=e("./nodejsUtils"),l=e("./stream/GenericWorker"),c=new Array(256),p=0;p<256;p++)c[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function v(){l.call(this,"utf-8 encode")}c[254]=c[254]=1,n.utf8encode=function(y){return s.nodebuffer?a.newBufferFrom(y,"utf-8"):function(E){var b,T,k,D,C,L=E.length,I=0;for(D=0;D<L;D++)55296==(64512&(T=E.charCodeAt(D)))&&D+1<L&&56320==(64512&(k=E.charCodeAt(D+1)))&&(T=65536+(T-55296<<10)+(k-56320),D++),I+=T<128?1:T<2048?2:T<65536?3:4;for(b=s.uint8array?new Uint8Array(I):new Array(I),D=C=0;C<I;D++)55296==(64512&(T=E.charCodeAt(D)))&&D+1<L&&56320==(64512&(k=E.charCodeAt(D+1)))&&(T=65536+(T-55296<<10)+(k-56320),D++),T<128?b[C++]=T:(T<2048?b[C++]=192|T>>>6:(T<65536?b[C++]=224|T>>>12:(b[C++]=240|T>>>18,b[C++]=128|T>>>12&63),b[C++]=128|T>>>6&63),b[C++]=128|63&T);return b}(y)},n.utf8decode=function(y){return s.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(E){var b,T,k,D,C=E.length,L=new Array(2*C);for(b=T=0;b<C;)if((k=E[b++])<128)L[T++]=k;else if(4<(D=c[k]))L[T++]=65533,b+=D-1;else{for(k&=2===D?31:3===D?15:7;1<D&&b<C;)k=k<<6|63&E[b++],D--;1<D?L[T++]=65533:k<65536?L[T++]=k:(L[T++]=55296|(k-=65536)>>10&1023,L[T++]=56320|1023&k)}return L.length!==T&&(L.subarray?L=L.subarray(0,T):L.length=T),i.applyFromCharCode(L)}(y=i.transformTo(s.uint8array?"uint8array":"array",y))},i.inherits(d,l),d.prototype.processChunk=function(y){var E=i.transformTo(s.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var b=E;(E=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),E.set(b,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var T=function(D,C){var L;for((C=C||D.length)>D.length&&(C=D.length),L=C-1;0<=L&&128==(192&D[L]);)L--;return L<0||0===L?C:L+c[D[L]]>C?L:C}(E),k=E;T!==E.length&&(s.uint8array?(k=E.subarray(0,T),this.leftOver=E.subarray(T,E.length)):(k=E.slice(0,T),this.leftOver=E.slice(T,E.length))),this.push({data:n.utf8decode(k),meta:y.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=d,i.inherits(v,l),v.prototype.processChunk=function(y){this.push({data:n.utf8encode(y.data),meta:y.meta})},n.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,r,n){var i=e("./support"),s=e("./base64"),a=e("./nodejsUtils"),l=e("./external");function c(b){return b}function p(b,T){for(var k=0;k<b.length;++k)T[k]=255&b.charCodeAt(k);return T}e("setimmediate"),n.newBlob=function(b,T){n.checkSupport("blob");try{return new Blob([b],{type:T})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(b),k.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(b,T,k){var D=[],C=0,L=b.length;if(L<=k)return String.fromCharCode.apply(null,b);for(;C<L;)D.push(String.fromCharCode.apply(null,"array"===T||"nodebuffer"===T?b.slice(C,Math.min(C+k,L)):b.subarray(C,Math.min(C+k,L)))),C+=k;return D.join("")},stringifyByChar:function(b){for(var T="",k=0;k<b.length;k++)T+=String.fromCharCode(b[k]);return T},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch{return!1}}()}};function v(b){var T=65536,k=n.getTypeOf(b),D=!0;if("uint8array"===k?D=d.applyCanBeUsed.uint8array:"nodebuffer"===k&&(D=d.applyCanBeUsed.nodebuffer),D)for(;1<T;)try{return d.stringifyByChunk(b,k,T)}catch{T=Math.floor(T/2)}return d.stringifyByChar(b)}function y(b,T){for(var k=0;k<b.length;k++)T[k]=b[k];return T}n.applyFromCharCode=v;var E={};E.string={string:c,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return E.string.uint8array(b).buffer},uint8array:function(b){return p(b,new Uint8Array(b.length))},nodebuffer:function(b){return p(b,a.allocBuffer(b.length))}},E.array={string:v,array:c,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return a.newBufferFrom(b)}},E.arraybuffer={string:function(b){return v(new Uint8Array(b))},array:function(b){return y(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:c,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return a.newBufferFrom(new Uint8Array(b))}},E.uint8array={string:v,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:c,nodebuffer:function(b){return a.newBufferFrom(b)}},E.nodebuffer={string:v,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return E.nodebuffer.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:c},n.transformTo=function(b,T){if(T=T||"",!b)return T;n.checkSupport(b);var k=n.getTypeOf(T);return E[k][b](T)},n.resolve=function(b){for(var T=b.split("/"),k=[],D=0;D<T.length;D++){var C=T[D];"."===C||""===C&&0!==D&&D!==T.length-1||(".."===C?k.pop():k.push(C))}return k.join("/")},n.getTypeOf=function(b){return"string"==typeof b?"string":"[object Array]"===Object.prototype.toString.call(b)?"array":i.nodebuffer&&a.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var T,k,D="";for(k=0;k<(b||"").length;k++)D+="\\x"+((T=b.charCodeAt(k))<16?"0":"")+T.toString(16).toUpperCase();return D},n.delay=function(b,T,k){setImmediate(function(){b.apply(k||null,T||[])})},n.inherits=function(b,T){function k(){}k.prototype=T.prototype,b.prototype=new k},n.extend=function(){var b,T,k={};for(b=0;b<arguments.length;b++)for(T in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],T)&&void 0===k[T]&&(k[T]=arguments[b][T]);return k},n.prepareContent=function(b,T,k,D,C){return l.Promise.resolve(T).then(function(L){return i.blob&&(L instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(L)))&&typeof FileReader<"u"?new l.Promise(function(I,H){var M=new FileReader;M.onload=function(J){I(J.target.result)},M.onerror=function(J){H(J.target.error)},M.readAsArrayBuffer(L)}):L}).then(function(L){var H,I=n.getTypeOf(L);return I?("arraybuffer"===I?L=n.transformTo("uint8array",L):"string"===I&&(C?L=s.decode(L):k&&!0!==D&&(L=p(H=L,i.uint8array?new Uint8Array(H.length):new Array(H.length)))),L):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,r,n){var i=e("./reader/readerFor"),s=e("./utils"),a=e("./signature"),l=e("./zipEntry"),c=e("./support");function p(d){this.files=[],this.loadOptions=d}p.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(d)+")")}},isSignature:function(d,v){var y=this.reader.index;this.reader.setIndex(d);var E=this.reader.readString(4)===v;return this.reader.setIndex(y),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),y=s.transformTo(c.uint8array?"uint8array":"array",d);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,v,y,E=this.zip64EndOfCentralSize-44;0<E;)d=this.reader.readInt(2),v=this.reader.readInt(4),y=this.reader.readData(v),this.zip64ExtensibleData[d]={id:d,length:v,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,v;for(d=0;d<this.files.length;d++)this.reader.setIndex((v=this.files[d]).localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var v=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var E=v-y;if(0<E)this.isSignature(v,a.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(d){this.reader=i(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,r,n){var i=e("./reader/readerFor"),s=e("./utils"),a=e("./compressedObject"),l=e("./crc32"),c=e("./utf8"),p=e("./compressions"),d=e("./support");function v(y,E){this.options=y,this.loadOptions=E}v.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(y){var E,b;if(y.skip(22),this.fileNameLength=y.readInt(2),b=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(b),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(E=function(T){for(var k in p)if(Object.prototype.hasOwnProperty.call(p,k)&&p[k].magic===T)return p[k];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,E,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var E=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(E),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==y&&(this.dosPermissions=63&this.externalFileAttributes),3==y&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var E,b,T,k=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<k;)E=y.readInt(2),b=y.readInt(2),T=y.readData(b),this.extraFields[E]={id:E,length:b,value:T};y.setIndex(k)},handleUTF8:function(){var y=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(null!==E)this.fileNameStr=E;else{var b=s.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var T=this.findExtraFieldUnicodeComment();if(null!==T)this.fileCommentStr=T;else{var k=s.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var E=i(y.value);return 1!==E.readInt(1)||l(this.fileName)!==E.readInt(4)?null:c.utf8decode(E.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var E=i(y.value);return 1!==E.readInt(1)||l(this.fileComment)!==E.readInt(4)?null:c.utf8decode(E.readData(y.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,r,n){function i(E,b,T){this.name=E,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=b,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var s=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),l=e("./utf8"),c=e("./compressedObject"),p=e("./stream/GenericWorker");i.prototype={internalStream:function(E){var b=null,T="string";try{if(!E)throw new Error("No output type specified.");var k="string"===(T=E.toLowerCase())||"text"===T;"binarystring"!==T&&"text"!==T||(T="string"),b=this._decompressWorker();var D=!this._dataBinary;D&&!k&&(b=b.pipe(new l.Utf8EncodeWorker)),!D&&k&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(C){(b=new p("error")).error(C)}return new s(b,T,"")},async:function(E,b){return this.internalStream(E).accumulate(b)},nodeStream:function(E,b){return this.internalStream(E||"nodebuffer").toNodejsStream(b)},_compressWorker:function(E,b){if(this._data instanceof c&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(T,E,b)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof p?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<d.length;y++)i.prototype[d[y]]=v;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,r,n){(function(i){var s,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,p=new l(E),d=i.document.createTextNode("");p.observe(d,{characterData:!0}),s=function(){d.data=c=++c%2}}else if(i.setImmediate||void 0===i.MessageChannel)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){E(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(E,0)};else{var v=new i.MessageChannel;v.port1.onmessage=E,s=function(){v.port2.postMessage(0)}}var y=[];function E(){var b,T;a=!0;for(var k=y.length;k;){for(T=y,y=[],b=-1;++b<k;)T[b]();k=y.length}a=!1}r.exports=function(b){1!==y.push(b)||a||s()}}).call(this,typeof Mt<"u"?Mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,r,n){var i=e("immediate");function s(){}var a={},l=["REJECTED"],c=["FULFILLED"],p=["PENDING"];function d(k){if("function"!=typeof k)throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,k!==s&&b(this,k)}function v(k,D,C){this.promise=k,"function"==typeof D&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),"function"==typeof C&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function y(k,D,C){i(function(){var L;try{L=D(C)}catch(I){return a.reject(k,I)}L===k?a.reject(k,new TypeError("Cannot resolve promise with itself")):a.resolve(k,L)})}function E(k){var D=k&&k.then;if(k&&("object"==typeof k||"function"==typeof k)&&"function"==typeof D)return function(){D.apply(k,arguments)}}function b(k,D){var C=!1;function L(M){C||(C=!0,a.reject(k,M))}function I(M){C||(C=!0,a.resolve(k,M))}var H=T(function(){D(I,L)});"error"===H.status&&L(H.value)}function T(k,D){var C={};try{C.value=k(D),C.status="success"}catch(L){C.status="error",C.value=L}return C}(r.exports=d).prototype.finally=function(k){if("function"!=typeof k)return this;var D=this.constructor;return this.then(function(C){return D.resolve(k()).then(function(){return C})},function(C){return D.resolve(k()).then(function(){throw C})})},d.prototype.catch=function(k){return this.then(null,k)},d.prototype.then=function(k,D){if("function"!=typeof k&&this.state===c||"function"!=typeof D&&this.state===l)return this;var C=new this.constructor(s);return this.state!==p?y(C,this.state===c?k:D,this.outcome):this.queue.push(new v(C,k,D)),C},v.prototype.callFulfilled=function(k){a.resolve(this.promise,k)},v.prototype.otherCallFulfilled=function(k){y(this.promise,this.onFulfilled,k)},v.prototype.callRejected=function(k){a.reject(this.promise,k)},v.prototype.otherCallRejected=function(k){y(this.promise,this.onRejected,k)},a.resolve=function(k,D){var C=T(E,D);if("error"===C.status)return a.reject(k,C.value);var L=C.value;if(L)b(k,L);else{k.state=c,k.outcome=D;for(var I=-1,H=k.queue.length;++I<H;)k.queue[I].callFulfilled(D)}return k},a.reject=function(k,D){k.state=l,k.outcome=D;for(var C=-1,L=k.queue.length;++C<L;)k.queue[C].callRejected(D);return k},d.resolve=function(k){return k instanceof this?k:a.resolve(new this(s),k)},d.reject=function(k){var D=new this(s);return a.reject(D,k)},d.all=function(k){var D=this;if("[object Array]"!==Object.prototype.toString.call(k))return this.reject(new TypeError("must be an array"));var C=k.length,L=!1;if(!C)return this.resolve([]);for(var I=new Array(C),H=0,M=-1,J=new this(s);++M<C;)q(k[M],M);return J;function q(Q,_e){D.resolve(Q).then(function(S){I[_e]=S,++H!==C||L||(L=!0,a.resolve(J,I))},function(S){L||(L=!0,a.reject(J,S))})}},d.race=function(k){if("[object Array]"!==Object.prototype.toString.call(k))return this.reject(new TypeError("must be an array"));var C=k.length,L=!1;if(!C)return this.resolve([]);for(var I=-1,H=new this(s);++I<C;)this.resolve(k[I]).then(function(J){L||(L=!0,a.resolve(H,J))},function(J){L||(L=!0,a.reject(H,J))});return H}},{immediate:36}],38:[function(e,r,n){var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,r,n){var i=e("./zlib/deflate"),s=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/messages"),c=e("./zlib/zstream"),p=Object.prototype.toString,d=0,v=-1,y=0,E=8;function b(k){if(!(this instanceof b))return new b(k);this.options=s.assign({level:v,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},k||{});var D=this.options;D.raw&&0<D.windowBits?D.windowBits=-D.windowBits:D.gzip&&0<D.windowBits&&D.windowBits<16&&(D.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var C=i.deflateInit2(this.strm,D.level,D.method,D.windowBits,D.memLevel,D.strategy);if(C!==d)throw new Error(l[C]);if(D.header&&i.deflateSetHeader(this.strm,D.header),D.dictionary){var L;if(L="string"==typeof D.dictionary?a.string2buf(D.dictionary):"[object ArrayBuffer]"===p.call(D.dictionary)?new Uint8Array(D.dictionary):D.dictionary,(C=i.deflateSetDictionary(this.strm,L))!==d)throw new Error(l[C]);this._dict_set=!0}}function T(k,D){var C=new b(D);if(C.push(k,!0),C.err)throw C.msg||l[C.err];return C.result}b.prototype.push=function(k,D){var C,L,I=this.strm,H=this.options.chunkSize;if(this.ended)return!1;L=D===~~D?D:!0===D?4:0,I.input="string"==typeof k?a.string2buf(k):"[object ArrayBuffer]"===p.call(k)?new Uint8Array(k):k,I.next_in=0,I.avail_in=I.input.length;do{if(0===I.avail_out&&(I.output=new s.Buf8(H),I.next_out=0,I.avail_out=H),1!==(C=i.deflate(I,L))&&C!==d)return this.onEnd(C),!(this.ended=!0);0!==I.avail_out&&(0!==I.avail_in||4!==L&&2!==L)||this.onData("string"===this.options.to?a.buf2binstring(s.shrinkBuf(I.output,I.next_out)):s.shrinkBuf(I.output,I.next_out))}while((0<I.avail_in||0===I.avail_out)&&1!==C);return 4===L?(C=i.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===d):2!==L||(this.onEnd(d),!(I.avail_out=0))},b.prototype.onData=function(k){this.chunks.push(k)},b.prototype.onEnd=function(k){k===d&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},n.Deflate=b,n.deflate=T,n.deflateRaw=function(k,D){return(D=D||{}).raw=!0,T(k,D)},n.gzip=function(k,D){return(D=D||{}).gzip=!0,T(k,D)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,r,n){var i=e("./zlib/inflate"),s=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/constants"),c=e("./zlib/messages"),p=e("./zlib/zstream"),d=e("./zlib/gzheader"),v=Object.prototype.toString;function y(b){if(!(this instanceof y))return new y(b);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},b||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,0===T.windowBits&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||b&&b.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var k=i.inflateInit2(this.strm,T.windowBits);if(k!==l.Z_OK)throw new Error(c[k]);this.header=new d,i.inflateGetHeader(this.strm,this.header)}function E(b,T){var k=new y(T);if(k.push(b,!0),k.err)throw k.msg||c[k.err];return k.result}y.prototype.push=function(b,T){var k,D,C,L,I,H,M=this.strm,J=this.options.chunkSize,q=this.options.dictionary,Q=!1;if(this.ended)return!1;D=T===~~T?T:!0===T?l.Z_FINISH:l.Z_NO_FLUSH,M.input="string"==typeof b?a.binstring2buf(b):"[object ArrayBuffer]"===v.call(b)?new Uint8Array(b):b,M.next_in=0,M.avail_in=M.input.length;do{if(0===M.avail_out&&(M.output=new s.Buf8(J),M.next_out=0,M.avail_out=J),(k=i.inflate(M,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&q&&(H="string"==typeof q?a.string2buf(q):"[object ArrayBuffer]"===v.call(q)?new Uint8Array(q):q,k=i.inflateSetDictionary(this.strm,H)),k===l.Z_BUF_ERROR&&!0===Q&&(k=l.Z_OK,Q=!1),k!==l.Z_STREAM_END&&k!==l.Z_OK)return this.onEnd(k),!(this.ended=!0);M.next_out&&(0!==M.avail_out&&k!==l.Z_STREAM_END&&(0!==M.avail_in||D!==l.Z_FINISH&&D!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(C=a.utf8border(M.output,M.next_out),L=M.next_out-C,I=a.buf2string(M.output,C),M.next_out=L,M.avail_out=J-L,L&&s.arraySet(M.output,M.output,C,L,0),this.onData(I)):this.onData(s.shrinkBuf(M.output,M.next_out)))),0===M.avail_in&&0===M.avail_out&&(Q=!0)}while((0<M.avail_in||0===M.avail_out)&&k!==l.Z_STREAM_END);return k===l.Z_STREAM_END&&(D=l.Z_FINISH),D===l.Z_FINISH?(k=i.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===l.Z_OK):D!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(M.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===l.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=y,n.inflate=E,n.inflateRaw=function(b,T){return(T=T||{}).raw=!0,E(b,T)},n.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var p=c.shift();if(p){if("object"!=typeof p)throw new TypeError(p+"must be non-object");for(var d in p)p.hasOwnProperty(d)&&(l[d]=p[d])}}return l},n.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var s={arraySet:function(l,c,p,d,v){if(c.subarray&&l.subarray)l.set(c.subarray(p,p+d),v);else for(var y=0;y<d;y++)l[v+y]=c[p+y]},flattenChunks:function(l){var c,p,d,v,y,E;for(c=d=0,p=l.length;c<p;c++)d+=l[c].length;for(E=new Uint8Array(d),c=v=0,p=l.length;c<p;c++)E.set(y=l[c],v),v+=y.length;return E}},a={arraySet:function(l,c,p,d,v){for(var y=0;y<d;y++)l[v+y]=c[p+y]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,s)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(i)},{}],42:[function(e,r,n){var i=e("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function p(d,v){if(v<65537&&(d.subarray&&a||!d.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(d,v));for(var y="",E=0;E<v;E++)y+=String.fromCharCode(d[E]);return y}l[254]=l[254]=1,n.string2buf=function(d){var v,y,E,b,T,k=d.length,D=0;for(b=0;b<k;b++)55296==(64512&(y=d.charCodeAt(b)))&&b+1<k&&56320==(64512&(E=d.charCodeAt(b+1)))&&(y=65536+(y-55296<<10)+(E-56320),b++),D+=y<128?1:y<2048?2:y<65536?3:4;for(v=new i.Buf8(D),b=T=0;T<D;b++)55296==(64512&(y=d.charCodeAt(b)))&&b+1<k&&56320==(64512&(E=d.charCodeAt(b+1)))&&(y=65536+(y-55296<<10)+(E-56320),b++),y<128?v[T++]=y:(y<2048?v[T++]=192|y>>>6:(y<65536?v[T++]=224|y>>>12:(v[T++]=240|y>>>18,v[T++]=128|y>>>12&63),v[T++]=128|y>>>6&63),v[T++]=128|63&y);return v},n.buf2binstring=function(d){return p(d,d.length)},n.binstring2buf=function(d){for(var v=new i.Buf8(d.length),y=0,E=v.length;y<E;y++)v[y]=d.charCodeAt(y);return v},n.buf2string=function(d,v){var y,E,b,T,k=v||d.length,D=new Array(2*k);for(y=E=0;y<k;)if((b=d[y++])<128)D[E++]=b;else if(4<(T=l[b]))D[E++]=65533,y+=T-1;else{for(b&=2===T?31:3===T?15:7;1<T&&y<k;)b=b<<6|63&d[y++],T--;1<T?D[E++]=65533:b<65536?D[E++]=b:(D[E++]=55296|(b-=65536)>>10&1023,D[E++]=56320|1023&b)}return p(D,E)},n.utf8border=function(d,v){var y;for((v=v||d.length)>d.length&&(v=d.length),y=v-1;0<=y&&128==(192&d[y]);)y--;return y<0||0===y?v:y+l[d[y]]>v?y:v}},{"./common":41}],43:[function(e,r,n){r.exports=function(i,s,a,l){for(var c=65535&i,p=i>>>16&65535,d=0;0!==a;){for(a-=d=2e3<a?2e3:a;p=p+(c=c+s[l++]|0)|0,--d;);c%=65521,p%=65521}return c|p<<16}},{}],44:[function(e,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,r,n){var i=function(){for(var s,a=[],l=0;l<256;l++){s=l;for(var c=0;c<8;c++)s=1&s?3988292384^s>>>1:s>>>1;a[l]=s}return a}();r.exports=function(s,a,l,c){var p=i,d=c+l;s^=-1;for(var v=c;v<d;v++)s=s>>>8^p[255&(s^a[v])];return~s}},{}],46:[function(e,r,n){var i,s=e("../utils/common"),a=e("./trees"),l=e("./adler32"),c=e("./crc32"),p=e("./messages"),d=0,y=0,E=-2,k=2,D=8,L=286,I=30,H=19,M=2*L+1,J=15,q=3,Q=258,_e=Q+q+1,S=42,V=113;function Re(m,Z){return m.msg=p[Z],Z}function fe(m){return(m<<1)-(4<m?9:0)}function Pe(m){for(var Z=m.length;0<=--Z;)m[Z]=0}function W(m){var Z=m.state,Y=Z.pending;Y>m.avail_out&&(Y=m.avail_out),0!==Y&&(s.arraySet(m.output,Z.pending_buf,Z.pending_out,Y,m.next_out),m.next_out+=Y,Z.pending_out+=Y,m.total_out+=Y,m.avail_out-=Y,Z.pending-=Y,0===Z.pending&&(Z.pending_out=0))}function G(m,Z){a._tr_flush_block(m,0<=m.block_start?m.block_start:-1,m.strstart-m.block_start,Z),m.block_start=m.strstart,W(m.strm)}function Ee(m,Z){m.pending_buf[m.pending++]=Z}function be(m,Z){m.pending_buf[m.pending++]=Z>>>8&255,m.pending_buf[m.pending++]=255&Z}function pe(m,Z){var Y,P,x=m.max_chain_length,B=m.strstart,re=m.prev_length,se=m.nice_match,U=m.strstart>m.w_size-_e?m.strstart-(m.w_size-_e):0,de=m.window,ve=m.w_mask,he=m.prev,ke=m.strstart+Q,Me=de[B+re-1],De=de[B+re];m.prev_length>=m.good_match&&(x>>=2),se>m.lookahead&&(se=m.lookahead);do{if(de[(Y=Z)+re]===De&&de[Y+re-1]===Me&&de[Y]===de[B]&&de[++Y]===de[B+1]){B+=2,Y++;do{}while(de[++B]===de[++Y]&&de[++B]===de[++Y]&&de[++B]===de[++Y]&&de[++B]===de[++Y]&&de[++B]===de[++Y]&&de[++B]===de[++Y]&&de[++B]===de[++Y]&&de[++B]===de[++Y]&&B<ke);if(P=Q-(ke-B),B=ke-Q,re<P){if(m.match_start=Z,se<=(re=P))break;Me=de[B+re-1],De=de[B+re]}}}while((Z=he[Z&ve])>U&&0!=--x);return re<=m.lookahead?re:m.lookahead}function We(m){var Z,Y,P,x,B,re,se,U,de,ve,he=m.w_size;do{if(x=m.window_size-m.lookahead-m.strstart,m.strstart>=he+(he-_e)){for(s.arraySet(m.window,m.window,he,he,0),m.match_start-=he,m.strstart-=he,m.block_start-=he,Z=Y=m.hash_size;P=m.head[--Z],m.head[Z]=he<=P?P-he:0,--Y;);for(Z=Y=he;P=m.prev[--Z],m.prev[Z]=he<=P?P-he:0,--Y;);x+=he}if(0===m.strm.avail_in)break;if(se=m.window,U=m.strstart+m.lookahead,ve=void 0,(de=x)<(ve=(re=m.strm).avail_in)&&(ve=de),Y=0===ve?0:(re.avail_in-=ve,s.arraySet(se,re.input,re.next_in,ve,U),1===re.state.wrap?re.adler=l(re.adler,se,ve,U):2===re.state.wrap&&(re.adler=c(re.adler,se,ve,U)),re.next_in+=ve,re.total_in+=ve,ve),m.lookahead+=Y,m.lookahead+m.insert>=q)for(m.ins_h=m.window[B=m.strstart-m.insert],m.ins_h=(m.ins_h<<m.hash_shift^m.window[B+1])&m.hash_mask;m.insert&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[B+q-1])&m.hash_mask,m.prev[B&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=B,B++,m.insert--,!(m.lookahead+m.insert<q)););}while(m.lookahead<_e&&0!==m.strm.avail_in)}function Xe(m,Z){for(var Y,P;;){if(m.lookahead<_e){if(We(m),m.lookahead<_e&&Z===d)return 1;if(0===m.lookahead)break}if(Y=0,m.lookahead>=q&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+q-1])&m.hash_mask,Y=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),0!==Y&&m.strstart-Y<=m.w_size-_e&&(m.match_length=pe(m,Y)),m.match_length>=q)if(P=a._tr_tally(m,m.strstart-m.match_start,m.match_length-q),m.lookahead-=m.match_length,m.match_length<=m.max_lazy_match&&m.lookahead>=q){for(m.match_length--;m.strstart++,m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+q-1])&m.hash_mask,Y=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart,0!=--m.match_length;);m.strstart++}else m.strstart+=m.match_length,m.match_length=0,m.ins_h=m.window[m.strstart],m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+1])&m.hash_mask;else P=a._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++;if(P&&(G(m,!1),0===m.strm.avail_out))return 1}return m.insert=m.strstart<q-1?m.strstart:q-1,4===Z?(G(m,!0),0===m.strm.avail_out?3:4):m.last_lit&&(G(m,!1),0===m.strm.avail_out)?1:2}function Ce(m,Z){for(var Y,P,x;;){if(m.lookahead<_e){if(We(m),m.lookahead<_e&&Z===d)return 1;if(0===m.lookahead)break}if(Y=0,m.lookahead>=q&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+q-1])&m.hash_mask,Y=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),m.prev_length=m.match_length,m.prev_match=m.match_start,m.match_length=q-1,0!==Y&&m.prev_length<m.max_lazy_match&&m.strstart-Y<=m.w_size-_e&&(m.match_length=pe(m,Y),m.match_length<=5&&(1===m.strategy||m.match_length===q&&4096<m.strstart-m.match_start)&&(m.match_length=q-1)),m.prev_length>=q&&m.match_length<=m.prev_length){for(x=m.strstart+m.lookahead-q,P=a._tr_tally(m,m.strstart-1-m.prev_match,m.prev_length-q),m.lookahead-=m.prev_length-1,m.prev_length-=2;++m.strstart<=x&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+q-1])&m.hash_mask,Y=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),0!=--m.prev_length;);if(m.match_available=0,m.match_length=q-1,m.strstart++,P&&(G(m,!1),0===m.strm.avail_out))return 1}else if(m.match_available){if((P=a._tr_tally(m,0,m.window[m.strstart-1]))&&G(m,!1),m.strstart++,m.lookahead--,0===m.strm.avail_out)return 1}else m.match_available=1,m.strstart++,m.lookahead--}return m.match_available&&(P=a._tr_tally(m,0,m.window[m.strstart-1]),m.match_available=0),m.insert=m.strstart<q-1?m.strstart:q-1,4===Z?(G(m,!0),0===m.strm.avail_out?3:4):m.last_lit&&(G(m,!1),0===m.strm.avail_out)?1:2}function Le(m,Z,Y,P,x){this.good_length=m,this.max_lazy=Z,this.nice_length=Y,this.max_chain=P,this.func=x}function Je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*M),this.dyn_dtree=new s.Buf16(2*(2*I+1)),this.bl_tree=new s.Buf16(2*(2*H+1)),Pe(this.dyn_ltree),Pe(this.dyn_dtree),Pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(J+1),this.heap=new s.Buf16(2*L+1),Pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*L+1),Pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ge(m){var Z;return m&&m.state?(m.total_in=m.total_out=0,m.data_type=k,(Z=m.state).pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap?S:V,m.adler=2===Z.wrap?0:1,Z.last_flush=d,a._tr_init(Z),y):Re(m,E)}function Be(m){var Y,Z=ge(m);return Z===y&&((Y=m.state).window_size=2*Y.w_size,Pe(Y.head),Y.max_lazy_match=i[Y.level].max_lazy,Y.good_match=i[Y.level].good_length,Y.nice_match=i[Y.level].nice_length,Y.max_chain_length=i[Y.level].max_chain,Y.strstart=0,Y.block_start=0,Y.lookahead=0,Y.insert=0,Y.match_length=Y.prev_length=q-1,Y.match_available=0,Y.ins_h=0),Z}function it(m,Z,Y,P,x,B){if(!m)return E;var re=1;if(-1===Z&&(Z=6),P<0?(re=0,P=-P):15<P&&(re=2,P-=16),x<1||9<x||Y!==D||P<8||15<P||Z<0||9<Z||B<0||4<B)return Re(m,E);8===P&&(P=9);var se=new Je;return(m.state=se).strm=m,se.wrap=re,se.gzhead=null,se.w_bits=P,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=x+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+q-1)/q),se.window=new s.Buf8(2*se.w_size),se.head=new s.Buf16(se.hash_size),se.prev=new s.Buf16(se.w_size),se.lit_bufsize=1<<x+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new s.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=Z,se.strategy=B,se.method=Y,Be(m)}i=[new Le(0,0,0,0,function(m,Z){var Y=65535;for(Y>m.pending_buf_size-5&&(Y=m.pending_buf_size-5);;){if(m.lookahead<=1){if(We(m),0===m.lookahead&&Z===d)return 1;if(0===m.lookahead)break}m.strstart+=m.lookahead,m.lookahead=0;var P=m.block_start+Y;if((0===m.strstart||m.strstart>=P)&&(m.lookahead=m.strstart-P,m.strstart=P,G(m,!1),0===m.strm.avail_out)||m.strstart-m.block_start>=m.w_size-_e&&(G(m,!1),0===m.strm.avail_out))return 1}return m.insert=0,4===Z?(G(m,!0),0===m.strm.avail_out?3:4):(m.strstart>m.block_start&&G(m,!1),1)}),new Le(4,4,8,4,Xe),new Le(4,5,16,8,Xe),new Le(4,6,32,32,Xe),new Le(4,4,16,16,Ce),new Le(8,16,32,32,Ce),new Le(8,16,128,128,Ce),new Le(8,32,128,256,Ce),new Le(32,128,258,1024,Ce),new Le(32,258,258,4096,Ce)],n.deflateInit=function(m,Z){return it(m,Z,D,15,8,0)},n.deflateInit2=it,n.deflateReset=Be,n.deflateResetKeep=ge,n.deflateSetHeader=function(m,Z){return m&&m.state?2!==m.state.wrap?E:(m.state.gzhead=Z,y):E},n.deflate=function(m,Z){var Y,P,x,B;if(!m||!m.state||5<Z||Z<0)return m?Re(m,E):E;if(P=m.state,!m.output||!m.input&&0!==m.avail_in||666===P.status&&4!==Z)return Re(m,0===m.avail_out?-5:E);if(P.strm=m,Y=P.last_flush,P.last_flush=Z,P.status===S)if(2===P.wrap)m.adler=0,Ee(P,31),Ee(P,139),Ee(P,8),P.gzhead?(Ee(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),Ee(P,255&P.gzhead.time),Ee(P,P.gzhead.time>>8&255),Ee(P,P.gzhead.time>>16&255),Ee(P,P.gzhead.time>>24&255),Ee(P,9===P.level?2:2<=P.strategy||P.level<2?4:0),Ee(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(Ee(P,255&P.gzhead.extra.length),Ee(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(m.adler=c(m.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(Ee(P,0),Ee(P,0),Ee(P,0),Ee(P,0),Ee(P,0),Ee(P,9===P.level?2:2<=P.strategy||P.level<2?4:0),Ee(P,3),P.status=V);else{var re=D+(P.w_bits-8<<4)<<8;re|=(2<=P.strategy||P.level<2?0:P.level<6?1:6===P.level?2:3)<<6,0!==P.strstart&&(re|=32),re+=31-re%31,P.status=V,be(P,re),0!==P.strstart&&(be(P,m.adler>>>16),be(P,65535&m.adler)),m.adler=1}if(69===P.status)if(P.gzhead.extra){for(x=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>x&&(m.adler=c(m.adler,P.pending_buf,P.pending-x,x)),W(m),x=P.pending,P.pending!==P.pending_buf_size));)Ee(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>x&&(m.adler=c(m.adler,P.pending_buf,P.pending-x,x)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(73===P.status)if(P.gzhead.name){x=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>x&&(m.adler=c(m.adler,P.pending_buf,P.pending-x,x)),W(m),x=P.pending,P.pending===P.pending_buf_size)){B=1;break}B=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,Ee(P,B)}while(0!==B);P.gzhead.hcrc&&P.pending>x&&(m.adler=c(m.adler,P.pending_buf,P.pending-x,x)),0===B&&(P.gzindex=0,P.status=91)}else P.status=91;if(91===P.status)if(P.gzhead.comment){x=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>x&&(m.adler=c(m.adler,P.pending_buf,P.pending-x,x)),W(m),x=P.pending,P.pending===P.pending_buf_size)){B=1;break}B=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,Ee(P,B)}while(0!==B);P.gzhead.hcrc&&P.pending>x&&(m.adler=c(m.adler,P.pending_buf,P.pending-x,x)),0===B&&(P.status=103)}else P.status=103;if(103===P.status&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&W(m),P.pending+2<=P.pending_buf_size&&(Ee(P,255&m.adler),Ee(P,m.adler>>8&255),m.adler=0,P.status=V)):P.status=V),0!==P.pending){if(W(m),0===m.avail_out)return P.last_flush=-1,y}else if(0===m.avail_in&&fe(Z)<=fe(Y)&&4!==Z)return Re(m,-5);if(666===P.status&&0!==m.avail_in)return Re(m,-5);if(0!==m.avail_in||0!==P.lookahead||Z!==d&&666!==P.status){var se=2===P.strategy?function(U,de){for(var ve;;){if(0===U.lookahead&&(We(U),0===U.lookahead)){if(de===d)return 1;break}if(U.match_length=0,ve=a._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++,ve&&(G(U,!1),0===U.strm.avail_out))return 1}return U.insert=0,4===de?(G(U,!0),0===U.strm.avail_out?3:4):U.last_lit&&(G(U,!1),0===U.strm.avail_out)?1:2}(P,Z):3===P.strategy?function(U,de){for(var ve,he,ke,Me,De=U.window;;){if(U.lookahead<=Q){if(We(U),U.lookahead<=Q&&de===d)return 1;if(0===U.lookahead)break}if(U.match_length=0,U.lookahead>=q&&0<U.strstart&&(he=De[ke=U.strstart-1])===De[++ke]&&he===De[++ke]&&he===De[++ke]){Me=U.strstart+Q;do{}while(he===De[++ke]&&he===De[++ke]&&he===De[++ke]&&he===De[++ke]&&he===De[++ke]&&he===De[++ke]&&he===De[++ke]&&he===De[++ke]&&ke<Me);U.match_length=Q-(Me-ke),U.match_length>U.lookahead&&(U.match_length=U.lookahead)}if(U.match_length>=q?(ve=a._tr_tally(U,1,U.match_length-q),U.lookahead-=U.match_length,U.strstart+=U.match_length,U.match_length=0):(ve=a._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++),ve&&(G(U,!1),0===U.strm.avail_out))return 1}return U.insert=0,4===de?(G(U,!0),0===U.strm.avail_out?3:4):U.last_lit&&(G(U,!1),0===U.strm.avail_out)?1:2}(P,Z):i[P.level].func(P,Z);if(3!==se&&4!==se||(P.status=666),1===se||3===se)return 0===m.avail_out&&(P.last_flush=-1),y;if(2===se&&(1===Z?a._tr_align(P):5!==Z&&(a._tr_stored_block(P,0,0,!1),3===Z&&(Pe(P.head),0===P.lookahead&&(P.strstart=0,P.block_start=0,P.insert=0))),W(m),0===m.avail_out))return P.last_flush=-1,y}return 4!==Z?y:P.wrap<=0?1:(2===P.wrap?(Ee(P,255&m.adler),Ee(P,m.adler>>8&255),Ee(P,m.adler>>16&255),Ee(P,m.adler>>24&255),Ee(P,255&m.total_in),Ee(P,m.total_in>>8&255),Ee(P,m.total_in>>16&255),Ee(P,m.total_in>>24&255)):(be(P,m.adler>>>16),be(P,65535&m.adler)),W(m),0<P.wrap&&(P.wrap=-P.wrap),0!==P.pending?y:1)},n.deflateEnd=function(m){var Z;return m&&m.state?(Z=m.state.status)!==S&&69!==Z&&73!==Z&&91!==Z&&103!==Z&&Z!==V&&666!==Z?Re(m,E):(m.state=null,Z===V?Re(m,-3):y):E},n.deflateSetDictionary=function(m,Z){var Y,P,x,B,re,se,U,de,ve=Z.length;if(!m||!m.state||2===(B=(Y=m.state).wrap)||1===B&&Y.status!==S||Y.lookahead)return E;for(1===B&&(m.adler=l(m.adler,Z,ve,0)),Y.wrap=0,ve>=Y.w_size&&(0===B&&(Pe(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0),de=new s.Buf8(Y.w_size),s.arraySet(de,Z,ve-Y.w_size,Y.w_size,0),Z=de,ve=Y.w_size),re=m.avail_in,se=m.next_in,U=m.input,m.avail_in=ve,m.next_in=0,m.input=Z,We(Y);Y.lookahead>=q;){for(P=Y.strstart,x=Y.lookahead-(q-1);Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[P+q-1])&Y.hash_mask,Y.prev[P&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=P,P++,--x;);Y.strstart=P,Y.lookahead=q-1,We(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=q-1,Y.match_available=0,m.next_in=se,m.input=U,m.avail_in=re,Y.wrap=B,y},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,r,n){r.exports=function(i,s){var a,l,c,p,d,v,y,E,b,T,k,D,C,L,I,H,M,J,q,Q,_e,S,V,g,ee;g=i.input,c=(l=i.next_in)+(i.avail_in-5),ee=i.output,d=(p=i.next_out)-(s-i.avail_out),v=p+(i.avail_out-257),y=(a=i.state).dmax,E=a.wsize,b=a.whave,T=a.wnext,k=a.window,D=a.hold,C=a.bits,L=a.lencode,I=a.distcode,H=(1<<a.lenbits)-1,M=(1<<a.distbits)-1;e:do{C<15&&(D+=g[l++]<<C,D+=g[l++]<<(C+=8),C+=8),J=L[D&H];t:for(;;){if(D>>>=q=J>>>24,C-=q,0==(q=J>>>16&255))ee[p++]=65535&J;else{if(!(16&q)){if(!(64&q)){J=L[(65535&J)+(D&(1<<q)-1)];continue t}if(32&q){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}Q=65535&J,(q&=15)&&(C<q&&(D+=g[l++]<<C,C+=8),Q+=D&(1<<q)-1,D>>>=q,C-=q),C<15&&(D+=g[l++]<<C,D+=g[l++]<<(C+=8),C+=8),J=I[D&M];r:for(;;){if(D>>>=q=J>>>24,C-=q,!(16&(q=J>>>16&255))){if(!(64&q)){J=I[(65535&J)+(D&(1<<q)-1)];continue r}i.msg="invalid distance code",a.mode=30;break e}if(_e=65535&J,C<(q&=15)&&(D+=g[l++]<<C,(C+=8)<q&&(D+=g[l++]<<C,C+=8)),y<(_e+=D&(1<<q)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(D>>>=q,C-=q,(q=p-d)<_e){if(b<(q=_e-q)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(V=k,(S=0)===T){if(S+=E-q,q<Q){for(Q-=q;ee[p++]=k[S++],--q;);S=p-_e,V=ee}}else if(T<q){if(S+=E+T-q,(q-=T)<Q){for(Q-=q;ee[p++]=k[S++],--q;);if(S=0,T<Q){for(Q-=q=T;ee[p++]=k[S++],--q;);S=p-_e,V=ee}}}else if(S+=T-q,q<Q){for(Q-=q;ee[p++]=k[S++],--q;);S=p-_e,V=ee}for(;2<Q;)ee[p++]=V[S++],ee[p++]=V[S++],ee[p++]=V[S++],Q-=3;Q&&(ee[p++]=V[S++],1<Q&&(ee[p++]=V[S++]))}else{for(S=p-_e;ee[p++]=ee[S++],ee[p++]=ee[S++],ee[p++]=ee[S++],2<(Q-=3););Q&&(ee[p++]=ee[S++],1<Q&&(ee[p++]=ee[S++]))}break}}break}}while(l<c&&p<v);l-=Q=C>>3,D&=(1<<(C-=Q<<3))-1,i.next_in=l,i.next_out=p,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=p<v?v-p+257:257-(p-v),a.hold=D,a.bits=C}},{}],49:[function(e,r,n){var i=e("../utils/common"),s=e("./adler32"),a=e("./crc32"),l=e("./inffast"),c=e("./inftrees"),v=0,y=-2,E=1,b=852,T=592;function k(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function D(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(S){var V;return S&&S.state?(S.total_in=S.total_out=(V=S.state).total=0,S.msg="",V.wrap&&(S.adler=1&V.wrap),V.mode=E,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new i.Buf32(b),V.distcode=V.distdyn=new i.Buf32(T),V.sane=1,V.back=-1,v):y}function L(S){var V;return S&&S.state?((V=S.state).wsize=0,V.whave=0,V.wnext=0,C(S)):y}function I(S,V){var g,ee;return S&&S.state?(ee=S.state,V<0?(g=0,V=-V):(g=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?y:(null!==ee.window&&ee.wbits!==V&&(ee.window=null),ee.wrap=g,ee.wbits=V,L(S))):y}function H(S,V){var g,ee;return S?(ee=new D,(S.state=ee).window=null,(g=I(S,V))!==v&&(S.state=null),g):y}var M,J,q=!0;function Q(S){if(q){var V;for(M=new i.Buf32(512),J=new i.Buf32(32),V=0;V<144;)S.lens[V++]=8;for(;V<256;)S.lens[V++]=9;for(;V<280;)S.lens[V++]=7;for(;V<288;)S.lens[V++]=8;for(c(1,S.lens,0,288,M,0,S.work,{bits:9}),V=0;V<32;)S.lens[V++]=5;c(2,S.lens,0,32,J,0,S.work,{bits:5}),q=!1}S.lencode=M,S.lenbits=9,S.distcode=J,S.distbits=5}function _e(S,V,g,ee){var xe,ae=S.state;return null===ae.window&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new i.Buf8(ae.wsize)),ee>=ae.wsize?(i.arraySet(ae.window,V,g-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(ee<(xe=ae.wsize-ae.wnext)&&(xe=ee),i.arraySet(ae.window,V,g-ee,xe,ae.wnext),(ee-=xe)?(i.arraySet(ae.window,V,g-ee,ee,0),ae.wnext=ee,ae.whave=ae.wsize):(ae.wnext+=xe,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=xe))),0}n.inflateReset=L,n.inflateReset2=I,n.inflateResetKeep=C,n.inflateInit=function(S){return H(S,15)},n.inflateInit2=H,n.inflate=function(S,V){var g,ee,xe,ae,Re,fe,Pe,W,G,Ee,be,pe,We,Xe,Ce,Le,Je,ge,Be,it,m,Z,Y,P,x=0,B=new i.Buf8(4),re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&0!==S.avail_in)return y;12===(g=S.state).mode&&(g.mode=13),Re=S.next_out,xe=S.output,ae=S.next_in,ee=S.input,W=g.hold,G=g.bits,Ee=fe=S.avail_in,be=Pe=S.avail_out,Z=v;e:for(;;)switch(g.mode){case E:if(0===g.wrap){g.mode=13;break}for(;G<16;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if(2&g.wrap&&35615===W){B[g.check=0]=255&W,B[1]=W>>>8&255,g.check=a(g.check,B,2,0),G=W=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&W)<<8)+(W>>8))%31){S.msg="incorrect header check",g.mode=30;break}if(8!=(15&W)){S.msg="unknown compression method",g.mode=30;break}if(G-=4,m=8+(15&(W>>>=4)),0===g.wbits)g.wbits=m;else if(m>g.wbits){S.msg="invalid window size",g.mode=30;break}g.dmax=1<<m,S.adler=g.check=1,g.mode=512&W?10:12,G=W=0;break;case 2:for(;G<16;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if(g.flags=W,8!=(255&g.flags)){S.msg="unknown compression method",g.mode=30;break}if(57344&g.flags){S.msg="unknown header flags set",g.mode=30;break}g.head&&(g.head.text=W>>8&1),512&g.flags&&(B[0]=255&W,B[1]=W>>>8&255,g.check=a(g.check,B,2,0)),G=W=0,g.mode=3;case 3:for(;G<32;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}g.head&&(g.head.time=W),512&g.flags&&(B[0]=255&W,B[1]=W>>>8&255,B[2]=W>>>16&255,B[3]=W>>>24&255,g.check=a(g.check,B,4,0)),G=W=0,g.mode=4;case 4:for(;G<16;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}g.head&&(g.head.xflags=255&W,g.head.os=W>>8),512&g.flags&&(B[0]=255&W,B[1]=W>>>8&255,g.check=a(g.check,B,2,0)),G=W=0,g.mode=5;case 5:if(1024&g.flags){for(;G<16;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}g.length=W,g.head&&(g.head.extra_len=W),512&g.flags&&(B[0]=255&W,B[1]=W>>>8&255,g.check=a(g.check,B,2,0)),G=W=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&(fe<(pe=g.length)&&(pe=fe),pe&&(g.head&&(m=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),i.arraySet(g.head.extra,ee,ae,pe,m)),512&g.flags&&(g.check=a(g.check,ee,pe,ae)),fe-=pe,ae+=pe,g.length-=pe),g.length))break e;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(0===fe)break e;for(pe=0;m=ee[ae+pe++],g.head&&m&&g.length<65536&&(g.head.name+=String.fromCharCode(m)),m&&pe<fe;);if(512&g.flags&&(g.check=a(g.check,ee,pe,ae)),fe-=pe,ae+=pe,m)break e}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(0===fe)break e;for(pe=0;m=ee[ae+pe++],g.head&&m&&g.length<65536&&(g.head.comment+=String.fromCharCode(m)),m&&pe<fe;);if(512&g.flags&&(g.check=a(g.check,ee,pe,ae)),fe-=pe,ae+=pe,m)break e}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;G<16;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if(W!==(65535&g.check)){S.msg="header crc mismatch",g.mode=30;break}G=W=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),S.adler=g.check=0,g.mode=12;break;case 10:for(;G<32;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}S.adler=g.check=k(W),G=W=0,g.mode=11;case 11:if(0===g.havedict)return S.next_out=Re,S.avail_out=Pe,S.next_in=ae,S.avail_in=fe,g.hold=W,g.bits=G,2;S.adler=g.check=1,g.mode=12;case 12:if(5===V||6===V)break e;case 13:if(g.last){W>>>=7&G,G-=7&G,g.mode=27;break}for(;G<3;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}switch(g.last=1&W,G-=1,3&(W>>>=1)){case 0:g.mode=14;break;case 1:if(Q(g),g.mode=20,6!==V)break;W>>>=2,G-=2;break e;case 2:g.mode=17;break;case 3:S.msg="invalid block type",g.mode=30}W>>>=2,G-=2;break;case 14:for(W>>>=7&G,G-=7&G;G<32;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if((65535&W)!=(W>>>16^65535)){S.msg="invalid stored block lengths",g.mode=30;break}if(g.length=65535&W,G=W=0,g.mode=15,6===V)break e;case 15:g.mode=16;case 16:if(pe=g.length){if(fe<pe&&(pe=fe),Pe<pe&&(pe=Pe),0===pe)break e;i.arraySet(xe,ee,ae,pe,Re),fe-=pe,ae+=pe,Pe-=pe,Re+=pe,g.length-=pe;break}g.mode=12;break;case 17:for(;G<14;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if(g.nlen=257+(31&W),G-=5,g.ndist=1+(31&(W>>>=5)),G-=5,g.ncode=4+(15&(W>>>=5)),W>>>=4,G-=4,286<g.nlen||30<g.ndist){S.msg="too many length or distance symbols",g.mode=30;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;G<3;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}g.lens[re[g.have++]]=7&W,W>>>=3,G-=3}for(;g.have<19;)g.lens[re[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,Z=c(0,g.lens,0,19,g.lencode,0,g.work,Y={bits:g.lenbits}),g.lenbits=Y.bits,Z){S.msg="invalid code lengths set",g.mode=30;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;Le=(x=g.lencode[W&(1<<g.lenbits)-1])>>>16&255,Je=65535&x,!((Ce=x>>>24)<=G);){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if(Je<16)W>>>=Ce,G-=Ce,g.lens[g.have++]=Je;else{if(16===Je){for(P=Ce+2;G<P;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if(W>>>=Ce,G-=Ce,0===g.have){S.msg="invalid bit length repeat",g.mode=30;break}m=g.lens[g.have-1],pe=3+(3&W),W>>>=2,G-=2}else if(17===Je){for(P=Ce+3;G<P;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}G-=Ce,m=0,pe=3+(7&(W>>>=Ce)),W>>>=3,G-=3}else{for(P=Ce+7;G<P;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}G-=Ce,m=0,pe=11+(127&(W>>>=Ce)),W>>>=7,G-=7}if(g.have+pe>g.nlen+g.ndist){S.msg="invalid bit length repeat",g.mode=30;break}for(;pe--;)g.lens[g.have++]=m}}if(30===g.mode)break;if(0===g.lens[256]){S.msg="invalid code -- missing end-of-block",g.mode=30;break}if(g.lenbits=9,Z=c(1,g.lens,0,g.nlen,g.lencode,0,g.work,Y={bits:g.lenbits}),g.lenbits=Y.bits,Z){S.msg="invalid literal/lengths set",g.mode=30;break}if(g.distbits=6,g.distcode=g.distdyn,Z=c(2,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,Y={bits:g.distbits}),g.distbits=Y.bits,Z){S.msg="invalid distances set",g.mode=30;break}if(g.mode=20,6===V)break e;case 20:g.mode=21;case 21:if(6<=fe&&258<=Pe){S.next_out=Re,S.avail_out=Pe,S.next_in=ae,S.avail_in=fe,g.hold=W,g.bits=G,l(S,be),Re=S.next_out,xe=S.output,Pe=S.avail_out,ae=S.next_in,ee=S.input,fe=S.avail_in,W=g.hold,G=g.bits,12===g.mode&&(g.back=-1);break}for(g.back=0;Le=(x=g.lencode[W&(1<<g.lenbits)-1])>>>16&255,Je=65535&x,!((Ce=x>>>24)<=G);){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if(Le&&!(240&Le)){for(ge=Ce,Be=Le,it=Je;Le=(x=g.lencode[it+((W&(1<<ge+Be)-1)>>ge)])>>>16&255,Je=65535&x,!(ge+(Ce=x>>>24)<=G);){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}W>>>=ge,G-=ge,g.back+=ge}if(W>>>=Ce,G-=Ce,g.back+=Ce,g.length=Je,0===Le){g.mode=26;break}if(32&Le){g.back=-1,g.mode=12;break}if(64&Le){S.msg="invalid literal/length code",g.mode=30;break}g.extra=15&Le,g.mode=22;case 22:if(g.extra){for(P=g.extra;G<P;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}g.length+=W&(1<<g.extra)-1,W>>>=g.extra,G-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;Le=(x=g.distcode[W&(1<<g.distbits)-1])>>>16&255,Je=65535&x,!((Ce=x>>>24)<=G);){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if(!(240&Le)){for(ge=Ce,Be=Le,it=Je;Le=(x=g.distcode[it+((W&(1<<ge+Be)-1)>>ge)])>>>16&255,Je=65535&x,!(ge+(Ce=x>>>24)<=G);){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}W>>>=ge,G-=ge,g.back+=ge}if(W>>>=Ce,G-=Ce,g.back+=Ce,64&Le){S.msg="invalid distance code",g.mode=30;break}g.offset=Je,g.extra=15&Le,g.mode=24;case 24:if(g.extra){for(P=g.extra;G<P;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}g.offset+=W&(1<<g.extra)-1,W>>>=g.extra,G-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){S.msg="invalid distance too far back",g.mode=30;break}g.mode=25;case 25:if(0===Pe)break e;if(g.offset>(pe=be-Pe)){if((pe=g.offset-pe)>g.whave&&g.sane){S.msg="invalid distance too far back",g.mode=30;break}We=pe>g.wnext?g.wsize-(pe-=g.wnext):g.wnext-pe,pe>g.length&&(pe=g.length),Xe=g.window}else Xe=xe,We=Re-g.offset,pe=g.length;for(Pe<pe&&(pe=Pe),Pe-=pe,g.length-=pe;xe[Re++]=Xe[We++],--pe;);0===g.length&&(g.mode=21);break;case 26:if(0===Pe)break e;xe[Re++]=g.length,Pe--,g.mode=21;break;case 27:if(g.wrap){for(;G<32;){if(0===fe)break e;fe--,W|=ee[ae++]<<G,G+=8}if(S.total_out+=be-=Pe,g.total+=be,be&&(S.adler=g.check=g.flags?a(g.check,xe,be,Re-be):s(g.check,xe,be,Re-be)),be=Pe,(g.flags?W:k(W))!==g.check){S.msg="incorrect data check",g.mode=30;break}G=W=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;G<32;){if(0===fe)break e;fe--,W+=ee[ae++]<<G,G+=8}if(W!==(4294967295&g.total)){S.msg="incorrect length check",g.mode=30;break}G=W=0}g.mode=29;case 29:Z=1;break e;case 30:Z=-3;break e;case 31:return-4;default:return y}return S.next_out=Re,S.avail_out=Pe,S.next_in=ae,S.avail_in=fe,g.hold=W,g.bits=G,(g.wsize||be!==S.avail_out&&g.mode<30&&(g.mode<27||4!==V))&&_e(S,S.output,S.next_out,be-S.avail_out)?(g.mode=31,-4):(be-=S.avail_out,S.total_in+=Ee-=S.avail_in,S.total_out+=be,g.total+=be,g.wrap&&be&&(S.adler=g.check=g.flags?a(g.check,xe,be,S.next_out-be):s(g.check,xe,be,S.next_out-be)),S.data_type=g.bits+(g.last?64:0)+(12===g.mode?128:0)+(20===g.mode||15===g.mode?256:0),(0==Ee&&0===be||4===V)&&Z===v&&(Z=-5),Z)},n.inflateEnd=function(S){if(!S||!S.state)return y;var V=S.state;return V.window&&(V.window=null),S.state=null,v},n.inflateGetHeader=function(S,V){var g;return S&&S.state&&2&(g=S.state).wrap?((g.head=V).done=!1,v):y},n.inflateSetDictionary=function(S,V){var g,ee=V.length;return S&&S.state?0!==(g=S.state).wrap&&11!==g.mode?y:11===g.mode&&s(1,V,ee,0)!==g.check?-3:_e(S,V,ee,ee)?(g.mode=31,-4):(g.havedict=1,v):y},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,r,n){var i=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(p,d,v,y,E,b,T,k){var D,C,L,I,H,M,J,q,Q,_e=k.bits,S=0,V=0,g=0,ee=0,xe=0,ae=0,Re=0,fe=0,Pe=0,W=0,G=null,Ee=0,be=new i.Buf16(16),pe=new i.Buf16(16),We=null,Xe=0;for(S=0;S<=15;S++)be[S]=0;for(V=0;V<y;V++)be[d[v+V]]++;for(xe=_e,ee=15;1<=ee&&0===be[ee];ee--);if(ee<xe&&(xe=ee),0===ee)return E[b++]=20971520,E[b++]=20971520,k.bits=1,0;for(g=1;g<ee&&0===be[g];g++);for(xe<g&&(xe=g),S=fe=1;S<=15;S++)if(fe<<=1,(fe-=be[S])<0)return-1;if(0<fe&&(0===p||1!==ee))return-1;for(pe[1]=0,S=1;S<15;S++)pe[S+1]=pe[S]+be[S];for(V=0;V<y;V++)0!==d[v+V]&&(T[pe[d[v+V]]++]=V);if(M=0===p?(G=We=T,19):1===p?(G=s,Ee-=257,We=a,Xe-=257,256):(G=l,We=c,-1),S=g,H=b,Re=V=W=0,L=-1,I=(Pe=1<<(ae=xe))-1,1===p&&852<Pe||2===p&&592<Pe)return 1;for(;;){for(J=S-Re,Q=T[V]<M?(q=0,T[V]):T[V]>M?(q=We[Xe+T[V]],G[Ee+T[V]]):(q=96,0),D=1<<S-Re,g=C=1<<ae;E[H+(W>>Re)+(C-=D)]=J<<24|q<<16|Q,0!==C;);for(D=1<<S-1;W&D;)D>>=1;if(0!==D?(W&=D-1,W+=D):W=0,V++,0==--be[S]){if(S===ee)break;S=d[v+T[V]]}if(xe<S&&(W&I)!==L){for(0===Re&&(Re=xe),H+=g,fe=1<<(ae=S-Re);ae+Re<ee&&!((fe-=be[ae+Re])<=0);)ae++,fe<<=1;if(Pe+=1<<ae,1===p&&852<Pe||2===p&&592<Pe)return 1;E[L=W&I]=xe<<24|ae<<16|H-b}}return 0!==W&&(E[H+W]=S-Re<<24|64<<16),k.bits=xe,0}},{"../utils/common":41}],51:[function(e,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,r,n){var i=e("../utils/common");function l(x){for(var B=x.length;0<=--B;)x[B]=0}var d=256,v=286,y=30,T=15,k=16,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],J=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_e=new Array(576);l(_e);var S=new Array(60);l(S);var V=new Array(512);l(V);var g=new Array(256);l(g);var ee=new Array(29);l(ee);var xe,ae,Re,fe=new Array(y);function Pe(x,B,re,se,U){this.static_tree=x,this.extra_bits=B,this.extra_base=re,this.elems=se,this.max_length=U,this.has_stree=x&&x.length}function W(x,B){this.dyn_tree=x,this.max_code=0,this.stat_desc=B}function G(x){return x<256?V[x]:V[256+(x>>>7)]}function Ee(x,B){x.pending_buf[x.pending++]=255&B,x.pending_buf[x.pending++]=B>>>8&255}function be(x,B,re){x.bi_valid>k-re?(x.bi_buf|=B<<x.bi_valid&65535,Ee(x,x.bi_buf),x.bi_buf=B>>k-x.bi_valid,x.bi_valid+=re-k):(x.bi_buf|=B<<x.bi_valid&65535,x.bi_valid+=re)}function pe(x,B,re){be(x,re[2*B],re[2*B+1])}function We(x,B){for(var re=0;re|=1&x,x>>>=1,re<<=1,0<--B;);return re>>>1}function Xe(x,B,re){var se,U,de=new Array(T+1),ve=0;for(se=1;se<=T;se++)de[se]=ve=ve+re[se-1]<<1;for(U=0;U<=B;U++){var he=x[2*U+1];0!==he&&(x[2*U]=We(de[he]++,he))}}function Ce(x){var B;for(B=0;B<v;B++)x.dyn_ltree[2*B]=0;for(B=0;B<y;B++)x.dyn_dtree[2*B]=0;for(B=0;B<19;B++)x.bl_tree[2*B]=0;x.dyn_ltree[512]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Le(x){8<x.bi_valid?Ee(x,x.bi_buf):0<x.bi_valid&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function Je(x,B,re,se){var U=2*B,de=2*re;return x[U]<x[de]||x[U]===x[de]&&se[B]<=se[re]}function ge(x,B,re){for(var se=x.heap[re],U=re<<1;U<=x.heap_len&&(U<x.heap_len&&Je(B,x.heap[U+1],x.heap[U],x.depth)&&U++,!Je(B,se,x.heap[U],x.depth));)x.heap[re]=x.heap[U],re=U,U<<=1;x.heap[re]=se}function Be(x,B,re){var se,U,de,ve,he=0;if(0!==x.last_lit)for(;se=x.pending_buf[x.d_buf+2*he]<<8|x.pending_buf[x.d_buf+2*he+1],U=x.pending_buf[x.l_buf+he],he++,0===se?pe(x,U,B):(pe(x,(de=g[U])+d+1,B),0!==(ve=M[de])&&be(x,U-=ee[de],ve),pe(x,de=G(--se),re),0!==(ve=J[de])&&be(x,se-=fe[de],ve)),he<x.last_lit;);pe(x,256,B)}function it(x,B){var re,se,U,de=B.dyn_tree,ve=B.stat_desc.static_tree,he=B.stat_desc.has_stree,ke=B.stat_desc.elems,Me=-1;for(x.heap_len=0,x.heap_max=573,re=0;re<ke;re++)0!==de[2*re]?(x.heap[++x.heap_len]=Me=re,x.depth[re]=0):de[2*re+1]=0;for(;x.heap_len<2;)de[2*(U=x.heap[++x.heap_len]=Me<2?++Me:0)]=1,x.depth[U]=0,x.opt_len--,he&&(x.static_len-=ve[2*U+1]);for(B.max_code=Me,re=x.heap_len>>1;1<=re;re--)ge(x,de,re);for(U=ke;re=x.heap[1],x.heap[1]=x.heap[x.heap_len--],ge(x,de,1),se=x.heap[1],x.heap[--x.heap_max]=re,x.heap[--x.heap_max]=se,de[2*U]=de[2*re]+de[2*se],x.depth[U]=(x.depth[re]>=x.depth[se]?x.depth[re]:x.depth[se])+1,de[2*re+1]=de[2*se+1]=U,x.heap[1]=U++,ge(x,de,1),2<=x.heap_len;);x.heap[--x.heap_max]=x.heap[1],function(De,rt){var _t,at,Pt,Ve,St,qt,Se=rt.dyn_tree,Nt=rt.max_code,Ut=rt.stat_desc.static_tree,ir=rt.stat_desc.has_stree,ct=rt.stat_desc.extra_bits,sr=rt.stat_desc.extra_base,ut=rt.stat_desc.max_length,Dt=0;for(Ve=0;Ve<=T;Ve++)De.bl_count[Ve]=0;for(Se[2*De.heap[De.heap_max]+1]=0,_t=De.heap_max+1;_t<573;_t++)ut<(Ve=Se[2*Se[2*(at=De.heap[_t])+1]+1]+1)&&(Ve=ut,Dt++),Se[2*at+1]=Ve,Nt<at||(De.bl_count[Ve]++,St=0,sr<=at&&(St=ct[at-sr]),De.opt_len+=(qt=Se[2*at])*(Ve+St),ir&&(De.static_len+=qt*(Ut[2*at+1]+St)));if(0!==Dt){do{for(Ve=ut-1;0===De.bl_count[Ve];)Ve--;De.bl_count[Ve]--,De.bl_count[Ve+1]+=2,De.bl_count[ut]--,Dt-=2}while(0<Dt);for(Ve=ut;0!==Ve;Ve--)for(at=De.bl_count[Ve];0!==at;)Nt<(Pt=De.heap[--_t])||(Se[2*Pt+1]!==Ve&&(De.opt_len+=(Ve-Se[2*Pt+1])*Se[2*Pt],Se[2*Pt+1]=Ve),at--)}}(x,B),Xe(de,Me,x.bl_count)}function m(x,B,re){var se,U,de=-1,ve=B[1],he=0,ke=7,Me=4;for(0===ve&&(ke=138,Me=3),B[2*(re+1)+1]=65535,se=0;se<=re;se++)U=ve,ve=B[2*(se+1)+1],++he<ke&&U===ve||(he<Me?x.bl_tree[2*U]+=he:0!==U?(U!==de&&x.bl_tree[2*U]++,x.bl_tree[32]++):he<=10?x.bl_tree[34]++:x.bl_tree[36]++,de=U,Me=(he=0)===ve?(ke=138,3):U===ve?(ke=6,3):(ke=7,4))}function Z(x,B,re){var se,U,de=-1,ve=B[1],he=0,ke=7,Me=4;for(0===ve&&(ke=138,Me=3),se=0;se<=re;se++)if(U=ve,ve=B[2*(se+1)+1],!(++he<ke&&U===ve)){if(he<Me)for(;pe(x,U,x.bl_tree),0!=--he;);else 0!==U?(U!==de&&(pe(x,U,x.bl_tree),he--),pe(x,16,x.bl_tree),be(x,he-3,2)):he<=10?(pe(x,17,x.bl_tree),be(x,he-3,3)):(pe(x,18,x.bl_tree),be(x,he-11,7));de=U,Me=(he=0)===ve?(ke=138,3):U===ve?(ke=6,3):(ke=7,4)}}l(fe);var Y=!1;function P(x,B,re,se){var U,de,ve;be(x,0+(se?1:0),3),de=B,ve=re,Le(U=x),Ee(U,ve),Ee(U,~ve),i.arraySet(U.pending_buf,U.window,de,ve,U.pending),U.pending+=ve}n._tr_init=function(x){Y||(function(){var B,re,se,U,de,ve=new Array(T+1);for(U=se=0;U<28;U++)for(ee[U]=se,B=0;B<1<<M[U];B++)g[se++]=U;for(g[se-1]=U,U=de=0;U<16;U++)for(fe[U]=de,B=0;B<1<<J[U];B++)V[de++]=U;for(de>>=7;U<y;U++)for(fe[U]=de<<7,B=0;B<1<<J[U]-7;B++)V[256+de++]=U;for(re=0;re<=T;re++)ve[re]=0;for(B=0;B<=143;)_e[2*B+1]=8,B++,ve[8]++;for(;B<=255;)_e[2*B+1]=9,B++,ve[9]++;for(;B<=279;)_e[2*B+1]=7,B++,ve[7]++;for(;B<=287;)_e[2*B+1]=8,B++,ve[8]++;for(Xe(_e,287,ve),B=0;B<y;B++)S[2*B+1]=5,S[2*B]=We(B,5);xe=new Pe(_e,M,257,v,T),ae=new Pe(S,J,0,y,T),Re=new Pe(new Array(0),q,0,19,7)}(),Y=!0),x.l_desc=new W(x.dyn_ltree,xe),x.d_desc=new W(x.dyn_dtree,ae),x.bl_desc=new W(x.bl_tree,Re),x.bi_buf=0,x.bi_valid=0,Ce(x)},n._tr_stored_block=P,n._tr_flush_block=function(x,B,re,se){var U,de,ve=0;0<x.level?(2===x.strm.data_type&&(x.strm.data_type=function(he){var ke,Me=4093624447;for(ke=0;ke<=31;ke++,Me>>>=1)if(1&Me&&0!==he.dyn_ltree[2*ke])return 0;if(0!==he.dyn_ltree[18]||0!==he.dyn_ltree[20]||0!==he.dyn_ltree[26])return 1;for(ke=32;ke<d;ke++)if(0!==he.dyn_ltree[2*ke])return 1;return 0}(x)),it(x,x.l_desc),it(x,x.d_desc),ve=function(he){var ke;for(m(he,he.dyn_ltree,he.l_desc.max_code),m(he,he.dyn_dtree,he.d_desc.max_code),it(he,he.bl_desc),ke=18;3<=ke&&0===he.bl_tree[2*Q[ke]+1];ke--);return he.opt_len+=3*(ke+1)+5+5+4,ke}(x),(de=x.static_len+3+7>>>3)<=(U=x.opt_len+3+7>>>3)&&(U=de)):U=de=re+5,re+4<=U&&-1!==B?P(x,B,re,se):4===x.strategy||de===U?(be(x,2+(se?1:0),3),Be(x,_e,S)):(be(x,4+(se?1:0),3),function(he,ke,Me,De){var rt;for(be(he,ke-257,5),be(he,Me-1,5),be(he,De-4,4),rt=0;rt<De;rt++)be(he,he.bl_tree[2*Q[rt]+1],3);Z(he,he.dyn_ltree,ke-1),Z(he,he.dyn_dtree,Me-1)}(x,x.l_desc.max_code+1,x.d_desc.max_code+1,ve+1),Be(x,x.dyn_ltree,x.dyn_dtree)),Ce(x),se&&Le(x)},n._tr_tally=function(x,B,re){return x.pending_buf[x.d_buf+2*x.last_lit]=B>>>8&255,x.pending_buf[x.d_buf+2*x.last_lit+1]=255&B,x.pending_buf[x.l_buf+x.last_lit]=255&re,x.last_lit++,0===B?x.dyn_ltree[2*re]++:(x.matches++,B--,x.dyn_ltree[2*(g[re]+d+1)]++,x.dyn_dtree[2*G(B)]++),x.last_lit===x.lit_bufsize-1},n._tr_align=function(x){var B;be(x,2,3),pe(x,256,_e),16===(B=x).bi_valid?(Ee(B,B.bi_buf),B.bi_buf=0,B.bi_valid=0):8<=B.bi_valid&&(B.pending_buf[B.pending++]=255&B.bi_buf,B.bi_buf>>=8,B.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,r,n){(function(i){!function(s,a){if(!s.setImmediate){var l,c,p,d,v=1,y={},E=!1,b=s.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(s);T=T&&T.setTimeout?T:s,l="[object process]"==={}.toString.call(s.process)?function(L){Lt.nextTick(function(){D(L)})}:function(){if(s.postMessage&&!s.importScripts){var L=!0,I=s.onmessage;return s.onmessage=function(){L=!1},s.postMessage("","*"),s.onmessage=I,L}}()?(d="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",C,!1):s.attachEvent("onmessage",C),function(L){s.postMessage(d+L,"*")}):s.MessageChannel?((p=new MessageChannel).port1.onmessage=function(L){D(L.data)},function(L){p.port2.postMessage(L)}):b&&"onreadystatechange"in b.createElement("script")?(c=b.documentElement,function(L){var I=b.createElement("script");I.onreadystatechange=function(){D(L),I.onreadystatechange=null,c.removeChild(I),I=null},c.appendChild(I)}):function(L){setTimeout(D,0,L)},T.setImmediate=function(L){"function"!=typeof L&&(L=new Function(""+L));for(var I=new Array(arguments.length-1),H=0;H<I.length;H++)I[H]=arguments[H+1];return y[v]={callback:L,args:I},l(v),v++},T.clearImmediate=k}function k(L){delete y[L]}function D(L){if(E)setTimeout(D,0,L);else{var I=y[L];if(I){E=!0;try{!function(H){var M=H.callback,J=H.args;switch(J.length){case 0:M();break;case 1:M(J[0]);break;case 2:M(J[0],J[1]);break;case 3:M(J[0],J[1],J[2]);break;default:M.apply(a,J)}}(I)}finally{k(L),E=!1}}}}function C(L){L.source===s&&"string"==typeof L.data&&0===L.data.indexOf(d)&&D(+L.data.slice(d.length))}}(typeof self>"u"?void 0===i?this:i:self)}).call(this,typeof Mt<"u"?Mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}(Kn);const Ir=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),vs=Ir?Promise.resolve().then(function(){return Ts}):Promise.resolve().then(function(){return Is});function tn(){return tn=(0,N.A)(function*(...h){return(yield vs).default(...h)}),tn.apply(this,arguments)}Ir?Promise.resolve().then(function(){return xs}):Promise.resolve().then(function(){return Rs});const _s=Ir?Promise.resolve().then(function(){return Ss}):Promise.resolve().then(function(){return Ns});function rn(){return rn=(0,N.A)(function*(...h){return(yield _s).default(...h)}),rn.apply(this,arguments)}const Es=function(){var h=(0,N.A)(function*(t){const e=yield t.getFile();return e.handle=t,e});return function(e){return h.apply(this,arguments)}}();var ks=function(){var h=(0,N.A)(function*(t=[{}]){Array.isArray(t)||(t=[t]);const e=[];t.forEach((i,s)=>{e[s]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(a=>{e[s].accept[a]=i.extensions||[]}):e[s].accept["*/*"]=i.extensions||[]});const r=yield window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),n=yield Promise.all(r.map(Es));return t[0].multiple?n:n[0]});return function(){return h.apply(this,arguments)}}(),Ts={__proto__:null,default:ks};function jr(h){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then(function(n){return{value:n,done:r}})}return jr=function(e){this.s=e,this.n=e.next},jr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new jr(h)}const Yn=function(){var h=(0,N.A)(function*(t,e,r=t.name,n){const i=[],s=[];var a,l=!1,c=!1;try{for(var p,d=function(v){var y,E,b,T=2;for(typeof Symbol<"u"&&(E=Symbol.asyncIterator,b=Symbol.iterator);T--;){if(E&&null!=(y=v[E]))return y.call(v);if(b&&null!=(y=v[b]))return new jr(y.call(v));E="@@asyncIterator",b="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());l=!(p=yield d.next()).done;l=!1){const v=p.value,y=`${r}/${v.name}`;"file"===v.kind?s.push(v.getFile().then(E=>(E.directoryHandle=t,E.handle=v,Object.defineProperty(E,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>y})))):"directory"!==v.kind||!e||n&&n(v)||i.push(Yn(v,e,y,n))}}catch(v){c=!0,a=v}finally{try{l&&null!=d.return&&(yield d.return())}finally{if(c)throw a}}return[...(yield Promise.all(i)).flat(),...yield Promise.all(s)]});return function(e,r){return h.apply(this,arguments)}}();var As=function(){var h=(0,N.A)(function*(t={}){t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=yield window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(yield(yield e.values()).next()).done?[e]:Yn(e,t.recursive,void 0,t.skipDirectory)});return function(){return h.apply(this,arguments)}}(),xs={__proto__:null,default:As},Ps=function(){var h=(0,N.A)(function*(t,e=[{}],r=null,n=!1,i=null){Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let a=null;if(t instanceof Blob&&t.type?a=t.type:t.headers&&t.headers.get("content-type")&&(a=t.headers.get("content-type")),e.forEach((p,d)=>{s[d]={description:p.description||"Files",accept:{}},p.mimeTypes?(0===d&&a&&p.mimeTypes.push(a),p.mimeTypes.map(v=>{s[d].accept[v]=p.extensions||[]})):a?s[d].accept[a]=p.extensions||[]:s[d].accept["*/*"]=p.extensions||[]}),r)try{yield r.getFile()}catch(p){if(r=null,n)throw p}const l=r||(yield window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}));!r&&i&&i(l);const c=yield l.createWritable();return"stream"in t?(yield t.stream().pipeTo(c),l):"body"in t?(yield t.body.pipeTo(c),l):(yield c.write(yield t),yield c.close(),l)});return function(e){return h.apply(this,arguments)}}(),Ss={__proto__:null,default:Ps},Ds=function(){var h=(0,N.A)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),new Promise((e,r)=>{const n=document.createElement("input");n.type="file";const i=[...t.map(c=>c.mimeTypes||[]),...t.map(c=>c.extensions||[])].join();n.multiple=t[0].multiple||!1,n.accept=i||"",n.style.display="none",document.body.append(n);const s=c=>{"function"==typeof a&&a(),e(c)},a=t[0].legacySetup&&t[0].legacySetup(s,()=>a(r),n),l=()=>{window.removeEventListener("focus",l),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",l)}),n.addEventListener("change",()=>{window.removeEventListener("focus",l),n.remove(),s(n.multiple?Array.from(n.files):n.files[0])}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})});return function(){return h.apply(this,arguments)}}(),Is={__proto__:null,default:Ds},js=function(){var h=(0,N.A)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,r)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const i=a=>{"function"==typeof s&&s(),e(a)},s=t[0].legacySetup&&t[0].legacySetup(i,()=>s(r),n);n.addEventListener("change",()=>{let a=Array.from(n.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(a=a.filter(l=>l.webkitRelativePath.split("/").every(c=>!t[0].skipDirectory({name:c,kind:"directory"})))):a=a.filter(l=>2===l.webkitRelativePath.split("/").length),i(a)}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})});return function(){return h.apply(this,arguments)}}(),Rs={__proto__:null,default:js},Os=function(){var h=(0,N.A)(function*(t,e={}){Array.isArray(e)&&(e=e[0]);const r=document.createElement("a");let n=t;var a;"body"in t&&(n=yield(a=(0,N.A)(function*(l,c){const p=l.getReader(),d=new ReadableStream({start:E=>function(){var b=(0,N.A)(function*(){return p.read().then(({done:k,value:D})=>{if(!k)return E.enqueue(D),T();E.close()})});function T(){return b.apply(this,arguments)}return T}()()}),v=new Response(d),y=yield v.blob();return p.releaseLock(),new Blob([y],{type:c})}),function(l,c){return a.apply(this,arguments)})(t.body,t.headers.get("content-type"))),r.download=e.fileName||"Untitled",r.href=URL.createObjectURL(yield n);const i=()=>{"function"==typeof s&&s()},s=e.legacySetup&&e.legacySetup(i,()=>s(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),i()}),r.click(),null});return function(e){return h.apply(this,arguments)}}(),Ns={__proto__:null,default:Os};const Fs=(()=>{let h=class{constructor(t){(0,Kt.r)(this,t),this.importProgress=(0,Kt.c)(this,"jeepSqliteImportProgress",7),this.exportProgress=(0,Kt.c)(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=(0,Kt.c)(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=(0,Kt.c)(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=(0,Kt.c)(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(t){this.innerAutoSave=t}parseTypeOrm(t){this.innerTypeOrm=t}parseWasmPath(t){this.innerWasmPath=t}parsePickText(t){this.innerPickText=t}parseSaveText(t){this.innerSaveText=t}parseButtonOptions(t){this.innerButtonOptions=JSON.parse(t);const e=Object.keys(this.innerButtonOptions);for(const r of e)switch(r){case"top":this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[r]);break;case"right":this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[r]);break;case"fontSize":this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[r]);break;case"padding":this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[r]);break;case"backgroundColor":this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[r]);break;case"color":this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[r])}}echo(t){return(0,N.A)(function*(){return t})()}createConnection(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=t.version?t.version:1,s=!!t.readonly&&t.readonly;try{return yield e._createConnection(n,i,s),Promise.resolve()}catch(a){return Promise.reject(a)}})()}isConnection(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly,s=yield e._isConnection(n,i);return Promise.resolve(s)})()}closeConnection(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{return yield e._closeConnection(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}open(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{return yield e._open(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}close(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{return yield e._close(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}getVersion(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{const s=yield e._getVersion(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}beginTransaction(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database;if(t.readonly&&t.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=yield e._beginTransaction(n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}commitTransaction(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database;if(t.readonly&&t.readonly)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{const s=yield e._commitTransaction(n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}rollbackTransaction(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database;if(t.readonly&&t.readonly)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=yield e._rollbackTransaction(n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}isTransactionActive(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database;if(t.readonly&&t.readonly)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{const s=yield e._isTransactionActive(n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}execute(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);let r=Object.keys(t);if(!r.includes("database"))return Promise.reject("Must provide a database name");if(!r.includes("statements")||0===t.statements.length)return Promise.reject("Must provide raw SQL statements");const n=t.database,i=t.statements;let s=!0;const a=!!t.readonly&&t.readonly;r.includes("transaction")&&(s=t.transaction);try{const l=yield e._execute(n,i,s,a);return Promise.resolve(l)}catch(l){return Promise.reject(l)}})()}executeSet(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);let r=Object.keys(t);if(!r.includes("database"))return Promise.reject("Must provide a database name");if(!r.includes("set")||0===t.set.length)return Promise.reject("Must provide a non-empty set of SQL statements");const n=t.database,i=t.set;let s=!0;r.includes("transaction")&&(s=t.transaction);const a=!!t.readonly&&t.readonly,l=t.returnMode?t.returnMode:"no";try{const c=yield e._executeSet(n,i,s,a,l);return Promise.resolve(c)}catch(c){return Promise.reject(c)}})()}run(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);let r=Object.keys(t);if(!r.includes("database"))return Promise.reject("Must provide a database name");if(!r.includes("statement")||0===t.statement.length)return Promise.reject("Must provide a run statement");const n=t.database,i=t.statement;let s=[];r.includes("values")&&(s=t.values.length>0?t.values:[]);let a=!0;r.includes("transaction")&&(a=t.transaction);const l=!!t.readonly&&t.readonly,c=t.returnMode?t.returnMode:"no";try{const p=yield e._run(n,i,s,a,l,c);return Promise.resolve(p)}catch(p){return Promise.reject(p)}})()}query(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);let r=Object.keys(t);if(!r.includes("database"))return Promise.reject("Must provide a database name");if(!r.includes("statement")||0===t.statement.length)return Promise.reject("Must provide a query statement");let n=[];r.includes("values")&&(n=t.values.length>0?t.values:[]);const i=t.database,s=t.statement,a=!!t.readonly&&t.readonly;try{const l=yield e._query(i,s,n,a);return Promise.resolve(l)}catch(l){return Promise.reject(l)}})()}getTableList(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{const s=yield e._getTableList(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}isDBExists(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{const s=yield e._isDBExists(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}isDBOpen(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{const s=yield e._isDBOpen(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}deleteDatabase(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{return yield e._deleteDatabase(n,i)}catch(s){return Promise.reject(s)}})()}isStoreOpen(){var t=this;return(0,N.A)(function*(){return Promise.resolve(t.isStore)})()}copyFromAssets(t){var e=this;return(0,N.A)(function*(){let r;if(r=null==t||!Object.keys(t).includes("overwrite")||t.overwrite,!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);try{return yield e._copyFromAssets(r),Promise.resolve()}catch(n){return Promise.reject(n)}})()}isTableExists(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);const r=Object.keys(t);if(!r.includes("database"))return Promise.reject("Must provide a database name");const n=t.database;if(!r.includes("table"))return Promise.reject("Must provide a table name");const i=t.table,s=!!t.readonly&&t.readonly;try{const a=yield e._isTableExists(n,i,s);return Promise.resolve(a)}catch(a){return Promise.reject(a)}})()}createSyncTable(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{const s=yield e._createSyncTable(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}getSyncDate(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{const s=yield e._getSyncDate(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}setSyncDate(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);let r=Object.keys(t);if(!r.includes("database"))return Promise.reject("Must provide a database name");if(!r.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const n=t.database,i=t.syncdate,s=!!t.readonly&&t.readonly;try{return yield e._setSyncDate(n,i,s),Promise.resolve()}catch(a){return Promise.reject(a)}})()}isJsonValid(t){var e=this;return(0,N.A)(function*(){if(!Object.keys(t).includes("jsonstring"))return Promise.reject("Must provide a json object");const n=t.jsonstring;try{const i=yield e._isJsonValid(n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}importFromJson(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("jsonstring"))return Promise.reject("Must provide a json object");const n=t.jsonstring;try{const i=yield e._importFromJson(n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}exportToJson(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);const r=Object.keys(t);if(!r.includes("database"))return Promise.reject("Must provide a database name");if(!r.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const n=t.database,i=t.jsonexportmode,s=!!t.readonly&&t.readonly;try{const a=yield e._exportToJson(n,i,s);return Promise.resolve(a)}catch(a){return Promise.reject(a)}})()}deleteExportedRows(t){var e=this;return(0,N.A)(function*(){if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{return yield e._deleteExportedRows(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}addUpgradeStatement(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);let r=Object.keys(t);if(!r.includes("database"))return Promise.reject("Must provide a database name");if(!r.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const n=t.database,i=t.upgrade;for(const s of i){const a=Object.keys(s);if(!a.includes("toVersion")||!a.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if("number"!=typeof s.toVersion)return Promise.reject("upgrade.toVersion must be a number");if(e._versionUpgrades[n])e._versionUpgrades[n][s.toVersion]=s;else{const l={};l[s.toVersion]=s,e._versionUpgrades[n]=l}}return Promise.resolve()})()}isDatabase(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database;try{const i=yield e._isDatabase(n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}getDatabaseList(){var t=this;return(0,N.A)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);try{const e=yield t._getDatabaseList();return Promise.resolve(e)}catch(e){return Promise.reject(e)}})()}checkConnectionsConsistency(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);const r=Object.keys(t);if(!r.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const n=t.dbNames;if(!r.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const i=t.openModes;try{const s=yield e._checkConnectionsConsistency(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}saveToStore(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database,i=!!t.readonly&&t.readonly;try{return yield e._saveToStore(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}saveToLocalDisk(t){var e=this;return(0,N.A)(function*(){if(!Object.keys(t).includes("database"))return Promise.reject("Must provide a database name");const n=t.database;try{return yield e._saveToLocalDisk(n),Promise.resolve()}catch(i){return Promise.reject(i)}})()}getFromLocalDiskToStore(t){var e=this;return(0,N.A)(function*(){const r=!t.overwrite||t.overwrite;console.log(Ir?"Using the File System Access API.":"Using the fallback implementation.");try{return yield e._getFromLocalDiskToStore(r),Promise.resolve()}catch(n){return Promise.reject(n)}})()}getFromHTTPRequest(t){var e=this;return(0,N.A)(function*(){if(!e.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${e.storeName} is not opened`);if(!Object.keys(t).includes("url"))return Promise.reject("Must provide an url");const n=t.url,i=!t.overwrite||t.overwrite;try{return yield e._getFromHTTPRequest(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}connectedCallback(){this.parseAutoSave(void 0!==this.autoSave&&this.autoSave),this.parseTypeOrm(void 0!==this.typeOrm&&this.typeOrm),this.parseWasmPath(void 0!==this.wasmPath?this.wasmPath:"/assets"),this.parseSaveText(void 0!==this.saveText?this.saveText:"Save"),this.parsePickText(void 0!==this.pickText?this.pickText:"Pick a database"),void 0!==this.buttonOptions&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(t=>{this.isStore=t})}componentWillLoad(){}componentDidLoad(){var t=this;return(0,N.A)(function*(){t._element=t.el.shadowRoot,t.isStore||console.log("jeep-sqlite isStore = false")})()}_createConnection(t,e,r){var n=this;return(0,N.A)(function*(){let i={};const s=Object.keys(n._versionUpgrades);0!==s.length&&s.includes(t)&&(i=n._versionUpgrades[t]);const a=Object.keys(n._dbDict);let l;try{return l=a.length>0&&(a.includes("RW_"+t)||a.includes("RO_"+t))?a.includes("RW_"+t)?n._dbDict["RW_"+t]:n._dbDict["RO_"+t]:new Gn(t+"SQLite.db",e,i,n.store,n.innerAutoSave,n.innerWasmPath),n._dbDict[r?"RO_"+t:"RW_"+t]=l,Promise.resolve()}catch(c){return Promise.reject(c.message?c.message:c)}})()}_isConnection(t,e){var r=this;return(0,N.A)(function*(){return Object.keys(r._dbDict).includes(e?"RO_"+t:"RW_"+t)?{result:!0}:{result:!1}})()}_closeConnection(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+t:"RW_"+t;if(!n.includes(i))return Promise.reject(`CloseConnection: No available connection for ${t}`);const s=r._dbDict[i];try{return s.isDBOpen()&&(yield s.close()),delete r._dbDict[i],Promise.resolve()}catch(a){return Promise.reject(`CloseConnection: ${a.message?a.message:a}`)}})()}_open(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+t:"RW_"+t;if(!n.includes(i))return Promise.reject(`Open: No available connection for ${t}`);const s=r._dbDict[i];try{return yield s.open(),Promise.resolve()}catch(a){return Promise.reject(`Open: ${a.message?a.message:a}`)}})()}_close(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+t:"RW_"+t;if(!n.includes(i))return Promise.reject(`Close: No available connection for ${t}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`Close: ${t} database not opened`);try{return yield s.close(),Promise.resolve()}catch(a){return Promise.reject(`Close: ${a.message?a.message:a}`)}})()}_saveToStore(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+t:"RW_"+t;if(!n.includes(i))return Promise.reject(`SaveToStore: No available connection for ${t}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`SaveToStore: ${t} database not opened`);try{return yield s.saveToStore(),Promise.resolve()}catch(a){return Promise.reject(`SaveToStore: ${a.message?a.message:a}`)}})()}_saveToLocalDisk(t){var e=this;return(0,N.A)(function*(){try{const r=Object.keys(e._dbDict),n="RW_"+t;if(!r.includes(n))return Promise.reject(`SaveToLocalDisk: No available connection for ${t}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`SaveToLocalDisk: ${t} database not opened`);const s=yield i.exportDB();e._blob=yield e.uint2blob(s);const a=`${t}SQLite.db`;return e._opts={fileName:a,extensions:[".db"],startIn:"documents"},e._buttonSaveEl=document.createElement("button"),e._buttonSaveEl.setAttribute("id","saveButton"),e._buttonSaveEl.innerHTML=`${e.innerSaveText} ${a}`,e._element.appendChild(e._buttonSaveEl),e._buttonSaveEl.addEventListener("click",e.saveFile.bind(e)),Promise.resolve()}catch(r){return Promise.reject(`SaveToLocalDisk: ${r.message?r.message:r}`)}})()}_getFromLocalDiskToStore(t){var e=this;return(0,N.A)(function*(){return e._buttonPickEl=document.createElement("button"),e._buttonPickEl.setAttribute("id","pickButton"),e._buttonPickEl.innerHTML=`${e.innerPickText}`,e._element.appendChild(e._buttonPickEl),e._buttonPickEl.addEventListener("click",e.pickDatabase.bind(e)),e._overwrite=t,Promise.resolve()})()}pickDatabase(){var t=this;return(0,N.A)(function*(){try{const e=yield function bs(){return tn.apply(this,arguments)}({extensions:[".db"]});let r=yield t.blob2uint(e);const n=t.removePathSuffix(e.name),i=t.setPathSuffix(e.name);(yield $e.isDBInStore(i,t.store))?t._overwrite?(yield $e.removeDBFromStore(i,t.store),yield $e.saveDBToStore(i,r,t.store)):t.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${i}`}):yield $e.saveDBToStore(i,r,t.store),t._element.removeChild(t._buttonPickEl),t.PickDatabaseEnded.emit({db_name:n})}catch(e){t.PickDatabaseEnded.emit({message:e.message?e.message:e})}})()}saveFile(){var t=this;return(0,N.A)(function*(){try{yield function ws(){return rn.apply(this,arguments)}(t._blob,[t._opts]);const e=t._opts.fileName;t._element.removeChild(t._buttonSaveEl),t.SaveDatabaseEnded.emit({db_name:e})}catch(e){t.SaveDatabaseEnded.emit({message:e.message?e.message:e})}})()}_getVersion(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+t:"RW_"+t;if(!n.includes(i))return Promise.reject(`Open: No available connection for ${t}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`GetVersion: ${t} database not opened`);try{const a=yield s.getVersion(),l={};return l.version=a,Promise.resolve(l)}catch(a){return Promise.reject(`Open: ${a.message?a.message:a}`)}})()}_beginTransaction(t){var e=this;return(0,N.A)(function*(){const r=Object.keys(e._dbDict),n="RW_"+t;if(!r.includes(n))return Promise.reject(`BeginTransaction: No available connection for ${t}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`BeginTransaction: ${t} database not opened`);let s={};return s={changes:{changes:yield i.beginTransaction()}},Promise.resolve(s)})()}_commitTransaction(t){var e=this;return(0,N.A)(function*(){const r=Object.keys(e._dbDict),n="RW_"+t;if(!r.includes(n))return Promise.reject(`CommitTransaction: No available connection for ${t}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`CommitTransaction: ${t} database not opened`);let s={};return s={changes:{changes:yield i.commitTransaction()}},Promise.resolve(s)})()}_rollbackTransaction(t){var e=this;return(0,N.A)(function*(){const r=Object.keys(e._dbDict),n="RW_"+t;if(!r.includes(n))return Promise.reject(`RollbackTransaction: No available connection for ${t}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`RollbackTransaction: ${t} database not opened`);let s={};return s={changes:{changes:yield i.rollbackTransaction()}},Promise.resolve(s)})()}_isTransactionActive(t){var e=this;return(0,N.A)(function*(){const r=Object.keys(e._dbDict),n="RW_"+t;if(!r.includes(n))return Promise.reject(`IsTransactionActive: No available connection for ${t}`);const i=e._dbDict[n];if(!i.isDBOpen())return Promise.reject(`IsTransactionActive: ${t} database not opened`);let s={};return s={result:i.isTransActive()},Promise.resolve(s)})()}_execute(t,e,r,n){var i=this;return(0,N.A)(function*(){const s=Object.keys(i._dbDict),a="RW_"+t;if(!s.includes(a))return Promise.reject(`Execute: No available connection for ${t}`);const l=i._dbDict[a];if(!l.isDBOpen())return Promise.reject(`Execute: ${t} database not opened`);if(n)return Promise.reject("Execute: not allowed in read-only mode");let c={};const p=e.substring(0,6);if(i.innerAutoSave&&"COMMIT"===p&&i.innerTypeOrm)return c={changes:{changes:0}},Promise.resolve(c);try{return c={changes:{changes:yield l.executeSQL(e,r)}},Promise.resolve(c)}catch(d){return Promise.reject(`Execute: ${d.message?d.message:d}`)}})()}_executeSet(t,e,r,n,i){var s=this;return(0,N.A)(function*(){const a=Object.keys(s._dbDict),l="RW_"+t;if(!a.includes(l))return Promise.reject(`ExecuteSet: No available connection for ${t}`);const c=s._dbDict[l];if(!c.isDBOpen())return Promise.reject(`ExecuteSet: ${t} database not opened`);if(n)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const p of e)if(!("statement"in p)||!("values"in p))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const p=yield c.execSet(e,r,i);return Promise.resolve({changes:{changes:p.changes,lastId:p.lastId,values:p.values}})}catch(p){return Promise.reject(`ExecuteSet: ${p.message?p.message:p}`)}})()}_run(t,e,r,n,i,s){var a=this;return(0,N.A)(function*(){const l=Object.keys(a._dbDict),c="RW_"+t;if(!l.includes(c))return Promise.reject(`Run: No available connection for ${t}`);const p=a._dbDict[c];if(!p.isDBOpen())return Promise.reject(`Run: ${t} database not opened`);if(i)return Promise.reject("Run: not allowed in read-only mode");let d={};const v=e.substring(0,6);if(a.innerAutoSave&&"COMMIT"===v)return d={changes:{changes:0}},Promise.resolve(d);try{const y=yield p.runSQL(e,r,n,s);return d={changes:{changes:y.changes,lastId:y.lastId,values:y.values}},Promise.resolve(d)}catch(y){return Promise.reject(`Run: ${y.message?y.message:y}`)}})()}_query(t,e,r,n){var i=this;return(0,N.A)(function*(){const s=Object.keys(i._dbDict),a=n?"RO_"+t:"RW_"+t;if(!s.includes(a))return Promise.reject(`Query: No available connection for ${t}`);const l=i._dbDict[a];if(!l.isDBOpen())return Promise.reject(`Query: ${t} database not opened`);let c=[];const p=e.substring(0,6);if(i.innerAutoSave&&"COMMIT"===p)return Promise.resolve({values:c});try{return c=yield l.selectSQL(e,r),Promise.resolve({values:c})}catch(d){return Promise.reject(`Query failed: ${d.message?d.message:d}`)}})()}_getTableList(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+t:"RW_"+t;if(!n.includes(i))return Promise.reject(`GetTableList: No available connection for ${t}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`GetTableList: ${t} database not opened`);let a=[];try{return a=yield s.getTableNames(),Promise.resolve({values:a})}catch(l){return Promise.reject(`GetTableList failed: ${l.message?l.message:l}`)}})()}_isDBExists(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+t:"RW_"+t;if(!n.includes(i))return Promise.reject(`IsDBExists: No available connection for ${t}`);const s=r._dbDict[i];try{const l={result:yield s.isDBExists(t+"SQLite.db")};return Promise.resolve(l)}catch(a){return Promise.reject(`IsDBExists: ${a.message?a.message:a}`)}})()}_isDBOpen(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+t:"RW_"+t;if(!n.includes(i))return Promise.reject(`IsDBOpen: No available connection for ${t}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.resolve({result:!1});try{const l={result:yield s.isDBOpen(t+"SQLite.db")};return Promise.resolve(l)}catch(a){return Promise.reject(`IsDBOpen: ${a.message?a.message:a}`)}})()}_deleteDatabase(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i="RW_"+t;if(!n.includes(i))return Promise.reject(`DeleteDatabase: No available connection for ${t}`);const s=r._dbDict[i];if(e)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return yield s.deleteDB(t+"SQLite.db"),Promise.resolve()}catch(a){return Promise.reject(`DeleteDatabase: ${a.message?a.message:a}`)}})()}_isTableExists(t,e,r){var n=this;return(0,N.A)(function*(){const i=Object.keys(n._dbDict),s=r?"RO_"+t:"RW_"+t;if(!i.includes(s))return Promise.reject(`IsTableExists: No available connection for ${t}`);const a=n._dbDict[s];if(!a.isDBOpen())return Promise.reject(`IsTableExists: ${t} database not opened`);try{const c={result:yield a.isTable(e)};return Promise.resolve(c)}catch(l){return Promise.reject(`IsTableExists: ${l.message?l.message:l}`)}})()}_createSyncTable(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i="RW_"+t;if(!n.includes(i))return Promise.reject(`CreateSyncTable: No available connection for ${t}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`CreateSyncTable: ${t} database not opened`);if(e)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const a=yield s.createSyncTable();return Promise.resolve({changes:{changes:a}})}catch(a){return Promise.reject(`CreateSyncTable: ${a.message?a.message:a}`)}})()}_getSyncDate(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i=e?"RO_"+t:"RW_"+t;if(!n.includes(i))return Promise.reject(`GetSyncDate: No available connection for ${t}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`GetSyncDate: ${t} database not opened`);try{const a=yield s.getSyncDate();return Promise.resolve({syncDate:a})}catch(a){return Promise.reject(`GetSyncDate: ${a.message?a.message:a}`)}})()}_setSyncDate(t,e,r){var n=this;return(0,N.A)(function*(){const i=Object.keys(n._dbDict),s="RW_"+t;if(!i.includes(s))return Promise.reject(`SetSyncDate: No available connection for ${t}`);const a=n._dbDict[s];if(!a.isDBOpen())return Promise.reject(`SetSyncDate: ${t} database not opened`);if(r)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const l=yield a.setSyncDate(e);return l.result?Promise.resolve():Promise.reject(`SetSyncDate: ${l.message}`)}catch(l){return Promise.reject(`SetSyncDate: ${l.message?l.message:l}`)}})()}_isJsonValid(t){return(0,N.A)(function*(){const e=JSON.parse(t);return(yield Ge.isJsonSQLite(e))?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")})()}_importFromJson(t){var e=this;return(0,N.A)(function*(){var r,n;const i=JSON.parse(t);if(!(yield Ge.isJsonSQLite(i)))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const a=i,l=`${a.database}SQLite.db`,c=null!==(r=a.version)&&void 0!==r?r:1,p=a.mode,d=null!==(n=a.overwrite)&&void 0!==n&&n,v=new Gn(l,c,{},e.store,e.innerAutoSave,e.innerWasmPath);try{d&&"full"===p&&$e.isDBInStore(l,e.store)&&(yield $e.removeDBFromStore(l,e.store)),yield v.open();const y=yield v.getTableNames();if("full"===p&&y.length>0){const b=yield v.getVersion();if(c<b)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${b}`);if(b===c)return Promise.resolve({changes:{changes:0}})}const E=yield v.importJson(a,e.importProgress);return yield v.close(),Promise.resolve({changes:{changes:E}})}catch(y){return Promise.reject(`ImportFromJson: ${y.message?y.message:y}`)}})()}_exportToJson(t,e,r){var n=this;return(0,N.A)(function*(){const i=Object.keys(n._dbDict),s=r?"RO_"+t:"RW_"+t;if(!i.includes(s))return Promise.reject(`ExportToJson: No available connection for ${t}`);const a=n._dbDict[s];if(!a.isDBOpen())return Promise.reject(`ExportToJson: ${t} database not opened`);try{const l=yield a.exportJson(e,n.exportProgress);return Object.keys(l).includes("message")?Promise.reject(`ExportToJson: ${l.message}`):Promise.resolve({export:l})}catch(l){return Promise.reject(`ExportToJson: ${l.message?l.message:l}`)}})()}_deleteExportedRows(t,e){var r=this;return(0,N.A)(function*(){const n=Object.keys(r._dbDict),i="RW_"+t;if(!n.includes(i))return Promise.reject(`DeleteExportedRows: No available connection for ${t}`);const s=r._dbDict[i];if(!s.isDBOpen())return Promise.reject(`DeleteExportedRows: ${t} database not opened`);if(e)return Promise.reject("DeleteExportedRows: not allowed in read-only mode");try{yield s.deleteExportedRows()}catch(a){return Promise.reject(`DeleteExportedRows: ${a.message?a.message:a}`)}})()}_copyFromAssets(t){var e=this;return(0,N.A)(function*(){const r=yield e.loadJSON("/assets/databases/databases.json");if(null==r)return Promise.reject("CopyFromAssets: no databases.json file in /assets/databases folder");if(e.databaseList=JSON.parse(r),!Object.keys(e.databaseList).includes("databaseList"))return Promise.reject("CopyFromAssets: no key databaseList in databases.json");try{for(const i of e.databaseList.databaseList)".db"===i.substring(i.length-3)&&(yield e.copyDatabase(`/assets/databases/${i}`,t)),".zip"===i.substring(i.length-4)&&(yield e.unzipDatabase(`/assets/databases/${i}`,t));return Promise.resolve()}catch(i){return Promise.reject(`CopyFromAssets: ${i.message?i.message:i}`)}})()}_getFromHTTPRequest(t,e){var r=this;return(0,N.A)(function*(){try{let i;switch(r.getFileExtensionInUrl(t)){case"db":yield r.copyDatabase(t,e),i="db";break;case"zip":yield r.unzipDatabase(t,e),i="zip";break;default:i="Unknown file type in url."}return r.HTTPRequestEnded.emit({message:i}),Promise.resolve()}catch(n){return Promise.reject(`GetFromHTTPRequest: ${n.message?n.message:n}`)}})()}_isDatabase(t){var e=this;return(0,N.A)(function*(){try{const n={result:yield $e.isDBInStore(t+"SQLite.db",e.store)};return Promise.resolve(n)}catch(r){return Promise.reject(`IsDatabase: ${r.message?r.message:r}`)}})()}_getDatabaseList(){var t=this;return(0,N.A)(function*(){try{const r={values:yield $e.getDBListFromStore(t.store)};return Promise.resolve(r)}catch(e){return Promise.reject(`GetDatabaseList: ${e.message?e.message:e}`)}})()}_checkConnectionsConsistency(t,e){var r=this;return(0,N.A)(function*(){const n={result:!1},i=[];t.forEach((s,a)=>{i.push(`${e[a]}_${s}`)});try{let s=new Set(Object.keys(r._dbDict));const a=new Set(i);if(0===a.size)return yield r._resetDbDict(Object.keys(r._dbDict)),Promise.resolve(n);if(s.size<a.size)return yield r._resetDbDict(Object.keys(r._dbDict)),Promise.resolve(n);if(s.size>a.size){const l={};for(const c of s)if(!Array.from(a.keys()).includes(c)){let p=!1;"RO_"===c.substring(0,3)&&(p=!0),l.database=c.substring(3),l.readonly=p,yield r._closeConnection(l.database,l.readonly)}}return s=new Set(Object.keys(r._dbDict)),s.size===a.size&&0===(yield r.symmetricDifference(s,a)).size?(n.result=!0,Promise.resolve(n)):(yield r._resetDbDict(Object.keys(r._dbDict)),Promise.resolve(n))}catch(s){return Promise.reject(`CheckConnectionsConsistency: ${s.message?s.message:s}`)}})()}_resetDbDict(t){var e=this;return(0,N.A)(function*(){try{for(const r of t){const n={};let i=!1;"RO_"===r.substring(0,3)&&(i=!0),n.database=r.substring(3),n.readonly=i,yield e._closeConnection(n.database,n.readonly)}}catch(r){return Promise.reject(`ResetDbDict: ${r.message?r.message:r}`)}})()}symmetricDifference(t,e){return(0,N.A)(function*(){let r=new Set;t.forEach(i=>{r.add(i.substring(3))});let n=new Set;e.forEach(i=>{n.add(i.substring(3))});for(const i of n)r.has(i)?r.delete(i):r.add(i);return r})()}unzipDatabase(t,e){var r=this;return(0,N.A)(function*(){return new Promise((n,i)=>{var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onerror=()=>{i(new Error("unzipDatabase: failed"))},s.onload=()=>{Kn.exports.loadAsync(s.response).then(function(){var a=(0,N.A)(function*(l){const c=Object.keys(l.files);try{for(const p of c)yield r.retrieveDBFromZip(l.files,p,e);n()}catch(p){i(new Error(`unzipDatabase Error: ${p.message?p.message:p}`))}});return function(l){return a.apply(this,arguments)}}())},s.send()})})()}retrieveDBFromZip(t,e,r){var n=this;return(0,N.A)(function*(){return new Promise((i,s)=>{t[e].async("nodebuffer").then(function(){var a=(0,N.A)(function*(l){try{const c=new Uint8Array(l),p=n.setPathSuffix(e);(yield $e.isDBInStore(p,n.store))?r?(yield $e.removeDBFromStore(p,n.store),yield $e.saveDBToStore(p,c,n.store)):s(new Error(`retrieveDBFromZip: cannot overwrite ${p}`)):yield $e.saveDBToStore(p,c,n.store),i()}catch(c){s(new Error(`retrieveDBFromZip:: ${c.message?c.message:c}`))}});return function(l){return a.apply(this,arguments)}}())})})()}copyDatabase(t,e){var r=this;return(0,N.A)(function*(){return new Promise((n,i)=>{var a,s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onerror=()=>{i(new Error("CopyDatabase: failed"))},s.onload=()=>{a=new Uint8Array(s.response)},s.onloadend=(0,N.A)(function*(){const l=r.setPathSuffix(t);(yield $e.isDBInStore(l,r.store))?e?(yield $e.removeDBFromStore(l,r.store),yield $e.saveDBToStore(l,a,r.store)):i(new Error(`CopyDatabase Error: cannot overwrite ${l}`)):yield $e.saveDBToStore(l,a,r.store),n()}),s.send()})})()}loadJSON(t){return(0,N.A)(function*(){return new Promise((e,r)=>{var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",t,!0),n.onerror=()=>{r(new Error("LoadJSON: failed"))},n.onreadystatechange=function(){404==n.status&&e(null),4==n.readyState&&200==n.status&&e(n.responseText)},n.send(null)})})()}openStore(t,e){var r=this;return(0,N.A)(function*(){let n=!1;const i=r.setConfig(t,e);return r.store=Hn.createInstance(i),null!=r.store&&(r.storeName=t,n=!0),n})()}setConfig(t,e){return{name:t,storeName:e,driver:[Hn.INDEXEDDB],version:1}}removePathSuffix(t){return t.includes("SQLite.db")?t.split("SQLite.db")[0]:".db"===t.substring(t.length-3)?t.slice(0,t.lastIndexOf(".")):t}setPathSuffix(t){let e=t.slice(t.lastIndexOf("/")+1);return".db"===t.substring(t.length-3)&&(t.includes("SQLite.db")||(e=t.slice(t.lastIndexOf("/")+1,-3)+"SQLite.db")),e}blob2uint(t){return(0,N.A)(function*(){return new Response(t).arrayBuffer().then(e=>new Uint8Array(e))})()}uint2blob(t){return(0,N.A)(function*(){const e=new Blob([t.buffer]);return Promise.resolve(e)})()}getFileExtensionInUrl(t){const e=t.match(/\.([a-zA-Z0-9]+)(?:[\?#]|$)/);return e?e[1].toLowerCase():null}render(){}static get assetsDirs(){return["assets"]}get el(){return(0,Kt.g)(this)}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}};return h.style=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}",h})()}}]);