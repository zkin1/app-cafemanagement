"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:(y,m,a)=>{a.r(m),a.d(m,{LoginPageModule:()=>C});var u=a(177),g=a(9417),i=a(4742),d=a(5563),p=a(467),n=a(4438),h=a(9011);const f=()=>["/register"],M=[{path:"",component:(()=>{var e;class r{constructor(o,t,s){this.router=o,this.databaseService=t,this.toastController=s,this.showToast=!1,this.toastMessage="",this.email="",this.password=""}onSubmit(){var o=this;return(0,p.A)(function*(){if(o.email&&o.password)try{const t=yield o.databaseService.authenticateUser(o.email,o.password);console.log("Authentication response:",t),t?yield o.handleSuccessfulLogin(t):yield o.presentToast("Credenciales incorrectas. Por favor, intente de nuevo.")}catch(t){console.error("Error during login:",t),yield o.presentToast("Ocurri\xf3 un error durante el inicio de sesi\xf3n. Por favor, intente de nuevo.")}else yield o.presentToast("Por favor, ingrese email y contrase\xf1a.")})()}handleSuccessfulLogin(o){var t=this;return(0,p.A)(function*(){console.log("Usuario autenticado:",JSON.stringify(o));const s={id:o.UserID,username:o.Username,name:o.Name,email:o.Email,role:o.Role};console.log("Informaci\xf3n de usuario a guardar:",JSON.stringify(s)),localStorage.setItem("currentUser",JSON.stringify(s)),void 0!==o.UserID&&(yield t.databaseService.updateUserLastLogin(o.UserID)),yield t.presentToast(`Bienvenido, ${o.Name}!`),t.router.navigate(["/main"])})()}presentToast(o){var t=this;return(0,p.A)(function*(){(yield t.toastController.create({message:o,duration:2e3,position:"top"})).present()})()}forgotPassword(){this.presentToast("Se ha enviado un correo con instrucciones para recuperar tu contrase\xf1a.")}}return(e=r).\u0275fac=function(o){return new(o||e)(n.rXU(d.Ix),n.rXU(h.B),n.rXU(i.K_))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-login"]],decls:22,vars:7,consts:[[1,"ion-padding"],[1,"login-container"],[3,"ngSubmit"],["position","floating"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit"],[1,"forgot-password"],[1,"register-link",3,"routerLink"],["position","top","color","success",3,"isOpen","message","duration"]],template:function(o,t){1&o&&(n.j41(0,"ion-content",0)(1,"div",1)(2,"h1"),n.EFF(3,"Bienvenido"),n.k0s(),n.j41(4,"h2"),n.EFF(5,"Inicio de sesi\xf3n"),n.k0s(),n.j41(6,"form",2),n.bIt("ngSubmit",function(){return t.onSubmit()}),n.j41(7,"ion-item")(8,"ion-label",3),n.EFF(9,"Correo"),n.k0s(),n.j41(10,"ion-input",4),n.mxI("ngModelChange",function(l){return n.DH7(t.email,l)||(t.email=l),l}),n.k0s()(),n.j41(11,"ion-item")(12,"ion-label",3),n.EFF(13,"Contrase\xf1a"),n.k0s(),n.j41(14,"ion-input",5),n.mxI("ngModelChange",function(l){return n.DH7(t.password,l)||(t.password=l),l}),n.k0s()(),n.j41(15,"ion-button",6),n.EFF(16,"Iniciar sesi\xf3n"),n.k0s()(),n.j41(17,"a",7),n.EFF(18,"\xbfOlvidaste tu contrase\xf1a?"),n.k0s(),n.j41(19,"a",8),n.EFF(20,"Registrarse"),n.k0s()()(),n.nrm(21,"ion-toast",9)),2&o&&(n.R7$(10),n.R50("ngModel",t.email),n.R7$(4),n.R50("ngModel",t.password),n.R7$(5),n.Y8G("routerLink",n.lJ4(6,f)),n.R7$(2),n.Y8G("isOpen",t.showToast)("message",t.toastMessage)("duration",3e3))},dependencies:[g.qT,g.BC,g.cb,g.YS,g.vS,g.cV,i.Jm,i.W9,i.$w,i.uz,i.he,i.op,i.Gw,i.oY,d.Wk],styles:["[_nghost-%COMP%]{--ion-color-primary: #1c2833;--ion-color-primary-rgb: 74, 144, 226;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #417fc7;--ion-color-primary-tint: #5c9ce5}ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;padding:20px;color:#4a4a4a}.logo[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:40px}h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px;color:var(--ion-color-primary)}h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:30px;color:var(--ion-color-primary)}form[_ngcontent-%COMP%]{width:100%;max-width:400px}ion-item[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .1);--border-color: rgba(255, 255, 255, .5);--highlight-height: 0;border-radius:5px;margin-bottom:15px}ion-label[_ngcontent-%COMP%]{color:#4a4a4a;font-weight:500}ion-input[_ngcontent-%COMP%]{--padding-start: 10px;font-size:16px;--placeholder-color: #999;--placeholder-opacity: .8}ion-button[_ngcontent-%COMP%]{margin-top:30px;height:54px;font-size:18px;text-transform:none;--box-shadow: 0 4px 10px rgba(74, 144, 226, .3);--border-radius: 27px}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{margin-top:20px;color:var(--ion-color-primary-tint);font-size:16px;text-decoration:none;text-align:center;display:block}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 576px){.logo[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:30px}h1[_ngcontent-%COMP%]{font-size:2rem}h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:25px;color:var(--ion-color-primary-tint)}ion-button[_ngcontent-%COMP%]{font-size:16px;height:50px}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translate3d(0,30px,0)}to{opacity:1;transform:translateZ(0)}}.login-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out;animation-fill-mode:both}.login-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.login-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.login-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.login-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.login-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}"]}),r})()}];let P=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[d.iI.forChild(M),d.iI]}),r})(),C=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[u.MD,g.YN,i.bv,P,d.iI]}),r})()}}]);