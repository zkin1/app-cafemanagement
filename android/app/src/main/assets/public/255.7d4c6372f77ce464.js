"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[255],{255:(S,h,s)=>{s.r(h),s.d(h,{AdminPageModule:()=>v});var u=s(177),P=s(9417),e=s(4742),p=s(5563),g=s(467),t=s(4438),f=s(9011);function b(o,a){if(1&o&&(t.j41(0,"ion-item")(1,"ion-label"),t.EFF(2),t.k0s(),t.j41(3,"ion-note",4),t.EFF(4),t.k0s()()),2&o){const i=a.$implicit;t.R7$(2),t.JRh(i.name),t.R7$(2),t.SpI("",i.sales," unidades")}}function C(o,a){if(1&o&&(t.j41(0,"ion-item")(1,"ion-label"),t.EFF(2),t.k0s(),t.j41(3,"ion-note",4),t.EFF(4),t.nI1(5,"currency"),t.k0s()()),2&o){const i=a.$implicit;t.R7$(2),t.JRh(i.day),t.R7$(2),t.JRh(t.ii3(5,2,i.amount,"CLP","symbol-narrow","1.0-0"))}}const M=[{path:"",component:(()=>{var o;class a{constructor(n,r,c){this.databaseService=n,this.toastController=r,this.loadingController=c,this.totalSales=0,this.topProducts=[],this.dailySales=[]}ngOnInit(){var n=this;return(0,g.A)(function*(){yield n.loadStatistics()})()}loadStatistics(){var n=this;return(0,g.A)(function*(){const r=yield n.loadingController.create({message:"Cargando estad\xedsticas..."});yield r.present();try{const c=new Date,d=new Date;d.setDate(d.getDate()-30),n.totalSales=yield n.databaseService.calculateTotalSales(d.toISOString().split("T")[0],c.toISOString().split("T")[0]);const l=yield n.databaseService.getTopSellingProducts(5);n.topProducts=l.map(m=>({name:m.name,sales:m.totalSold})),n.dailySales=yield n.getDailySales(d,c)}catch(c){console.error("Error al cargar estad\xedsticas:",c),n.presentToast("Error al cargar estad\xedsticas. Por favor, intente de nuevo.")}finally{r.dismiss()}})()}getDailySales(n,r){var c=this;return(0,g.A)(function*(){const d=[];let l=new Date(n);for(;l<=r;){const m=yield c.databaseService.calculateTotalSales(l.toISOString().split("T")[0],l.toISOString().split("T")[0]);d.push({day:l.toLocaleDateString("es-ES",{weekday:"long"}),amount:m}),l.setDate(l.getDate()+1)}return d})()}presentToast(n){var r=this;return(0,g.A)(function*(){(yield r.toastController.create({message:n,duration:2e3,position:"top"})).present()})()}generateReport(){var n=this;return(0,g.A)(function*(){n.presentToast("Funcionalidad de generaci\xf3n de informe a\xfan no implementada")})()}}return(o=a).\u0275fac=function(n){return new(n||o)(t.rXU(f.B),t.rXU(e.K_),t.rXU(e.Xi))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-admin"]],decls:33,vars:8,consts:[["slot","start"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["expand","block","routerLink",""],["slot","end"]],template:function(n,r){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-menu-button"),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Dashboard"),t.k0s()()(),t.j41(6,"ion-content",1)(7,"h2"),t.EFF(8,"Estad\xedsticas de Ventas"),t.k0s(),t.j41(9,"ion-card")(10,"ion-card-header")(11,"ion-card-title"),t.EFF(12,"Ventas Totales"),t.k0s()(),t.j41(13,"ion-card-content")(14,"h1"),t.EFF(15),t.nI1(16,"currency"),t.k0s()()(),t.j41(17,"ion-card")(18,"ion-card-header")(19,"ion-card-title"),t.EFF(20,"Productos M\xe1s Vendidos"),t.k0s()(),t.j41(21,"ion-card-content")(22,"ion-list"),t.DNE(23,b,5,2,"ion-item",2),t.k0s()()(),t.j41(24,"ion-card")(25,"ion-card-header")(26,"ion-card-title"),t.EFF(27,"Ventas por D\xeda"),t.k0s()(),t.j41(28,"ion-card-content")(29,"ion-list"),t.DNE(30,C,6,7,"ion-item",2),t.k0s()()(),t.j41(31,"ion-button",3),t.EFF(32,"Generar reporte"),t.k0s()()),2&n&&(t.R7$(15),t.JRh(t.ii3(16,3,r.totalSales,"CLP","symbol-narrow","1.0-0")),t.R7$(8),t.Y8G("ngForOf",r.topProducts),t.R7$(7),t.Y8G("ngForOf",r.dailySales))},dependencies:[u.Sq,e.Jm,e.QW,e.b_,e.I9,e.ME,e.tN,e.W9,e.eU,e.uz,e.he,e.nf,e.MC,e.JI,e.BC,e.ai,e.N7,p.Wk,u.oe],styles:["[_nghost-%COMP%]{--color-background: #ebf5fb;--color-text: #1c2833;--color-light: #f7f9f9;--color-border: #E0D8D3;--color-button: #1c2833;--color-primary: #3498db;--color-success: #2ecc71;--color-warning: #f39c12;--color-danger: #e74c3c}ion-content[_ngcontent-%COMP%]{--background: var(--color-background)}h2[_ngcontent-%COMP%]{color:var(--color-text);font-size:24px;margin-bottom:20px;font-weight:600}ion-segment[_ngcontent-%COMP%]{margin-bottom:20px}.users-section[_ngcontent-%COMP%], .dashboard-section[_ngcontent-%COMP%]{background-color:var(--color-light);border-radius:10px;padding:20px;margin-bottom:20px;box-shadow:0 4px 6px #0000001a}form[_ngcontent-%COMP%]{margin-bottom:20px}form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--border-color: var(--color-border);--highlight-height: 0;margin-bottom:10px}form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:20px}ion-list[_ngcontent-%COMP%]{background:transparent}ion-list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]{background:var(--color-light);margin-bottom:10px;border-radius:5px;overflow:hidden}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--border-color: var(--color-border)}ion-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--color-text)}ion-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--color-text);opacity:.7}.chart-container[_ngcontent-%COMP%]{height:300px;margin-bottom:20px}@media (max-width: 576px){h2[_ngcontent-%COMP%]{font-size:20px}.chart-container[_ngcontent-%COMP%]{height:200px}}"]}),a})()}];let y=(()=>{var o;class a{}return(o=a).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[p.iI.forChild(M),p.iI]}),a})(),v=(()=>{var o;class a{}return(o=a).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[u.MD,P.YN,e.bv,y]}),a})()}}]);