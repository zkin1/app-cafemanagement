"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8618],{8618:(R,m,a)=>{a.r(m),a.d(m,{RegisterPageModule:()=>b});var h=a(177),g=a(9417),s=a(4742),d=a(5563),u=a(467),f=a(8359),p=a(1985),e=a(4438),P=a(9011);const y=()=>["/login"],M=[{path:"",component:(()=>{var o;class l{constructor(n,t,i,r){this.router=n,this.databaseService=t,this.toastController=i,this.loadingController=r,this.showToast=!1,this.toastMessage="",this.name="",this.email="",this.password="",this.confirmPassword="",this.subscriptions=new f.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}onSubmit(){var n=this;return(0,u.A)(function*(){if(!n.isFormValid())return void(yield n.presentToast("Por favor, complete todos los campos correctamente."));if(n.password!==n.confirmPassword)return void(yield n.presentToast("Las contrase\xf1as no coinciden."));const t=yield n.loadingController.create({message:"Registrando usuario..."});yield t.present();try{if(yield n.getUserByEmail(n.email))return void(yield n.presentToast("El email ya est\xe1 registrado. Por favor, use otro."));const r={Name:n.name,Email:n.email,Password:n.password,Role:"employee",Username:n.email};if(void 0===(yield n.createUser(r)))throw new Error("Failed to create user");yield n.presentToast("Registro exitoso. Por favor, inicie sesi\xf3n."),n.router.navigate(["/login"])}catch(i){console.error("Error during registration:",i),yield n.presentToast("Ocurri\xf3 un error durante el registro. Por favor, intente de nuevo.")}finally{yield t.dismiss()}})()}isFormValid(){return!!(this.name&&this.email&&this.password&&this.confirmPassword)}getUserByEmail(n){const t=this.databaseService.getUserByEmail(n);return t instanceof p.c?t.toPromise().then(i=>void 0!==i?i:null):Promise.resolve(void 0!==t?t:null)}createUser(n){const t=this.databaseService.createUser(n);return t instanceof p.c?t.toPromise():t}presentToast(n){var t=this;return(0,u.A)(function*(){yield(yield t.toastController.create({message:n,duration:2e3,position:"top"})).present()})()}}return(o=l).\u0275fac=function(n){return new(n||o)(e.rXU(d.Ix),e.rXU(P.B),e.rXU(s.K_),e.rXU(s.Xi))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-register"]],decls:24,vars:8,consts:[[1,"ion-padding"],[1,"register-container"],[3,"ngSubmit"],["position","floating"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit"],[1,"login-link",3,"routerLink"],["position","top","color","primary",3,"isOpen","message","duration"]],template:function(n,t){1&n&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"h1"),e.EFF(3,"\xdanete a nosotros"),e.k0s(),e.j41(4,"h2"),e.EFF(5,"Registro"),e.k0s(),e.j41(6,"form",2),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(7,"ion-item")(8,"ion-label",3),e.EFF(9,"Nombre"),e.k0s(),e.j41(10,"ion-input",4),e.mxI("ngModelChange",function(r){return e.DH7(t.name,r)||(t.name=r),r}),e.k0s()(),e.j41(11,"ion-item")(12,"ion-label",3),e.EFF(13,"Correo electr\xf3nico"),e.k0s(),e.j41(14,"ion-input",5),e.mxI("ngModelChange",function(r){return e.DH7(t.email,r)||(t.email=r),r}),e.k0s()(),e.j41(15,"ion-item")(16,"ion-label",3),e.EFF(17,"Contrase\xf1a"),e.k0s(),e.j41(18,"ion-input",6),e.mxI("ngModelChange",function(r){return e.DH7(t.password,r)||(t.password=r),r}),e.k0s()(),e.j41(19,"ion-button",7),e.EFF(20,"Registrarse"),e.k0s()(),e.j41(21,"a",8),e.EFF(22,"\xbfYa tienes una cuenta? Inicia sesi\xf3n"),e.k0s()()(),e.nrm(23,"ion-toast",9)),2&n&&(e.R7$(10),e.R50("ngModel",t.name),e.R7$(4),e.R50("ngModel",t.email),e.R7$(4),e.R50("ngModel",t.password),e.R7$(3),e.Y8G("routerLink",e.lJ4(7,y)),e.R7$(2),e.Y8G("isOpen",t.showToast)("message",t.toastMessage)("duration",3e3))},dependencies:[g.qT,g.BC,g.cb,g.YS,g.vS,g.cV,s.Jm,s.W9,s.$w,s.uz,s.he,s.op,s.Gw,s.oY,d.Wk],styles:["[_nghost-%COMP%]{--ion-color-primary: #1c2833;--ion-color-primary-rgb: 74, 144, 226;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #417fc7;--ion-color-primary-tint: #5c9ce5}ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)}.register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;padding:20px;color:#4a4a4a}h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px;color:var(--ion-color-primary)}h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:30px;color:var(--ion-color-primary)}form[_ngcontent-%COMP%]{width:100%;max-width:400px}ion-item[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .1);--border-color: rgba(255, 255, 255, .5);--highlight-height: 0;border-radius:5px;margin-bottom:15px}ion-label[_ngcontent-%COMP%]{color:#4a4a4a;font-weight:500}ion-input[_ngcontent-%COMP%]{--padding-start: 10px;font-size:16px;--placeholder-color: #999;--placeholder-opacity: .8}ion-button[_ngcontent-%COMP%]{margin-top:30px;height:54px;font-size:18px;text-transform:none;--box-shadow: 0 4px 10px rgba(74, 144, 226, .3);--border-radius: 27px}.login-link[_ngcontent-%COMP%]{margin-top:20px;color:var(--ion-color-primary-tint);font-size:16px;text-decoration:none;text-align:center;display:block}.login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 576px){h1[_ngcontent-%COMP%]{font-size:2rem}h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:25px;color:var(--ion-color-primary-tint)}ion-button[_ngcontent-%COMP%]{font-size:16px;height:50px}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translate3d(0,30px,0)}to{opacity:1;transform:translateZ(0)}}.register-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out;animation-fill-mode:both}.register-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.register-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.register-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.register-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.register-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}"]}),l})()}];let C=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[d.iI.forChild(M),d.iI]}),l})(),b=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.MD,g.YN,s.bv,C,d.iI]}),l})()}}]);