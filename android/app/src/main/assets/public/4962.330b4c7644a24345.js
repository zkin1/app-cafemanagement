"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4962],{4962:(I,C,d)=>{d.r(C),d.d(C,{CrudPageModule:()=>T});var g=d(177),s=d(9417),c=d(4742),h=d(5563),l=d(467),b=d(8359),p=d(1985),m=d(7673),_=d(6354),P=d(9437),t=d(4438),M=d(9011);function v(i,a){if(1&i){const r=t.RV6();t.j41(0,"div")(1,"h2"),t.EFF(2,"Agregar Producto"),t.k0s(),t.j41(3,"form",11),t.bIt("ngSubmit",function(){t.eBV(r);const n=t.XpG();return t.Njj(n.addProduct())}),t.j41(4,"ion-item")(5,"ion-label",12),t.EFF(6,"Nombre"),t.k0s(),t.j41(7,"ion-input",13),t.mxI("ngModelChange",function(n){t.eBV(r);const o=t.XpG();return t.DH7(o.currentProduct.imageURL,n)||(o.currentProduct.imageURL=n),t.Njj(n)}),t.k0s()(),t.j41(8,"ion-item")(9,"ion-label",12),t.EFF(10,"Descripci\xf3n"),t.k0s(),t.j41(11,"ion-textarea",14),t.mxI("ngModelChange",function(n){t.eBV(r);const o=t.XpG();return t.DH7(o.currentProduct.description,n)||(o.currentProduct.description=n),t.Njj(n)}),t.k0s()(),t.j41(12,"ion-item")(13,"ion-label",12),t.EFF(14,"Precio"),t.k0s(),t.j41(15,"ion-input",15),t.mxI("ngModelChange",function(n){t.eBV(r);const o=t.XpG();return t.DH7(o.currentProduct.price,n)||(o.currentProduct.price=n),t.Njj(n)}),t.k0s()(),t.j41(16,"ion-item")(17,"ion-label",12),t.EFF(18,"URL de la imagen"),t.k0s(),t.j41(19,"ion-input",13),t.mxI("ngModelChange",function(n){t.eBV(r);const o=t.XpG();return t.DH7(o.currentProduct.imageURL,n)||(o.currentProduct.imageURL=n),t.Njj(n)}),t.k0s()(),t.j41(20,"ion-button",16),t.EFF(21,"Agregar Producto"),t.k0s()()()}if(2&i){const r=t.XpG();t.R7$(7),t.R50("ngModel",r.currentProduct.imageURL),t.R7$(4),t.R50("ngModel",r.currentProduct.description),t.R7$(4),t.R50("ngModel",r.currentProduct.price),t.R7$(4),t.R50("ngModel",r.currentProduct.imageURL)}}function j(i,a){if(1&i){const r=t.RV6();t.j41(0,"ion-item")(1,"ion-thumbnail",0),t.nrm(2,"img",19),t.k0s(),t.j41(3,"ion-label")(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.nI1(10,"currency"),t.k0s()(),t.j41(11,"ion-button",20),t.bIt("click",function(){const n=t.eBV(r).$implicit,o=t.XpG(2);return t.Njj(o.editProduct(n))}),t.EFF(12,"Editar"),t.k0s()()}if(2&i){const r=a.$implicit;t.R7$(2),t.Y8G("src",r.imageURL,t.B4B)("alt",r.name),t.R7$(3),t.JRh(r.name),t.R7$(2),t.JRh(r.description),t.R7$(2),t.SpI("Precio: ",t.ii3(10,5,r.price,"CLP","symbol-narrow","1.0-0"),"")}}function F(i,a){if(1&i){const r=t.RV6();t.j41(0,"div")(1,"h2"),t.EFF(2,"Editar Producto"),t.k0s(),t.j41(3,"form",11),t.bIt("ngSubmit",function(){t.eBV(r);const n=t.XpG();return t.Njj(n.updateProduct())}),t.j41(4,"ion-item")(5,"ion-label",12),t.EFF(6,"Nombre"),t.k0s(),t.j41(7,"ion-input",17),t.mxI("ngModelChange",function(n){t.eBV(r);const o=t.XpG();return t.DH7(o.currentProduct.name,n)||(o.currentProduct.name=n),t.Njj(n)}),t.k0s()(),t.j41(8,"ion-item")(9,"ion-label",12),t.EFF(10,"Descripci\xf3n"),t.k0s(),t.j41(11,"ion-textarea",14),t.mxI("ngModelChange",function(n){t.eBV(r);const o=t.XpG();return t.DH7(o.currentProduct.description,n)||(o.currentProduct.description=n),t.Njj(n)}),t.k0s()(),t.j41(12,"ion-item")(13,"ion-label",12),t.EFF(14,"Precio"),t.k0s(),t.j41(15,"ion-input",15),t.mxI("ngModelChange",function(n){t.eBV(r);const o=t.XpG();return t.DH7(o.currentProduct.price,n)||(o.currentProduct.price=n),t.Njj(n)}),t.k0s()(),t.j41(16,"ion-item")(17,"ion-label",12),t.EFF(18,"URL de la imagen"),t.k0s(),t.j41(19,"ion-input",13),t.mxI("ngModelChange",function(n){t.eBV(r);const o=t.XpG();return t.DH7(o.currentProduct.imageURL,n)||(o.currentProduct.imageURL=n),t.Njj(n)}),t.k0s()(),t.j41(20,"ion-button",16),t.EFF(21,"Actualizar Producto"),t.k0s()(),t.j41(22,"ion-list"),t.DNE(23,j,13,10,"ion-item",18),t.k0s()()}if(2&i){const r=t.XpG();t.R7$(7),t.R50("ngModel",r.currentProduct.name),t.R7$(4),t.R50("ngModel",r.currentProduct.description),t.R7$(4),t.R50("ngModel",r.currentProduct.price),t.R7$(4),t.R50("ngModel",r.currentProduct.imageURL),t.R7$(4),t.Y8G("ngForOf",r.products)}}function R(i,a){if(1&i){const r=t.RV6();t.j41(0,"ion-item")(1,"ion-label")(2,"h2"),t.EFF(3),t.k0s(),t.j41(4,"p"),t.EFF(5),t.nI1(6,"currency"),t.k0s()(),t.j41(7,"ion-button",21),t.bIt("click",function(){let n;const o=t.eBV(r).$implicit,u=t.XpG(2);return t.Njj(u.deleteProduct(null!==(n=o.id)&&void 0!==n?n:0))}),t.EFF(8,"Eliminar"),t.k0s()()}if(2&i){const r=a.$implicit;t.R7$(3),t.JRh(r.name),t.R7$(2),t.SpI("Precio: ",t.ii3(6,2,r.price,"CLP","symbol-narrow","1.0-0"),"")}}function k(i,a){if(1&i&&(t.j41(0,"div")(1,"h2"),t.EFF(2,"Eliminar Producto"),t.k0s(),t.j41(3,"ion-list"),t.DNE(4,R,9,7,"ion-item",18),t.k0s()()),2&i){const r=t.XpG();t.R7$(4),t.Y8G("ngForOf",r.products)}}function y(i,a){if(1&i){const r=t.RV6();t.j41(0,"ion-item")(1,"ion-thumbnail",0),t.nrm(2,"img",19),t.k0s(),t.j41(3,"ion-label")(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.nI1(10,"currency"),t.k0s()(),t.j41(11,"ion-button",20),t.bIt("click",function(){const n=t.eBV(r).$implicit,o=t.XpG(2);return t.Njj(o.editProduct(n))}),t.EFF(12,"Editar"),t.k0s()()}if(2&i){const r=a.$implicit;t.R7$(2),t.Y8G("src",r.imageURL,t.B4B)("alt",r.name),t.R7$(3),t.JRh(r.name),t.R7$(2),t.JRh(r.description),t.R7$(2),t.SpI("Precio: ",t.ii3(10,5,r.price,"CLP","symbol-narrow","1.0-0"),"")}}function x(i,a){if(1&i&&(t.j41(0,"div")(1,"h2"),t.EFF(2,"Lista de Productos"),t.k0s(),t.j41(3,"ion-list"),t.DNE(4,y,13,10,"ion-item",18),t.k0s()()),2&i){const r=t.XpG();t.R7$(4),t.Y8G("ngForOf",r.products)}}const E=[{path:"",component:(()=>{var i;class a{constructor(e,n,o){this.databaseService=e,this.toastController=n,this.loadingController=o,this.showToast=!1,this.toastMessage="",this.products=[],this.currentProduct={id:0,name:"",description:"",price:0,category:"",imageURL:"",isAvailable:!0},this.isEditing=!1,this.activeSection="view",this.subscriptions=new b.yU}ngOnInit(){this.loadProducts()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadProducts(){var e=this;return(0,l.A)(function*(){const n=yield e.loadingController.create({message:"Cargando productos..."});yield n.present();try{e.products=yield e.getAllProducts()}catch(o){console.error("Error loading products:",o),e.presentToast("Error al cargar los productos")}finally{yield n.dismiss()}})()}getAllProducts(){const e=this.databaseService.getAllProducts();return e instanceof p.c?e.pipe((0,_.T)(n=>n||[]),(0,P.W)(()=>(0,m.of)([]))).toPromise().then(n=>null!=n?n:[]):Promise.resolve(e||[])}addProduct(){var e=this;return(0,l.A)(function*(){const n=yield e.loadingController.create({message:"Agregando producto..."});yield n.present();try{const o=yield e.createProduct(e.currentProduct);if(void 0===o)throw new Error("No se pudo crear el producto");e.currentProduct.id=o,e.products.push({...e.currentProduct}),e.presentToast("Producto agregado con \xe9xito"),e.resetForm()}catch(o){console.error("Error adding product:",o),e.presentToast("Error al agregar el producto")}finally{yield n.dismiss()}})()}createProduct(e){const n=this.databaseService.createProduct(e);return n instanceof p.c?n.toPromise():n}updateProduct(){var e=this;return(0,l.A)(function*(){const n=yield e.loadingController.create({message:"Actualizando producto..."});yield n.present();try{if(!(yield e.updateProductInDb(e.currentProduct)))throw new Error("No se pudo actualizar el producto");{const u=e.products.findIndex(f=>f.id===e.currentProduct.id);-1!==u&&(e.products[u]={...e.currentProduct}),e.presentToast("Producto actualizado con \xe9xito"),e.resetForm()}}catch(o){console.error("Error updating product:",o),e.presentToast("Error al actualizar el producto")}finally{yield n.dismiss()}})()}updateProductInDb(e){const n=this.databaseService.updateProduct(e);return n instanceof p.c?n.pipe((0,_.T)(()=>!0),(0,P.W)(()=>(0,m.of)(!1))).toPromise().then(o=>null!=o&&o):Promise.resolve(!!n)}deleteProduct(e){var n=this;return(0,l.A)(function*(){const o=yield n.loadingController.create({message:"Eliminando producto..."});yield o.present();try{if(!(yield n.deleteProductFromDb(e)))throw new Error("No se pudo eliminar el producto");n.products=n.products.filter(f=>f.id!==e),n.presentToast("Producto eliminado con \xe9xito")}catch(u){console.error("Error deleting product:",u),n.presentToast("Error al eliminar el producto")}finally{yield o.dismiss()}})()}deleteProductFromDb(e){const n=this.databaseService.deleteProduct(e);return n instanceof p.c?n.pipe((0,_.T)(()=>!0),(0,P.W)(()=>(0,m.of)(!1))).toPromise().then(o=>null!=o&&o):Promise.resolve(!!n)}editProduct(e){this.currentProduct={...e},this.isEditing=!0,this.activeSection="edit"}resetForm(){this.currentProduct={id:0,name:"",description:"",price:0,category:"",imageURL:"",isAvailable:!0},this.isEditing=!1}presentToast(e){var n=this;return(0,l.A)(function*(){yield(yield n.toastController.create({message:e,duration:2e3,position:"bottom"})).present()})()}setActiveSection(e){this.activeSection=e,"edit"!==e&&this.resetForm()}}return(i=a).\u0275fac=function(e){return new(e||i)(t.rXU(M.B),t.rXU(c.K_),t.rXU(c.Xi))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-crud"]],decls:21,vars:15,consts:[["slot","start"],["defaultHref","/admin"],[1,"ion-padding"],[1,"crud-menu"],["fill","clear",3,"click"],["name","add-circle-outline"],["name","create-outline"],["name","trash-outline"],["name","list-outline"],[4,"ngIf"],["position","bottom","color","success",3,"isOpen","message","duration"],[3,"ngSubmit"],["position","floating"],["name","image","required","",3,"ngModelChange","ngModel"],["name","description","required","",3,"ngModelChange","ngModel"],["type","number","name","price","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"ion-margin-top"],["name","name","required","",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[3,"src","alt"],["slot","end",3,"click"],["slot","end","color","danger",3,"click"]],template:function(e,n){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button",1),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Gesti\xf3n de Productos"),t.k0s()()(),t.j41(6,"ion-content",2)(7,"div",3)(8,"ion-button",4),t.bIt("click",function(){return n.setActiveSection("add")}),t.nrm(9,"ion-icon",5),t.k0s(),t.j41(10,"ion-button",4),t.bIt("click",function(){return n.setActiveSection("edit")}),t.nrm(11,"ion-icon",6),t.k0s(),t.j41(12,"ion-button",4),t.bIt("click",function(){return n.setActiveSection("delete")}),t.nrm(13,"ion-icon",7),t.k0s(),t.j41(14,"ion-button",4),t.bIt("click",function(){return n.setActiveSection("view")}),t.nrm(15,"ion-icon",8),t.k0s()(),t.DNE(16,v,22,4,"div",9)(17,F,24,5,"div",9)(18,k,5,1,"div",9)(19,x,5,1,"div",9),t.k0s(),t.nrm(20,"ion-toast",10)),2&e&&(t.R7$(8),t.AVh("active","add"===n.activeSection),t.R7$(2),t.AVh("active","edit"===n.activeSection),t.R7$(2),t.AVh("active","delete"===n.activeSection),t.R7$(2),t.AVh("active","view"===n.activeSection),t.R7$(2),t.Y8G("ngIf","add"===n.activeSection),t.R7$(),t.Y8G("ngIf","edit"===n.activeSection),t.R7$(),t.Y8G("ngIf","delete"===n.activeSection),t.R7$(),t.Y8G("ngIf","view"===n.activeSection),t.R7$(),t.Y8G("isOpen",n.showToast)("message",n.toastMessage)("duration",3e3))},dependencies:[g.Sq,g.bT,s.qT,s.BC,s.cb,s.YS,s.vS,s.cV,c.Jm,c.QW,c.W9,c.eU,c.iq,c.$w,c.uz,c.he,c.nf,c.nc,c.Zx,c.BC,c.op,c.ai,c.su,c.Gw,c.el,g.oe],styles:[".crud-menu[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:var(--ion-color-light);border-radius:15px;padding:10px;margin-bottom:20px;box-shadow:0 4px 6px #0000001a}.crud-menu[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px}.crud-menu[_ngcontent-%COMP%]   ion-button.active[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast)}.crud-menu[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-content[_ngcontent-%COMP%]{--background: #f4f5f8}form[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 4px #0000001a}form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--background: transparent}form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:not(:last-child){--border-color: var(--ion-color-light-shade);--border-width: 0 0 1px 0}form[_ngcontent-%COMP%]   ion-button[type=submit][_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700;margin-bottom:20px}ion-list[_ngcontent-%COMP%]{background:transparent}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: white;--border-radius: 10px;margin-bottom:10px;box-shadow:0 2px 4px #0000001a}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 80px;--border-radius: 10px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-color-dark)}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium)}ion-button[_ngcontent-%COMP%]{--border-radius: 10px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.crud-menu[_ngcontent-%COMP%], form[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}"]}),a})()}];let O=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[h.iI.forChild(E),h.iI]}),a})(),T=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[g.MD,s.YN,c.bv,O]}),a})()}}]);